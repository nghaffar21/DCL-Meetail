"use strict";const getGlobalThis=function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==this)return this;throw new Error("Unable to locate global `this`")},globalObject=getGlobalThis();var loader;!function(v){let T=0;const S=[],C=[],E={baseUrl:""},A={};function c(v,S,C){let E=null,R={},O=null;"function"==typeof v?R=v:"string"==typeof v?(E=v,"function"==typeof S?R=S:S instanceof Array&&(O=S,R=C)):v instanceof Array&&(O=v,"function"==typeof S&&(R=S)),O=O||["require","exports","module"],null===E&&(E="unnamed-module-"+T++),E=g(E),O=(O||[]).map((v=>function(v,T){return v?b(T,v):T}(E,v))),A[E]||(A[E]={name:E,parent:null,dclamd:1,dependencies:O,handlers:[],exports:{},dependants:new Set}),A[E].dependencies=O,p(O,(function(v){const T=A[E];if(!T)throw new Error("Could not access registered module "+E);let S=T.exports;S="function"==typeof R?R.apply(globalObject,v)||S:R,T.exports=S,d(E)}),(v=>{if("function"!=typeof onerror)throw v;onerror(v)}),E)}function d(v){const T=A[v];if(!T)throw new Error("Could not access registered module "+v);T.dclamd=2;const S=T.handlers;if(S&&S.length)for(let T=0;T<S.length;T++)S[T](A[v])}function u(v,T,S){if(!A[v])return null;if(v===T||50===S)return[v];const C=A[v].dependencies;for(let E=0,A=C.length;E<A;E++){const A=u(C[E],T,S+1);if(null!==A)return A.push(v),A}return null}function a(v,T){const S=A[v];if(!S)return!1;const C={};for(const v in A)C[v]=!1;const E=[];for(E.push(S),C[v]=!0;E.length>0;){const v=E.shift().dependencies;if(v)for(let S=0,R=v.length;S<R;S++){const R=v[S];if(R===T)return!0;const O=A[R];O&&!C[R]&&(C[R]=!0,E.push(O))}}return!1}function p(v,T,S,E){const R=new Array(v.length).fill(null);let O=0,B=!1;if("string"==typeof v){if(A[v]){if(1===A[v].dclamd)throw new Error(`Trying to load ${v} from ${E}. The first module is still loading.`);return A[v]}throw new Error(v+" has not been defined. Please include it as a dependency in "+E+"'s define()")}const M=v.length;for(let z=0;z<M;z++)switch(v[z]){case"require":const h=function(v,T,S){return p(v,T,S,E)};h.toUrl=function(v){return b(v,E)},R[z]=h,O++;break;case"exports":if(!A[E])throw new Error("Parent module "+E+" not registered yet");R[z]=A[E].exports,O++;break;case"module":R[z]={id:E,uri:b(E)},O++;break;default:{const V=v[z],m=()=>{R[z]=A[V].exports,O++,O===M&&T&&(B=!0,T(R))};if(a(V,E)){const v=u(V,E,0);v&&(v.reverse(),v.push(V),C.push(v)),w(V,(()=>{}),S,E),m()}else w(V,m,S,E);break}}!B&&O===M&&T&&T(R)}function h(v,T){return function(){return dcl.callRpc(v,T.name,S.slice.call(arguments,0))}}function w(v,T,S,C){if(A[v])return A[v].dependants.add(C),void(1===A[v].dclamd?T&&A[v].handlers.push(T):T&&T(A[v]));if(A[v]={name:v,parent:C,dclamd:1,handlers:[T],dependencies:[],dependants:new Set([C]),exports:{}},0===v.indexOf("@")){const T=A[v].exports;if("function"!=typeof dcl.loadModule)throw new Error("Asynchronous modules will not work because loadModule function is not present");dcl.loadModule(v,T).then((S=>{for(const v in S.methods){const C=S.methods[v];T[C.name]=h(S.rpcHandle,C)}d(v)})).catch((v=>{S(v)}))}}function g(v){let T,S=v;for(T=/\/\.\//;T.test(S);)S=S.replace(T,"/");for(S=S.replace(/^\.\//g,""),T=/\/(([^\/])|([^\/][^\/\.])|([^\/\.][^\/])|([^\/][^\/][^\/]+))\/\.\.\//;T.test(S);)S=S.replace(T,"/");return S=S.replace(/^(([^\/])|([^\/][^\/\.])|([^\/\.][^\/])|([^\/][^\/][^\/]+))\/\.\.\//,""),S=S.replace(/^\//g,""),S}function b(v,T){switch(v){case"require":case"exports":case"module":return v}return T?function(v,T){let S=v;if(!S.startsWith("@")&&(S.startsWith("./")||S.startsWith("../"))){const v=T.split("/");v.pop(),S=g(v.join("/")+"/"+S)}return S}(v,T):g(v)}v.config=function(v){if("object"==typeof v)for(const T in v)v.hasOwnProperty(T)&&(E[T]=v[T])},v.define=c,function(v){v.amd={},v.modules=A}(c=v.define||(v.define={})),v.require=p,"undefined"!=typeof dcl&&dcl.onStart((()=>{const v=new Set,T=[];for(const S in A)A[S]&&(1===A[S].dclamd&&T.push(A[S]),A[S].dependencies.forEach((T=>{"require"!==T&&"exports"!==T&&"module"!==T&&(A[T]||v.add(T))})));const S=[];if(C.length&&S.push(`\n> Cyclic dependencies: ${C.map((v=>"\n  - "+v.join(" -> "))).join("")}`),v.size&&S.push(`\n> Undeclared/unknown modules: ${Array.from(v).map((v=>"\n  - "+v)).join("")}`),T.length&&S.push(`\n> These modules didn't load: ${T.map((v=>"\n  - "+v.name)).join("")}.\n`),S.length)throw new Error(S.join("\n"))})),p.toUrl=b}(loader||(loader={})),globalObject.define=loader.define,globalObject.dclamd=loader,function(v){var T=function(){function t(){}return t.AVATAR={getEntityRepresentation:function(v){return v.avatarEntity}},t.FIRST_PERSON_CAMERA={getEntityRepresentation:function(v){return v.firstPersonCameraEntity}},t}(),n=function(v,T){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,T){v.__proto__=T}||function(v,T){for(var S in T)Object.prototype.hasOwnProperty.call(T,S)&&(v[S]=T[S])},n(v,T)
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */};function i(v,T){if("function"!=typeof T&&null!==T)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");function i(){this.constructor=v}n(v,T),v.prototype=null===T?Object.create(T):(i.prototype=T.prototype,new i)}var o=function(){return o=Object.assign||function(v){for(var T,S=1,C=arguments.length;S<C;S++)for(var E in T=arguments[S])Object.prototype.hasOwnProperty.call(T,E)&&(v[E]=T[E]);return v},o.apply(this,arguments)};function r(v,T,S,C){var E,A=arguments.length,R=A<3?T:null===C?C=Object.getOwnPropertyDescriptor(T,S):C;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(v,T,S,C);else for(var O=v.length-1;O>=0;O--)(E=v[O])&&(R=(A<3?E(R):A>3?E(T,S,R):E(T,S))||R);return A>3&&R&&Object.defineProperty(T,S,R),R}function s(v,T){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(v,T)}function h(v){var T="function"==typeof Symbol&&Symbol.iterator,S=T&&v[T],C=0;if(S)return S.call(v);if(v&&"number"==typeof v.length)return{next:function(){return v&&C>=v.length&&(v=void 0),{value:v&&v[C++],done:!v}}};throw new TypeError(T?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(v,T){var S="function"==typeof Symbol&&v[Symbol.iterator];if(!S)return v;var C,E,A=S.call(v),R=[];try{for(;(void 0===T||T-- >0)&&!(C=A.next()).done;)R.push(C.value)}catch(v){E={error:v}}finally{try{C&&!C.done&&(S=A.return)&&S.call(A)}finally{if(E)throw E.error}}return R}function p(v,T){for(var S=0,C=T.length,E=v.length;S<C;S++,E++)v[E]=T[S];return v}var S=0;function u(){for(var v=[],T=0;T<arguments.length;T++)v[T]=arguments[T];"undefined"!=typeof dcl?dcl.log.apply(dcl,p([],l(v))):console.log.apply(console,p(["DEBUG:"],l(v)))}function y(v,T){"undefined"!=typeof dcl?dcl.error(v,T):console.error("ERROR:",v,T)}function f(v){if(S++,0===v.length)throw new Error("newId(type: string): type cannot be empty");return v+S.toString(36)}function m(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(v){var T=16*Math.random()|0;return("x"===v?T:3&T|8).toString(16)}))}var C=[];function _(v){if(!("__event_name__"in v)||"string"!=typeof v.__event_name__)throw new Error("The EventConstructor is not registered");return v.__event_name__}var E=function(){function t(){this.listeners={}}return t.prototype.addListener=function(v,T,S){if(!v||"function"!=typeof v)throw new Error("Invalid EventConstructor");var C=_(v),E=this.listeners[C];E||(E=this.listeners[C]=[]);for(var A=0;A<E.length;A++)if(E[A].listener===T)throw new Error("The provided listener is already registered");return E.push({listener:T,fn:S}),this},t.prototype.removeListener=function(v,T){if(!T||"function"!=typeof T)throw new Error("Invalid EventConstructor");var S=_(T),C=this.listeners[S];if(!C)return!1;for(var E=0;E<C.length;E++)if(C[E].listener===v)return C.splice(E,1),!0;return!1},t.prototype.fireEvent=function(v){var T=_(v.constructor),S=this.listeners[T];if(S)for(var C=0;C<S.length;C++)try{var E=S[C];E.fn.call(E.listener,v)}catch(v){y(v)}return this},t}();function x(){var v=f("EV");if(-1!==C.indexOf(v))throw new Error("The event name ".concat(v," is already taken"));return C.push(v),function(T){return T.__event_name__=v,T}}var A,R=r([x(),s("design:paramtypes",[Object,String,Object])],(function(v,T,S){this.entity=v,this.componentName=T,this.component=S})),O=r([x(),s("design:paramtypes",[Object,String,Object])],(function(v,T,S){this.entity=v,this.componentName=T,this.classId=S})),B=r([x(),s("design:paramtypes",[Object,Object])],(function(v,T){this.entity=v,this.parent=T}));v.UIValueType=void 0,(A=v.UIValueType||(v.UIValueType={}))[A.PERCENT=0]="PERCENT",A[A.PIXELS=1]="PIXELS";var M=function(){function e(T){if(this.type=v.UIValueType.PIXELS,"string"==typeof T){var S=T;S.indexOf("px")>-1?this.type=v.UIValueType.PIXELS:S.indexOf("%")>-1&&(this.type=v.UIValueType.PERCENT),this.value=parseFloat(S)}else this.value=T}return e.prototype.toString=function(){var T=this.value.toString();return this.type===v.UIValueType.PERCENT?T+="%":T+="px",T},e}(),z="__name__symbol_",V="__classId__symbol_",j="__component__id_",q=r([x(),s("design:paramtypes",[String,String,Number])],(function(v,T,S){this.componentId=v,this.componentName=T,this.classId=S})),H=r([x(),s("design:paramtypes",[String])],(function(v){this.componentId=v})),W=r([x(),s("design:paramtypes",[String,Object])],(function(v,T){this.componentId=v,this.component=T}));function P(v,T){return function(S){if(S.isComponent)throw new TypeError("You cannot extend a component. Trying to extend ".concat(S.originalClassName," with: ").concat(v));var C=S,o=function(){var S=Array.prototype.slice.call(arguments),E=new(C.bind.apply(C,p([void 0],l(S))));return Object.defineProperty(E,z,{enumerable:!1,writable:!1,configurable:!1,value:v}),void 0!==T&&Object.defineProperty(E,V,{enumerable:!1,writable:!1,configurable:!1,value:T}),E};return void 0!==T&&(o.__classId__symbol_=T),o.__name__symbol_=v,o.isComponent=!0,o.originalClassName=v,(o.prototype=S.prototype).constructor=S,o}}function N(v,T){return function(S){if(S.isComponent)throw new TypeError("You cannot extend a component. Trying to extend ".concat(S.originalClassName," with: ").concat(v));if("number"!=typeof T||isNaN(T))throw new Error("classId: ".concat(T," is an invalid integer"));var C=S,o=function(){if(!N.engine)throw new Error("You need to set a DisposableComponent.engine before creating disposable components");var S=Array.prototype.slice.call(arguments),E=new(C.bind.apply(C,p([void 0],l(S)))),A=f("C");return Object.defineProperty(E,z,{enumerable:!1,writable:!1,configurable:!1,value:v}),Object.defineProperty(E,j,{enumerable:!1,writable:!1,configurable:!1,value:A}),void 0!==T&&Object.defineProperty(E,V,{enumerable:!1,writable:!1,configurable:!1,value:T}),N.engine&&N.engine.registerComponent(E),E};return void 0!==T&&(o.__classId__symbol_=T),o.__name__symbol_=v,o.isComponent=!0,o.isDisposableComponent=!0,o.originalClassName=v,(o.prototype=S.prototype).constructor=S,o}}function F(v){if(!v)throw new TypeError(v+" is not a component.");if(v.__name__symbol_)return v.__name__symbol_;throw new TypeError(v+" is not a registered component.")}function L(v){if(!v)throw new TypeError(v+" is not a component.");if(v.__classId__symbol_)return v.__classId__symbol_;if(!v.__name__symbol_)throw new TypeError(v+" is not a registered component.");return null}function D(v){if(!v)throw new TypeError(v+" is not a component.");if(v.__component__id_)return v.__component__id_;throw new TypeError(v+" is not a registered disposable component.")}!function(v){v.engine=null}(N||(N={}));var X=function(){function t(){this.dirty=!1,this.data={},this.subscriptions=[]}return t.component=function(v,T){if(delete v[T]){var S=T+"_"+Math.random();v[S]=void 0,Object.defineProperty(v,S,o(o({},Object.getOwnPropertyDescriptor(v,S)),{enumerable:!1})),Object.defineProperty(v,T.toString(),{get:function(){return this[S]},set:function(v){var C=this[S];if(this.data[T]=v?D(v):null,this[S]=v,v!==C){this.dirty=!0;for(var E=0;E<this.subscriptions.length;E++)this.subscriptions[E](T,v,C)}},enumerable:!0})}},t.field=function(v,T){delete v[T]&&Object.defineProperty(v,T.toString(),{get:function(){return this.data[T]},set:function(v){var S=this.data[T];if(this.data[T]=v,v!==S){this.dirty=!0;for(var C=0;C<this.subscriptions.length;C++)this.subscriptions[C](T,v,S)}},enumerable:!0})},t.uiValue=function(v,T){delete v[T]&&Object.defineProperty(v,T.toString(),{get:function(){return this.data[T].toString()},set:function(v){var S=this.data[T],C=new M(v);if(this.data[T]=C,C!==S){this.dirty=!0;for(var E=0;E<this.subscriptions.length;E++)this.subscriptions[E](T,C,S)}},enumerable:!0})},t.readonly=function(v,T){delete v[T]&&Object.defineProperty(v,T.toString(),{get:function(){if(T in this.data==0)throw new Error("The field ".concat(T," is uninitialized"));return this.data[T]},set:function(v){if(T in this.data)throw new Error("The field ".concat(T," is readonly"));this.data[T]=v,this.dirty=!0},enumerable:!0,configurable:!1})},t.prototype.onChange=function(v){return this.subscriptions.push(v),this},t.prototype.toJSON=function(){return this.data},t}();function U(v){return j in v}var Z=function(){function t(){for(var v=[],T=0;T<arguments.length;T++)v[T]=arguments[T];if(this.entities=[],this.active=!1,this._requiresNames=[],!v)throw new Error("ComponentGroup: Could not load the requires list");if(!(v instanceof Array))throw new Error("ComponentGroup: requires list is not an Array");Object.defineProperty(this,"requires",{get:function(){return v.slice()}}),Object.defineProperty(this,"requiresNames",{get:function(){return this._requiresNames.slice()}});for(var n=function(T){var C=v[T],E=null;if(!C)throw new Error("ComponentGroup: the required component at location ".concat(T," is invalid"));try{E=F(C)}catch(v){throw new Error("ComponentGroup: the required component at location ".concat(T," is not registered as a @Component. Remember to provide the class of the component, not the name"))}if(S._requiresNames.some((function(v){return v===E})))throw new Error("ComponentGroup: the required component list has a repeated name ".concat(E));S._requiresNames.push(E)},S=this,C=0;C<v.length;C++)n(C)}return t.prototype.hasEntity=function(v){return!!v.isAddedToEngine()&&-1!==this.entities.indexOf(v)},t.prototype.addEntity=function(v){if(!v.isAddedToEngine())throw new TypeError("ComponentGroup: Cannot add a entity that is not added to the engine");-1===this.entities.indexOf(v)&&this.entities.push(v)},t.prototype.removeEntity=function(v){var T=this.entities.indexOf(v);-1!==T&&this.entities.splice(T,1)},t.prototype.componentRemoved=function(v,T){-1!==this._requiresNames.indexOf(T)&&this.removeEntity(v)},t.prototype.meetsRequirements=function(v){for(var T=0;T<this._requiresNames.length;T++)if(!(this._requiresNames[T]in v.components))return!1;return!0},t}(),Q=function(){function t(v){this.name=v,this.children={},this.eventManager=null,this.alive=!1,this.uuid=f("E"),this.components={},this.engine=null,this._parent=null}return t.prototype.addComponentOrReplace=function(v){if("function"==typeof v)throw new Error("You passed a function or class as a component, an instance of component is expected");if("object"!=typeof v)throw new Error("You passed a ".concat(typeof v,", an instance of component is expected"));var T=F(v);if(this.components[T]){if(this.components[T]===v)return v;this.removeComponent(this.components[T],!1)}return this.addComponent(v)},t.prototype.hasComponent=function(v){var T=typeof v;if("string"!==T&&"object"!==T&&"function"!==T)throw new Error("Entity#has(component): component is not a class, name or instance");if(null===v)return!1;var S="string"===T?v:F(v),C=this.components[S];return!!C&&("object"===T?C===v:"function"!==T||C instanceof v)},t.prototype.getComponent=function(v){var T=typeof v;if("string"!==T&&"function"!==T)throw new Error("Entity#get(component): component is not a class or name");var S="string"===T?v:F(v),C=this.components[S];if(!C)throw new Error('Can not get component "'.concat(S,'" from entity "').concat(this.identifier,'"'));if("function"===T){if(C instanceof v)return C;throw new Error('Can not get component "'.concat(S,'" from entity "').concat(this.identifier,'" (by instance)'))}return C},t.prototype.getComponentOrNull=function(v){var T=typeof v;if("string"!==T&&"function"!==T)throw new Error("Entity#getOrNull(component): component is not a class or name");var S="string"===T?v:F(v),C=this.components[S];return C?"function"===T?C instanceof v?C:null:C:null},t.prototype.getComponentOrCreate=function(v){if("function"!=typeof v)throw new Error("Entity#getOrCreate(component): component is not a class");var T=this.getComponentOrNull(v);return T||(F(T=new v),this.addComponentOrReplace(T)),T},t.prototype.addComponent=function(v){if("object"!=typeof v)throw new Error("Entity#add(component): You passed a function or class as a component, an instance of component is expected");var T=F(v),S=L(v);if(this.components[T])throw new Error('A component of type "'.concat(T,'" is already present in entity "').concat(this.identifier,'"'));this.components[T]=v,this.eventManager&&this.eventManager.fireEvent(new O(this,T,S));var C=v;return"function"==typeof C.addedToEntity&&C.addedToEntity(this),v},t.prototype.removeComponent=function(v,T){void 0===T&&(T=!0);var S=typeof v;if("string"!==S&&"function"!==S&&"object"!==S)throw new Error("Entity#remove(component): component is not a class, class or name");var C="string"===S?v:F(v),E=this.components[C];if(E){if("function"===S)return E instanceof v?(delete this.components[C],void(E&&(T&&this.eventManager&&this.eventManager.fireEvent(new R(this,C,E)),"function"==typeof E.removedFromEntity&&E.removedFromEntity(this)))):void u('Entity Warning: Trying to remove wrong (by constructor) component "'.concat(C,'" from entity "').concat(this.identifier,'"'));delete this.components[C],E&&(T&&this.eventManager&&this.eventManager.fireEvent(new R(this,C,E)),"function"==typeof E.removedFromEntity&&E.removedFromEntity(this))}else u('Entity Warning: Trying to remove inexisting component "'.concat(C,'" from entity "').concat(this.identifier,'"'))},t.prototype.isAddedToEngine=function(){return!(!this.engine||!(this.uuid in this.engine.entities)&&this.engine.rootEntity!==this)},t.prototype.setParent=function(v){var T;if(v&&"getEntityRepresentation"in v){if(!this.engine)throw new Error("In order to set an attachable as parent, you first need to add the entity to the engine.");T=v.getEntityRepresentation(this.engine)}else T=!v&&this.engine?this.engine.rootEntity:v;var S=this.getParent();if(T===this)throw new Error('Failed to set parent for entity "'.concat(this.identifier,"\": An entity can't set itself as a its own parent"));if(T===S)return this;var C=this.getCircularAncestor(T);if(C)throw new Error('Failed to set parent for entity "'.concat(this.identifier,'": Circular parent references are not allowed (See entity "').concat(C,'")'));return S&&delete S.children[this.uuid],null!==T&&"0"!==T.uuid&&(!T.isAddedToEngine()&&this.isAddedToEngine()&&this.engine.removeEntity(this),T.isAddedToEngine()&&!this.isAddedToEngine()&&T.engine.addEntity(this)),this._parent=T||null,this.registerAsChild(),this.eventManager&&this.engine&&this.eventManager.fireEvent(new B(this,T)),this},t.prototype.getParent=function(){return this._parent},Object.defineProperty(t.prototype,"identifier",{get:function(){return this.name||this.uuid},enumerable:!1,configurable:!0}),t.prototype.getCircularAncestor=function(v){for(var T=this.engine?this.engine.rootEntity:null,S=v;S&&S!==T;){var C=S.getParent();if(C===this)return S.uuid;S=C}return null},t.prototype.registerAsChild=function(){var v=this.getParent();this.uuid&&v&&(v.children[this.uuid]=this)},t}(),J=function(){function t(v){this.eventManager=new E,this.systems=[],this.entityLists={},this.addedSystems=[],this._entities={},this._disposableComponents={},this._componentGroups={},this.simpleSystems=[],this.eventManager.addListener(O,this,this.componentAddedHandler),this.eventManager.addListener(R,this,this.componentRemovedHandler),this.rootEntity=v,this.firstPersonCameraEntity=new Q,this.firstPersonCameraEntity.uuid="FirstPersonCameraEntityReference",this.addEntity(this.firstPersonCameraEntity),this.avatarEntity=new Q,this.avatarEntity.uuid="AvatarEntityReference",this.addEntity(this.avatarEntity)}return Object.defineProperty(t.prototype,"entities",{get:function(){return this._entities},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disposableComponents",{get:function(){return this._disposableComponents},enumerable:!1,configurable:!0}),t.prototype.addEntity=function(v){var T=v.getParent();if(v.isAddedToEngine())return v;for(var S in v.eventManager=this.eventManager,v.engine=this,this._entities[v.uuid]=v,this.checkRequirementsAndAdd(v),T?T.isAddedToEngine()||T===this.rootEntity||u("Engine: warning, added an entity with a parent not present in the engine. Parent id: "+T.uuid):v.setParent(this.rootEntity),v.alive=!0,v.children){var C=v.children[S];C&&(C.isAddedToEngine()||this.addEntity(C))}return v},t.prototype.removeEntity=function(v){var T=v.uuid;if(v.isAddedToEngine()){for(var S in v.components){var C=this._componentGroups[S];if(C)for(var E in C)C[E].removeEntity(v);delete this.entityLists[S][T]}for(var A=0;A<this.simpleSystems.length;A++){var R=this.simpleSystems[A];R.onRemoveEntity&&R.onRemoveEntity(v)}for(var A in v.children){var O=v.children[A];O&&this.removeEntity(O)}return v.alive=!1,v.eventManager=null,delete this._entities[T],!0}for(var S in u("Engine: Trying to remove non existent entity from engine."),v.isAddedToEngine()?u("Engine: Entity id: "+T):u('Engine: Entity "'.concat(v.uuid,'" has not been added to any engine yet.')),u("Engine: Entity's components:"),v.components)u(S);return!1},t.prototype.addSystem=function(v,T){if(void 0===T&&(T=0),-1!==this.addedSystems.indexOf(v))return u("Engine: Trying to add a system that is already added. Aborting"),v;if(this.systems.length>0)for(var S=0;S<this.systems.length;S++){var C=this.systems[S],E=S===this.systems.length-1;if(C.priority>T){this.addedSystems.push(v),this.systems.splice(S,0,{system:v,priority:T});break}if(E){this.addedSystems.push(v),this.systems.splice(S+1,0,{system:v,priority:T});break}}else this.addedSystems.push(v),this.systems.splice(1,0,{system:v,priority:T});return this.registerSystem(v),v},t.prototype.removeSystem=function(v){var T=this.addedSystems.indexOf(v);if(-1!==T){v.active=!1,v.deactivate&&v.deactivate(),this.addedSystems.splice(T,1);for(var S=0;S<this.systems.length;S++)this.systems[S].system===v&&this.systems.splice(S,1);return!0}return!1},t.prototype.update=function(v){for(var T in this.systems){var S=this.systems[T].system;if(S.active&&S.update)try{S.update(v)}catch(v){y(v)}}return this},t.prototype.getEntitiesWithComponent=function(v){var T="string"==typeof v?v:F(v);return T in this.entityLists?this.entityLists[T]:this.entityLists[T]={}},t.prototype.registerComponent=function(v){var T=D(v),S=F(v),C=L(v);this._disposableComponents[T]=v,null!==C&&(this.eventManager.fireEvent(new q(T,S,C)),this.eventManager.fireEvent(new W(T,v)))},t.prototype.disposeComponent=function(v){var T=D(v);return delete this._disposableComponents[T]&&(this.eventManager.fireEvent(new H(T)),v.onDispose&&v.onDispose(),!0)},t.prototype.updateComponent=function(v){this.eventManager.fireEvent(new W(D(v),v))},t.prototype.getComponentGroup=function(){for(var v=[],T=0;T<arguments.length;T++)v[T]=arguments[T];var S=void 0;if(v.length>0&&(B=this._componentGroups[F(v[0])]))for(var C=v.slice(),E=0;E<B.length;E++){var A=B[E];if(C.length===A.requires.length){for(var R=0;R<C.length&&-1!==A.requires.indexOf(C[R]);R++)R===C.length-1&&(S=A);if(S)break}}if(S)return S;(S=new(Z.bind.apply(Z,p([void 0],l(v))))).active=!0;var O=S.requiresNames;for(E=0;E<O.length;E++){var B,M=O[E];(B=this._componentGroups[M])||(this._componentGroups[M]=B=[]),-1===B.indexOf(S)&&B.push(S)}for(var z in this._entities)this.checkRequirements(this._entities[z],S);return S},t.prototype.removeComponentGroup=function(v){if(v.active){v.active=!1;for(var T=v.requiresNames,S=0;S<T.length;S++){var C=T[S],E=this._componentGroups[C];if(E){var A=E.indexOf(v);-1!==A&&E.splice(A,1)}}return!0}return!1},t.prototype.registerSystem=function(v){v.active=!0,v.activate&&v.activate(this),this.simpleSystems.push(v)},t.prototype.checkRequirementsAndAdd=function(v){if(v.isAddedToEngine()){for(var T in v.components){T in this.entityLists||(this.entityLists[T]={}),this.entityLists[T][v.uuid]=v;var S=this._componentGroups[T];if(S)for(var C in S)this.checkRequirements(v,S[C])}for(var E=0;E<this.simpleSystems.length;E++){var A=this.simpleSystems[E];A.onAddEntity&&A.onAddEntity(v)}}},t.prototype.checkRequirements=function(v,T){T.meetsRequirements(v)?T.hasEntity(v)||T.addEntity(v):T.hasEntity(v)&&T.removeEntity(v)},t.prototype.componentAddedHandler=function(v){var T,S=v.entity,C=v.componentName;if(S.isAddedToEngine()){this.entityLists[C]?this.entityLists[C][S.uuid]=S:this.entityLists[C]=((T={})[S.uuid]=S,T);var E=this._componentGroups[C];if(E)for(var A in E)this.checkRequirements(S,E[A])}},t.prototype.componentRemovedHandler=function(v){var T=v.entity,S=v.componentName;if(T.isAddedToEngine()){delete this.entityLists[S][T.uuid];var C=this._componentGroups[S];if(C)for(var E in C)this.checkRequirements(T,C[E])}},t}(),K=Promise.resolve().then.bind(Promise.resolve());function G(v){var T=K(v);return T.isComplete=!1,T.then((function(v){T.isComplete=!0,T.result=v,T.didFail=!1})).catch((function(v){T.isComplete=!0,T.error=v,T.didFail=!0,y("executeTask: FAILED "+v.toString(),v)})),T}var $,et,nt=function(){function t(v,T,S,C){void 0===T&&(T=!1),this.initalize(v,T,S,C)}return t.prototype.initalize=function(v,T,S,C){return void 0===T&&(T=!1),this.mask=v,this.skipNextObservers=T,this.target=S,this.currentTarget=C,this},t}(),Y=function(v,T,S){void 0===S&&(S=null),this.callback=v,this.mask=T,this.scope=S,this.unregisterOnNextCall=!1,this._willBeUnregistered=!1},ot=function(){function t(){this._observers=null,this._observables=null}return t.Watch=function(v,T,S,C){var E,A;void 0===S&&(S=-1),void 0===C&&(C=null);var R=new t;R._observers=new Array,R._observables=v;try{for(var O=h(v),B=O.next();!B.done;B=O.next()){var M=B.value.add(T,S,!1,C);M&&R._observers.push(M)}}catch(v){E={error:v}}finally{try{B&&!B.done&&(A=O.return)&&A.call(O)}finally{if(E)throw E.error}}return R},t.prototype.dispose=function(){if(this._observers&&this._observables)for(var v=0;v<this._observers.length;v++)this._observables[v].remove(this._observers[v]);this._observers=null,this._observables=null},t}(),it=function(){function t(v){this._observers=new Array,this._onObserverAdded=null,this._eventState=new nt(0),v&&(this._onObserverAdded=v)}return t.prototype.add=function(v,T,S,C,E){if(void 0===T&&(T=-1),void 0===S&&(S=!1),void 0===C&&(C=null),void 0===E&&(E=!1),!v)return null;var A=new Y(v,T,C);return A.unregisterOnNextCall=E,S?this._observers.unshift(A):this._observers.push(A),this._onObserverAdded&&this._onObserverAdded(A),A},t.prototype.addOnce=function(v){return this.add(v,void 0,void 0,void 0,!0)},t.prototype.remove=function(v){return!!v&&-1!==this._observers.indexOf(v)&&(this._deferUnregister(v),!0)},t.prototype.removeCallback=function(v,T){for(var S=0;S<this._observers.length;S++)if(this._observers[S].callback===v&&(!T||T===this._observers[S].scope))return this._deferUnregister(this._observers[S]),!0;return!1},t.prototype.notifyObservers=function(v,T,S,C){var E,A;if(void 0===T&&(T=-1),!this._observers.length)return!0;var R=this._eventState;R.mask=T,R.target=S,R.currentTarget=C,R.skipNextObservers=!1,R.lastReturnValue=v;try{for(var O=h(this._observers),B=O.next();!B.done;B=O.next()){var M=B.value;if(!M._willBeUnregistered&&(M.mask&T&&(M.scope?R.lastReturnValue=M.callback.apply(M.scope,[v,R]):R.lastReturnValue=M.callback(v,R),M.unregisterOnNextCall&&this._deferUnregister(M)),R.skipNextObservers))return!1}}catch(v){E={error:v}}finally{try{B&&!B.done&&(A=O.return)&&A.call(O)}finally{if(E)throw E.error}}return!0},t.prototype.notifyObserversWithPromise=function(v,T,S,C){var E=this;void 0===T&&(T=-1);var A=Promise.resolve(v);if(!this._observers.length)return A;var R=this._eventState;return R.mask=T,R.target=S,R.currentTarget=C,R.skipNextObservers=!1,this._observers.forEach((function(S){R.skipNextObservers||S._willBeUnregistered||S.mask&T&&(A=S.scope?A.then((function(T){return R.lastReturnValue=T,S.callback.apply(S.scope,[v,R])})):A.then((function(T){return R.lastReturnValue=T,S.callback(v,R)})),S.unregisterOnNextCall&&E._deferUnregister(S))})),A.then((function(){return v}))},t.prototype.notifyObserver=function(v,T,S){void 0===S&&(S=-1);var C=this._eventState;C.mask=S,C.skipNextObservers=!1,v.callback(T,C)},t.prototype.hasObservers=function(){return this._observers.length>0},t.prototype.clear=function(){this._observers=new Array,this._onObserverAdded=null},t.prototype.clone=function(){var v=new t;return v._observers=this._observers.slice(0),v},t.prototype.hasSpecificMask=function(v){var T,S;void 0===v&&(v=-1);try{for(var C=h(this._observers),E=C.next();!E.done;E=C.next()){var A=E.value;if(A.mask&v||A.mask===v)return!0}}catch(v){T={error:v}}finally{try{E&&!E.done&&(S=C.return)&&S.call(C)}finally{if(T)throw T.error}}return!1},t.prototype._deferUnregister=function(v){var T=this;v.unregisterOnNextCall=!1,v._willBeUnregistered=!0,G((function(){return function(v,T,S,C){return new(S||(S=Promise))((function(T,E){function s(v){try{d(C.next(v))}catch(v){E(v)}}function a(v){try{d(C.throw(v))}catch(v){E(v)}}function d(v){var C;v.done?T(v.value):(C=v.value,C instanceof S?C:new S((function(v){v(C)}))).then(s,a)}d((C=C.apply(v,[])).next())}))}(T,0,void 0,(function(){return function(v,T){var S,C,E,A,R={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]};return A={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(A[Symbol.iterator]=function(){return this}),A;function a(A){return function(O){return function(A){if(S)throw new TypeError("Generator is already executing.");for(;R;)try{if(S=1,C&&(E=2&A[0]?C.return:A[0]?C.throw||((E=C.return)&&E.call(C),0):C.next)&&!(E=E.call(C,A[1])).done)return E;switch(C=0,E&&(A=[2&A[0],E.value]),A[0]){case 0:case 1:E=A;break;case 4:return R.label++,{value:A[1],done:!1};case 5:R.label++,C=A[1],A=[0];continue;case 7:A=R.ops.pop(),R.trys.pop();continue;default:if(!((E=(E=R.trys).length>0&&E[E.length-1])||6!==A[0]&&2!==A[0])){R=0;continue}if(3===A[0]&&(!E||A[1]>E[0]&&A[1]<E[3])){R.label=A[1];break}if(6===A[0]&&R.label<E[1]){R.label=E[1],E=A;break}if(E&&R.label<E[2]){R.label=E[2],R.ops.push(A);break}E[2]&&R.ops.pop(),R.trys.pop();continue}A=T.call(v,R)}catch(v){A=[6,v],C=0}finally{S=E=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([A,O])}}}(this,(function(T){return[2,this._remove(v)]}))}))}))},t.prototype._remove=function(v){if(!v)return!1;var T=this._observers.indexOf(v);return-1!==T&&(this._observers.splice(T,1),!0)},t}(),rt=r([x(),s("design:paramtypes",[String,Object])],(function(v,T){this.uuid=v,this.payload=T})),st=r([x(),s("design:paramtypes",[Object])],(function(v){this.payload=v})),at=r([x(),s("design:paramtypes",[Object])],(function(v){this.payload=v}));function tt(v){return function(){et&&et.subscribe(v)}}var lt=new it(tt("cameraModeChanged")),dt=new it(tt("idleStateChanged")),ut=new it(tt("onEnterScene")),ct=ut,ht=new it(tt("onLeaveScene")),pt=ht,ft=new it(tt("sceneStart")),yt=new it(tt("playerExpression")),gt=new it(tt("onPointerLock")),vt=new it(tt("videoEvent")),Tt=new it(tt("profileChanged")),wt=new it(tt("playerConnected")),bt=new it(tt("playerDisconnected")),St=new it(tt("onRealmChanged")),xt=new it(tt("playerClicked"));function mt(v){(et=v)&&et.onEvent((function(v){switch(v.type){case"onEnterScene":return void ut.notifyObservers(v.data);case"onLeaveScene":return void ht.notifyObservers(v.data);case"cameraModeChanged":return void lt.notifyObservers(v.data);case"idleStateChanged":return void dt.notifyObservers(v.data);case"sceneStart":return void ft.notifyObservers(v.data);case"playerExpression":return void yt.notifyObservers(v.data);case"videoEvent":var T=v.data,S=N.engine.disposableComponents[T.componentId];return S&&S.update(T),void vt.notifyObservers(T);case"profileChanged":return void Tt.notifyObservers(v.data);case"onPointerLock":return void gt.notifyObservers(v.data);case"playerConnected":return void wt.notifyObservers(v.data);case"playerDisconnected":return void bt.notifyObservers(v.data);case"onRealmChanged":return void St.notifyObservers(v.data);case"playerClicked":return void xt.notifyObservers(v.data)}}))}var Ct=function(){function t(v){this.dcl=v,this.cachedComponents={}}return t.prototype.activate=function(v){var T=this;this.engine=v,v.eventManager.addListener(O,this,this.componentAdded),v.eventManager.addListener(R,this,this.componentRemoved),v.eventManager.addListener(q,this,this.disposableComponentCreated),v.eventManager.addListener(H,this,this.disposableComponentRemoved),v.eventManager.addListener(W,this,this.disposableComponentUpdated),v.eventManager.addListener(B,this,this.parentChanged);var S=v.rootEntity.uuid;this.dcl.addEntity(S),this.dcl.onUpdate((function(S){v.update(S),T.presentEntities()})),this.dcl.onEvent((function(T){var S=T.data;switch(T.type){case"uuidEvent":v.eventManager.fireEvent(new rt(S.uuid,S.payload));break;case"raycastResponse":("HitFirst"===S.queryType||"HitAll"===S.queryType)&&v.eventManager.fireEvent(new st(S));break;case"actionButtonEvent":v.eventManager.fireEvent(new at(S.payload))}}))},t.prototype.onAddEntity=function(v){if(v&&v.isAddedToEngine()){var T=v.uuid,S=v.getParent();for(var C in this.dcl.addEntity(T),S&&this.dcl.setParent(T,S.uuid),this.cachedComponents[T]={},v.components){var E=v.components[C],A=L(E);if(null!==A)if(U(E))this.dcl.attachEntityComponent(v.uuid,C,D(E));else{var R=JSON.stringify(E);this.dcl.updateEntityComponent(T,C,A,R),this.cachedComponents[T][C]=R}}}},t.prototype.onRemoveEntity=function(v){if(v.isAddedToEngine()){var T=v.uuid;this.dcl.removeEntity(T),delete this.cachedComponents[T]}},t.prototype.presentEntities=function(){for(var v in this.engine.entities){var T=this.engine.entities[v];for(var S in T.components){var C=L(R=T.components[S]);if(null!==C&&!U(R)){var E=this.getJsonIfDirty(T.uuid,S,R);E&&(this.dcl.updateEntityComponent(T.uuid,S,C,E),this.clearDirty(T.uuid,S,R,E))}}}for(var A in this.engine.disposableComponents){var R;(R=this.engine.disposableComponents[A])instanceof X&&R.dirty&&(this.dcl.componentUpdated(A,JSON.stringify(R)),R.dirty=!1)}},t.prototype.componentAdded=function(v){if(v.entity.isAddedToEngine()){var T=v.entity.components[v.componentName];if(U(T))this.dcl.attachEntityComponent(v.entity.uuid,v.componentName,D(T));else if(null!==v.classId){var S=JSON.stringify(T);this.dcl.updateEntityComponent(v.entity.uuid,v.componentName,v.classId,S),this.cachedComponents[v.entity.uuid][v.componentName]=S}}},t.prototype.componentRemoved=function(v){v.entity.isAddedToEngine()&&(this.dcl.removeEntityComponent(v.entity.uuid,v.componentName),delete this.cachedComponents[v.entity.uuid][v.componentName])},t.prototype.disposableComponentCreated=function(v){this.dcl.componentCreated(v.componentId,v.componentName,v.classId)},t.prototype.disposableComponentRemoved=function(v){this.dcl.componentDisposed(v.componentId)},t.prototype.disposableComponentUpdated=function(v){this.dcl.componentUpdated(v.componentId,JSON.stringify(v.component))},t.prototype.parentChanged=function(v){this.dcl.setParent(v.entity.uuid,v.parent?v.parent.uuid:"0")},t.prototype.getJsonIfDirty=function(v,T,S){var C=JSON.stringify(S);return C!==this.cachedComponents[v][T]&&C},t.prototype.clearDirty=function(v,T,S,C){this.cachedComponents[v][T]=C},t}(),_t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},At={},Rt={};!function(v){var T,S;Object.defineProperty(v,"__esModule",{value:!0}),v.RAD2DEG=v.DEG2RAD=v.Epsilon=v.ToLinearSpace=v.ToGammaSpace=v.Space=v.Orientation=void 0,(T=v.Orientation||(v.Orientation={}))[T.CW=0]="CW",T[T.CCW=1]="CCW",(S=v.Space||(v.Space={}))[S.LOCAL=0]="LOCAL",S[S.WORLD=1]="WORLD",S[S.BONE=2]="BONE",v.ToGammaSpace=1/2.2,v.ToLinearSpace=2.2,v.Epsilon=1e-6,v.DEG2RAD=Math.PI/180,v.RAD2DEG=360/(2*Math.PI)}(Rt);var Pt={},Ot={};Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.buildArray=void 0,Ot.buildArray=function(v,T){const S=[];for(let C=0;C<v;++C)S.push(T());return S};var Ft={},It={},Bt={},zt={},Nt={};Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.Scalar=void 0;class Et{static WithinEpsilon(v,T,S=1401298e-51){const C=v-T;return-S<=C&&C<=S}static ToHex(v){const T=v.toString(16);return v<=15?("0"+T).toUpperCase():T.toUpperCase()}static Sign(v){const T=+v;return 0===T||isNaN(T)?T:T>0?1:-1}static Clamp(v,T=0,S=1){return Math.min(S,Math.max(T,v))}static Log2(v){return Math.log(v)*Math.LOG2E}static Repeat(v,T){return v-Math.floor(v/T)*T}static Normalize(v,T,S){return(v-T)/(S-T)}static Denormalize(v,T,S){return v*(S-T)+T}static DeltaAngle(v,T){let S=Et.Repeat(T-v,360);return S>180&&(S-=360),S}static PingPong(v,T){const S=Et.Repeat(v,2*T);return T-Math.abs(S-T)}static SmoothStep(v,T,S){let C=Et.Clamp(S);return C=-2*C*C*C+3*C*C,T*C+v*(1-C)}static MoveTowards(v,T,S){let C=0;return C=Math.abs(T-v)<=S?T:v+Et.Sign(T-v)*S,C}static MoveTowardsAngle(v,T,S){const C=Et.DeltaAngle(v,T);let E=0;return E=-S<C&&C<S?T:Et.MoveTowards(v,v+C,S),E}static Lerp(v,T,S){return v+(T-v)*S}static LerpAngle(v,T,S){let C=Et.Repeat(T-v,360);return C>180&&(C-=360),v+C*Et.Clamp(S)}static InverseLerp(v,T,S){let C=0;return C=v!==T?Et.Clamp((S-v)/(T-v)):0,C}static Hermite(v,T,S,C,E){const A=E*E,R=E*A;return v*(2*R-3*A+1)+S*(-2*R+3*A)+T*(R-2*A+E)+C*(R-A)}static RandomRange(v,T){return v===T?v:Math.random()*(T-v)+v}static RangeToPercent(v,T,S){return(v-T)/(S-T)}static PercentToRange(v,T,S){return(S-T)*v+T}static NormalizeRadians(v){return v-Et.TwoPi*Math.floor((v+Math.PI)/Et.TwoPi)}}Nt.Scalar=Et,Et.TwoPi=2*Math.PI,Object.defineProperty(zt,"__esModule",{value:!0}),zt.Vector4=void 0;const Lt=Rt,Vt=Nt,kt=Ft;class Mt{constructor(v,T,S,C){this.x=v,this.y=T,this.z=S,this.w=C}static Add(v,T){return new Mt(v.x,v.y,v.z,v.w).addInPlace(T)}static FromArray(v,T=0){return new Mt(v[T],v[T+1],v[T+2],v[T+3])}static FromArrayToRef(v,T,S){S.x=v[T],S.y=v[T+1],S.z=v[T+2],S.w=v[T+3]}static FromFloatArrayToRef(v,T,S){Mt.FromArrayToRef(v,T,S)}static FromFloatsToRef(v,T,S,C,E){E.x=v,E.y=T,E.z=S,E.w=C}static Zero(){return new Mt(0,0,0,0)}static One(){return new Mt(1,1,1,1)}static Normalize(v){const T=Mt.Zero();return Mt.NormalizeToRef(v,T),T}static NormalizeToRef(v,T){T.copyFrom(v),T.normalize()}static Minimize(v,T){const S=new Mt(v.x,v.y,v.z,v.w);return S.minimizeInPlace(T),S}static Maximize(v,T){const S=new Mt(v.x,v.y,v.z,v.w);return S.maximizeInPlace(T),S}static Distance(v,T){return Math.sqrt(Mt.DistanceSquared(v,T))}static DistanceSquared(v,T){const S=v.x-T.x,C=v.y-T.y,E=v.z-T.z,A=v.w-T.w;return S*S+C*C+E*E+A*A}static Center(v,T){const S=Mt.Add(v,T);return S.scaleInPlace(.5),S}static TransformNormal(v,T){const S=Mt.Zero();return Mt.TransformNormalToRef(v,T,S),S}static TransformNormalToRef(v,T,S){const C=T.m,E=v.x*C[0]+v.y*C[4]+v.z*C[8],A=v.x*C[1]+v.y*C[5]+v.z*C[9],R=v.x*C[2]+v.y*C[6]+v.z*C[10];S.x=E,S.y=A,S.z=R,S.w=v.w}static TransformNormalFromFloatsToRef(v,T,S,C,E,A){const R=E.m;A.x=v*R[0]+T*R[4]+S*R[8],A.y=v*R[1]+T*R[5]+S*R[9],A.z=v*R[2]+T*R[6]+S*R[10],A.w=C}toString(){return"{X: "+this.x+" Y:"+this.y+" Z:"+this.z+" W:"+this.w+"}"}getClassName(){return"Vector4"}getHashCode(){let v=this.x||0;return v=397*v^(this.y||0),v=397*v^(this.z||0),v=397*v^(this.w||0),v}asArray(){const v=new Array;return this.toArray(v,0),v}toArray(v,T=0){return v[T]=this.x,v[T+1]=this.y,v[T+2]=this.z,v[T+3]=this.w,this}addInPlace(v){return this.x+=v.x,this.y+=v.y,this.z+=v.z,this.w+=v.w,this}add(v){return new Mt(this.x+v.x,this.y+v.y,this.z+v.z,this.w+v.w)}addToRef(v,T){return T.x=this.x+v.x,T.y=this.y+v.y,T.z=this.z+v.z,T.w=this.w+v.w,this}subtractInPlace(v){return this.x-=v.x,this.y-=v.y,this.z-=v.z,this.w-=v.w,this}subtract(v){return new Mt(this.x-v.x,this.y-v.y,this.z-v.z,this.w-v.w)}subtractToRef(v,T){return T.x=this.x-v.x,T.y=this.y-v.y,T.z=this.z-v.z,T.w=this.w-v.w,this}subtractFromFloats(v,T,S,C){return new Mt(this.x-v,this.y-T,this.z-S,this.w-C)}subtractFromFloatsToRef(v,T,S,C,E){return E.x=this.x-v,E.y=this.y-T,E.z=this.z-S,E.w=this.w-C,this}negate(){return new Mt(-this.x,-this.y,-this.z,-this.w)}scaleInPlace(v){return this.x*=v,this.y*=v,this.z*=v,this.w*=v,this}scale(v){return new Mt(this.x*v,this.y*v,this.z*v,this.w*v)}scaleToRef(v,T){return T.x=this.x*v,T.y=this.y*v,T.z=this.z*v,T.w=this.w*v,this}scaleAndAddToRef(v,T){return T.x+=this.x*v,T.y+=this.y*v,T.z+=this.z*v,T.w+=this.w*v,this}equals(v){return v&&this.x===v.x&&this.y===v.y&&this.z===v.z&&this.w===v.w}equalsWithEpsilon(v,T=Lt.Epsilon){return v&&Vt.Scalar.WithinEpsilon(this.x,v.x,T)&&Vt.Scalar.WithinEpsilon(this.y,v.y,T)&&Vt.Scalar.WithinEpsilon(this.z,v.z,T)&&Vt.Scalar.WithinEpsilon(this.w,v.w,T)}equalsToFloats(v,T,S,C){return this.x===v&&this.y===T&&this.z===S&&this.w===C}multiplyInPlace(v){return this.x*=v.x,this.y*=v.y,this.z*=v.z,this.w*=v.w,this}multiply(v){return new Mt(this.x*v.x,this.y*v.y,this.z*v.z,this.w*v.w)}multiplyToRef(v,T){return T.x=this.x*v.x,T.y=this.y*v.y,T.z=this.z*v.z,T.w=this.w*v.w,this}multiplyByFloats(v,T,S,C){return new Mt(this.x*v,this.y*T,this.z*S,this.w*C)}divide(v){return new Mt(this.x/v.x,this.y/v.y,this.z/v.z,this.w/v.w)}divideToRef(v,T){return T.x=this.x/v.x,T.y=this.y/v.y,T.z=this.z/v.z,T.w=this.w/v.w,this}divideInPlace(v){return this.divideToRef(v,this)}minimizeInPlace(v){return v.x<this.x&&(this.x=v.x),v.y<this.y&&(this.y=v.y),v.z<this.z&&(this.z=v.z),v.w<this.w&&(this.w=v.w),this}maximizeInPlace(v){return v.x>this.x&&(this.x=v.x),v.y>this.y&&(this.y=v.y),v.z>this.z&&(this.z=v.z),v.w>this.w&&(this.w=v.w),this}floor(){return new Mt(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z),Math.floor(this.w))}fract(){return new Mt(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z),this.w-Math.floor(this.w))}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}normalize(){const v=this.length();return 0===v?this:this.scaleInPlace(1/v)}toVector3(){return new kt.Vector3(this.x,this.y,this.z)}clone(){return new Mt(this.x,this.y,this.z,this.w)}copyFrom(v){return this.x=v.x,this.y=v.y,this.z=v.z,this.w=v.w,this}copyFromFloats(v,T,S,C){return this.x=v,this.y=T,this.z=S,this.w=C,this}set(v,T,S,C){return this.copyFromFloats(v,T,S,C)}setAll(v){return this.x=this.y=this.z=this.w=v,this}}zt.Vector4=Mt,Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.Matrix=void 0;const Ut=Ft,qt=It,Gt=Pt,Ht=zt;class Dt{constructor(){this._isIdentity=!1,this._isIdentityDirty=!0,this._isIdentity3x2=!0,this._isIdentity3x2Dirty=!0,this._m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this._updateIdentityStatus(!1)}get m(){return this._m}static get IdentityReadOnly(){return Dt._identityReadOnly}static FromArray(v,T=0){const S=new Dt;return Dt.FromArrayToRef(v,T,S),S}static FromArrayToRef(v,T,S){for(let C=0;C<16;C++)S._m[C]=v[C+T];S._markAsUpdated()}static FromFloatArrayToRefScaled(v,T,S,C){for(let E=0;E<16;E++)C._m[E]=v[E+T]*S;C._markAsUpdated()}static FromValuesToRef(v,T,S,C,E,A,R,O,B,M,z,V,j,q,H,W,X){const Z=X._m;Z[0]=v,Z[1]=T,Z[2]=S,Z[3]=C,Z[4]=E,Z[5]=A,Z[6]=R,Z[7]=O,Z[8]=B,Z[9]=M,Z[10]=z,Z[11]=V,Z[12]=j,Z[13]=q,Z[14]=H,Z[15]=W,X._markAsUpdated()}static FromValues(v,T,S,C,E,A,R,O,B,M,z,V,j,q,H,W){const X=new Dt,Z=X._m;return Z[0]=v,Z[1]=T,Z[2]=S,Z[3]=C,Z[4]=E,Z[5]=A,Z[6]=R,Z[7]=O,Z[8]=B,Z[9]=M,Z[10]=z,Z[11]=V,Z[12]=j,Z[13]=q,Z[14]=H,Z[15]=W,X._markAsUpdated(),X}static Compose(v,T,S){const C=new Dt;return Dt.ComposeToRef(v,T,S,C),C}static ComposeToRef(v,T,S,C){Dt.ScalingToRef(v.x,v.y,v.z,Gt.MathTmp.Matrix[1]),T.toRotationMatrix(Gt.MathTmp.Matrix[0]),Gt.MathTmp.Matrix[1].multiplyToRef(Gt.MathTmp.Matrix[0],C),C.setTranslation(S)}static Identity(){const v=Dt.FromValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return v._updateIdentityStatus(!0),v}static IdentityToRef(v){Dt.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,v),v._updateIdentityStatus(!0)}static Zero(){const v=Dt.FromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return v._updateIdentityStatus(!1),v}static RotationX(v){const T=new Dt;return Dt.RotationXToRef(v,T),T}static Invert(v){const T=new Dt;return v.invertToRef(T),T}static RotationXToRef(v,T){const S=Math.sin(v),C=Math.cos(v);Dt.FromValuesToRef(1,0,0,0,0,C,S,0,0,-S,C,0,0,0,0,1,T),T._updateIdentityStatus(1===C&&0===S)}static RotationY(v){const T=new Dt;return Dt.RotationYToRef(v,T),T}static RotationYToRef(v,T){const S=Math.sin(v),C=Math.cos(v);Dt.FromValuesToRef(C,0,-S,0,0,1,0,0,S,0,C,0,0,0,0,1,T),T._updateIdentityStatus(1===C&&0===S)}static RotationZ(v){const T=new Dt;return Dt.RotationZToRef(v,T),T}static RotationZToRef(v,T){const S=Math.sin(v),C=Math.cos(v);Dt.FromValuesToRef(C,S,0,0,-S,C,0,0,0,0,1,0,0,0,0,1,T),T._updateIdentityStatus(1===C&&0===S)}static RotationAxis(v,T){const S=new Dt;return Dt.RotationAxisToRef(v,T,S),S}static RotationAxisToRef(v,T,S){const C=Math.sin(-T),E=Math.cos(-T),A=1-E;v.normalize();const R=S._m;R[0]=v.x*v.x*A+E,R[1]=v.x*v.y*A-v.z*C,R[2]=v.x*v.z*A+v.y*C,R[3]=0,R[4]=v.y*v.x*A+v.z*C,R[5]=v.y*v.y*A+E,R[6]=v.y*v.z*A-v.x*C,R[7]=0,R[8]=v.z*v.x*A-v.y*C,R[9]=v.z*v.y*A+v.x*C,R[10]=v.z*v.z*A+E,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,S._markAsUpdated()}static RotationYawPitchRoll(v,T,S){const C=new Dt;return Dt.RotationYawPitchRollToRef(v,T,S,C),C}static RotationYawPitchRollToRef(v,T,S,C){qt.Quaternion.RotationYawPitchRollToRef(v,T,S,Gt.MathTmp.Quaternion[0]),Gt.MathTmp.Quaternion[0].toRotationMatrix(C)}static Scaling(v,T,S){const C=new Dt;return Dt.ScalingToRef(v,T,S,C),C}static ScalingToRef(v,T,S,C){Dt.FromValuesToRef(v,0,0,0,0,T,0,0,0,0,S,0,0,0,0,1,C),C._updateIdentityStatus(1===v&&1===T&&1===S)}static Translation(v,T,S){const C=new Dt;return Dt.TranslationToRef(v,T,S,C),C}static TranslationToRef(v,T,S,C){Dt.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,v,T,S,1,C),C._updateIdentityStatus(0===v&&0===T&&0===S)}static Lerp(v,T,S){const C=new Dt;return Dt.LerpToRef(v,T,S,C),C}static LerpToRef(v,T,S,C){for(let E=0;E<16;E++)C._m[E]=v._m[E]*(1-S)+T._m[E]*S;C._markAsUpdated()}static DecomposeLerp(v,T,S){const C=new Dt;return Dt.DecomposeLerpToRef(v,T,S,C),C}static DecomposeLerpToRef(v,T,S,C){const E=Gt.MathTmp.Vector3[0],A=Gt.MathTmp.Quaternion[0],R=Gt.MathTmp.Vector3[1];v.decompose(E,A,R);const O=Gt.MathTmp.Vector3[2],B=Gt.MathTmp.Quaternion[1],M=Gt.MathTmp.Vector3[3];T.decompose(O,B,M);const z=Gt.MathTmp.Vector3[4];Ut.Vector3.LerpToRef(E,O,S,z);const V=Gt.MathTmp.Quaternion[2];qt.Quaternion.SlerpToRef(A,B,S,V);const j=Gt.MathTmp.Vector3[5];Ut.Vector3.LerpToRef(R,M,S,j),Dt.ComposeToRef(z,V,j,C)}static LookAtLH(v,T,S){const C=new Dt;return Dt.LookAtLHToRef(v,T,S,C),C}static LookAtLHToRef(v,T,S,C){const E=Gt.MathTmp.Vector3[0],A=Gt.MathTmp.Vector3[1],R=Gt.MathTmp.Vector3[2];T.subtractToRef(v,R),R.normalize(),Ut.Vector3.CrossToRef(S,R,E);const O=E.lengthSquared();0===O?E.x=1:E.normalizeFromLength(Math.sqrt(O)),Ut.Vector3.CrossToRef(R,E,A),A.normalize();const B=-Ut.Vector3.Dot(E,v),M=-Ut.Vector3.Dot(A,v),z=-Ut.Vector3.Dot(R,v);Dt.FromValuesToRef(E.x,A.x,R.x,0,E.y,A.y,R.y,0,E.z,A.z,R.z,0,B,M,z,1,C)}static LookAtRH(v,T,S){const C=new Dt;return Dt.LookAtRHToRef(v,T,S,C),C}static LookAtRHToRef(v,T,S,C){const E=Gt.MathTmp.Vector3[0],A=Gt.MathTmp.Vector3[1],R=Gt.MathTmp.Vector3[2];v.subtractToRef(T,R),R.normalize(),Ut.Vector3.CrossToRef(S,R,E);const O=E.lengthSquared();0===O?E.x=1:E.normalizeFromLength(Math.sqrt(O)),Ut.Vector3.CrossToRef(R,E,A),A.normalize();const B=-Ut.Vector3.Dot(E,v),M=-Ut.Vector3.Dot(A,v),z=-Ut.Vector3.Dot(R,v);Dt.FromValuesToRef(E.x,A.x,R.x,0,E.y,A.y,R.y,0,E.z,A.z,R.z,0,B,M,z,1,C)}static OrthoLH(v,T,S,C){const E=new Dt;return Dt.OrthoLHToRef(v,T,S,C,E),E}static OrthoLHToRef(v,T,S,C,E){const A=2/v,R=2/T,O=2/(C-S),B=-(C+S)/(C-S);Dt.FromValuesToRef(A,0,0,0,0,R,0,0,0,0,O,0,0,0,B,1,E),E._updateIdentityStatus(1===A&&1===R&&1===O&&0===B)}static OrthoOffCenterLH(v,T,S,C,E,A){const R=new Dt;return Dt.OrthoOffCenterLHToRef(v,T,S,C,E,A,R),R}static OrthoOffCenterLHToRef(v,T,S,C,E,A,R){const O=2/(T-v),B=2/(C-S),M=2/(A-E),z=-(A+E)/(A-E),V=(v+T)/(v-T),j=(C+S)/(S-C);Dt.FromValuesToRef(O,0,0,0,0,B,0,0,0,0,M,0,V,j,z,1,R),R._markAsUpdated()}static OrthoOffCenterRH(v,T,S,C,E,A){const R=new Dt;return Dt.OrthoOffCenterRHToRef(v,T,S,C,E,A,R),R}static OrthoOffCenterRHToRef(v,T,S,C,E,A,R){Dt.OrthoOffCenterLHToRef(v,T,S,C,E,A,R),R._m[10]*=-1}static PerspectiveLH(v,T,S,C){const E=new Dt,A=2*S/v,R=2*S/T,O=(C+S)/(C-S),B=-2*C*S/(C-S);return Dt.FromValuesToRef(A,0,0,0,0,R,0,0,0,0,O,1,0,0,B,0,E),E._updateIdentityStatus(!1),E}static PerspectiveFovLH(v,T,S,C){const E=new Dt;return Dt.PerspectiveFovLHToRef(v,T,S,C,E),E}static PerspectiveFovLHToRef(v,T,S,C,E,A=!0){const R=S,O=C,B=1/Math.tan(.5*v),M=A?B/T:B,z=A?B:B*T,V=(O+R)/(O-R),j=-2*O*R/(O-R);Dt.FromValuesToRef(M,0,0,0,0,z,0,0,0,0,V,1,0,0,j,0,E),E._updateIdentityStatus(!1)}static PerspectiveFovRH(v,T,S,C){const E=new Dt;return Dt.PerspectiveFovRHToRef(v,T,S,C,E),E}static PerspectiveFovRHToRef(v,T,S,C,E,A=!0){const R=S,O=C,B=1/Math.tan(.5*v),M=A?B/T:B,z=A?B:B*T,V=-(O+R)/(O-R),j=-2*O*R/(O-R);Dt.FromValuesToRef(M,0,0,0,0,z,0,0,0,0,V,-1,0,0,j,0,E),E._updateIdentityStatus(!1)}static PerspectiveFovWebVRToRef(v,T,S,C,E=!1){const A=E?-1:1,R=Math.tan(v.upDegrees*Math.PI/180),O=Math.tan(v.downDegrees*Math.PI/180),B=Math.tan(v.leftDegrees*Math.PI/180),M=Math.tan(v.rightDegrees*Math.PI/180),z=2/(B+M),V=2/(R+O),j=C._m;j[0]=z,j[1]=j[2]=j[3]=j[4]=0,j[5]=V,j[6]=j[7]=0,j[8]=(B-M)*z*.5,j[9]=-(R-O)*V*.5,j[10]=-S/(T-S),j[11]=1*A,j[12]=j[13]=j[15]=0,j[14]=-2*S*T/(S-T),C._markAsUpdated()}static GetAsMatrix2x2(v){return[v._m[0],v._m[1],v._m[4],v._m[5]]}static GetAsMatrix3x3(v){return[v._m[0],v._m[1],v._m[2],v._m[4],v._m[5],v._m[6],v._m[8],v._m[9],v._m[10]]}static Transpose(v){const T=new Dt;return Dt.TransposeToRef(v,T),T}static TransposeToRef(v,T){const S=T._m,C=v._m;S[0]=C[0],S[1]=C[4],S[2]=C[8],S[3]=C[12],S[4]=C[1],S[5]=C[5],S[6]=C[9],S[7]=C[13],S[8]=C[2],S[9]=C[6],S[10]=C[10],S[11]=C[14],S[12]=C[3],S[13]=C[7],S[14]=C[11],S[15]=C[15],T._updateIdentityStatus(v._isIdentity,v._isIdentityDirty)}static Reflection(v){const T=new Dt;return Dt.ReflectionToRef(v,T),T}static ReflectionToRef(v,T){v.normalize();const S=v.normal.x,C=v.normal.y,E=v.normal.z,A=-2*S,R=-2*C,O=-2*E;Dt.FromValuesToRef(A*S+1,R*S,O*S,0,A*C,R*C+1,O*C,0,A*E,R*E,O*E+1,0,A*v.d,R*v.d,O*v.d,1,T)}static FromXYZAxesToRef(v,T,S,C){Dt.FromValuesToRef(v.x,v.y,v.z,0,T.x,T.y,T.z,0,S.x,S.y,S.z,0,0,0,0,1,C)}static FromQuaternionToRef(v,T){const S=v.x*v.x,C=v.y*v.y,E=v.z*v.z,A=v.x*v.y,R=v.z*v.w,O=v.z*v.x,B=v.y*v.w,M=v.y*v.z,z=v.x*v.w;T._m[0]=1-2*(C+E),T._m[1]=2*(A+R),T._m[2]=2*(O-B),T._m[3]=0,T._m[4]=2*(A-R),T._m[5]=1-2*(E+S),T._m[6]=2*(M+z),T._m[7]=0,T._m[8]=2*(O+B),T._m[9]=2*(M-z),T._m[10]=1-2*(C+S),T._m[11]=0,T._m[12]=0,T._m[13]=0,T._m[14]=0,T._m[15]=1,T._markAsUpdated()}_markAsUpdated(){this.updateFlag=Dt._updateFlagSeed++,this._isIdentity=!1,this._isIdentity3x2=!1,this._isIdentityDirty=!0,this._isIdentity3x2Dirty=!0}isIdentity(){if(this._isIdentityDirty){this._isIdentityDirty=!1;const v=this._m;this._isIdentity=1===v[0]&&0===v[1]&&0===v[2]&&0===v[3]&&0===v[4]&&1===v[5]&&0===v[6]&&0===v[7]&&0===v[8]&&0===v[9]&&1===v[10]&&0===v[11]&&0===v[12]&&0===v[13]&&0===v[14]&&1===v[15]}return this._isIdentity}isIdentityAs3x2(){return this._isIdentity3x2Dirty&&(this._isIdentity3x2Dirty=!1,1!==this._m[0]||1!==this._m[5]||1!==this._m[15]||0!==this._m[1]||0!==this._m[2]||0!==this._m[3]||0!==this._m[4]||0!==this._m[6]||0!==this._m[7]||0!==this._m[8]||0!==this._m[9]||0!==this._m[10]||0!==this._m[11]||0!==this._m[12]||0!==this._m[13]||0!==this._m[14]?this._isIdentity3x2=!1:this._isIdentity3x2=!0),this._isIdentity3x2}determinant(){if(!0===this._isIdentity)return 1;const v=this._m,T=v[0],S=v[1],C=v[2],E=v[3],A=v[4],R=v[5],O=v[6],B=v[7],M=v[8],z=v[9],V=v[10],j=v[11],q=v[12],H=v[13],W=v[14],X=v[15],Z=V*X-W*j,Q=z*X-H*j,J=z*W-H*V,K=M*X-q*j,$=M*W-V*q,et=M*H-q*z;return T*+(R*Z-O*Q+B*J)+S*-(A*Z-O*K+B*$)+C*+(A*Q-R*K+B*et)+E*-(A*J-R*$+O*et)}toArray(){return this._m}asArray(){return this._m}invert(){return this.invertToRef(this),this}reset(){return Dt.FromValuesToRef(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,this),this._updateIdentityStatus(!1),this}add(v){const T=new Dt;return this.addToRef(v,T),T}addToRef(v,T){for(let S=0;S<16;S++)T._m[S]=this._m[S]+v._m[S];return T._markAsUpdated(),this}addToSelf(v){for(let T=0;T<16;T++)this._m[T]+=v._m[T];return this._markAsUpdated(),this}invertToRef(v){if(!0===this._isIdentity)return Dt.IdentityToRef(v),this;const T=this._m,S=T[0],C=T[1],E=T[2],A=T[3],R=T[4],O=T[5],B=T[6],M=T[7],z=T[8],V=T[9],j=T[10],q=T[11],H=T[12],W=T[13],X=T[14],Z=T[15],Q=j*Z-X*q,J=V*Z-W*q,K=V*X-W*j,$=z*Z-H*q,et=z*X-j*H,nt=z*W-H*V,ot=+(O*Q-B*J+M*K),it=-(R*Q-B*$+M*et),rt=+(R*J-O*$+M*nt),st=-(R*K-O*et+B*nt),at=S*ot+C*it+E*rt+A*st;if(0===at)return v.copyFrom(this),this;const lt=1/at,dt=B*Z-X*M,ut=O*Z-W*M,ct=O*X-W*B,ht=R*Z-H*M,pt=R*X-H*B,ft=R*W-H*O,yt=B*q-j*M,gt=O*q-V*M,vt=O*j-V*B,Tt=R*q-z*M,wt=R*j-z*B,bt=R*V-z*O,St=-(C*Q-E*J+A*K),xt=+(S*Q-E*$+A*et),Ct=-(S*J-C*$+A*nt),_t=+(S*K-C*et+E*nt),At=+(C*dt-E*ut+A*ct),Rt=-(S*dt-E*ht+A*pt),Pt=+(S*ut-C*ht+A*ft),Ot=-(S*ct-C*pt+E*ft),Ft=-(C*yt-E*gt+A*vt),It=+(S*yt-E*Tt+A*wt),Bt=-(S*gt-C*Tt+A*bt),zt=+(S*vt-C*wt+E*bt);return Dt.FromValuesToRef(ot*lt,St*lt,At*lt,Ft*lt,it*lt,xt*lt,Rt*lt,It*lt,rt*lt,Ct*lt,Pt*lt,Bt*lt,st*lt,_t*lt,Ot*lt,zt*lt,v),this}addAtIndex(v,T){return this._m[v]+=T,this._markAsUpdated(),this}multiplyAtIndex(v,T){return this._m[v]*=T,this._markAsUpdated(),this}setTranslationFromFloats(v,T,S){return this._m[12]=v,this._m[13]=T,this._m[14]=S,this._markAsUpdated(),this}setTranslation(v){return this.setTranslationFromFloats(v.x,v.y,v.z)}getTranslation(){return new Ut.Vector3(this._m[12],this._m[13],this._m[14])}getTranslationToRef(v){return v.x=this._m[12],v.y=this._m[13],v.z=this._m[14],this}removeRotationAndScaling(){const v=this.m;return Dt.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,v[12],v[13],v[14],v[15],this),this._updateIdentityStatus(0===v[12]&&0===v[13]&&0===v[14]&&1===v[15]),this}multiply(v){const T=new Dt;return this.multiplyToRef(v,T),T}copyFrom(v){v.copyToArray(this._m);const T=v;return this._updateIdentityStatus(T._isIdentity,T._isIdentityDirty,T._isIdentity3x2,T._isIdentity3x2Dirty),this}copyToArray(v,T=0){for(let S=0;S<16;S++)v[T+S]=this._m[S];return this}multiplyToRef(v,T){return this._isIdentity?(T.copyFrom(v),this):v._isIdentity?(T.copyFrom(this),this):(this.multiplyToArray(v,T._m,0),T._markAsUpdated(),this)}multiplyToArray(v,T,S){const C=this._m,E=v.m,A=C[0],R=C[1],O=C[2],B=C[3],M=C[4],z=C[5],V=C[6],j=C[7],q=C[8],H=C[9],W=C[10],X=C[11],Z=C[12],Q=C[13],J=C[14],K=C[15],$=E[0],et=E[1],nt=E[2],ot=E[3],it=E[4],rt=E[5],st=E[6],at=E[7],lt=E[8],dt=E[9],ut=E[10],ct=E[11],ht=E[12],pt=E[13],ft=E[14],yt=E[15];return T[S]=A*$+R*it+O*lt+B*ht,T[S+1]=A*et+R*rt+O*dt+B*pt,T[S+2]=A*nt+R*st+O*ut+B*ft,T[S+3]=A*ot+R*at+O*ct+B*yt,T[S+4]=M*$+z*it+V*lt+j*ht,T[S+5]=M*et+z*rt+V*dt+j*pt,T[S+6]=M*nt+z*st+V*ut+j*ft,T[S+7]=M*ot+z*at+V*ct+j*yt,T[S+8]=q*$+H*it+W*lt+X*ht,T[S+9]=q*et+H*rt+W*dt+X*pt,T[S+10]=q*nt+H*st+W*ut+X*ft,T[S+11]=q*ot+H*at+W*ct+X*yt,T[S+12]=Z*$+Q*it+J*lt+K*ht,T[S+13]=Z*et+Q*rt+J*dt+K*pt,T[S+14]=Z*nt+Q*st+J*ut+K*ft,T[S+15]=Z*ot+Q*at+J*ct+K*yt,this}equals(v){const T=v;if(!T)return!1;if((this._isIdentity||T._isIdentity)&&!this._isIdentityDirty&&!T._isIdentityDirty)return this._isIdentity&&T._isIdentity;const S=this.m,C=T.m;return S[0]===C[0]&&S[1]===C[1]&&S[2]===C[2]&&S[3]===C[3]&&S[4]===C[4]&&S[5]===C[5]&&S[6]===C[6]&&S[7]===C[7]&&S[8]===C[8]&&S[9]===C[9]&&S[10]===C[10]&&S[11]===C[11]&&S[12]===C[12]&&S[13]===C[13]&&S[14]===C[14]&&S[15]===C[15]}clone(){const v=new Dt;return v.copyFrom(this),v}getClassName(){return"Matrix"}getHashCode(){let v=this._m[0]||0;for(let T=1;T<16;T++)v=397*v^(this._m[T]||0);return v}decompose(v,T,S){if(this._isIdentity)return S&&S.setAll(0),v&&v.setAll(1),T&&T.copyFromFloats(0,0,0,1),!0;const C=this._m;S&&S.copyFromFloats(C[12],C[13],C[14]);const E=v||Gt.MathTmp.Vector3[0];if(E.x=Math.sqrt(C[0]*C[0]+C[1]*C[1]+C[2]*C[2]),E.y=Math.sqrt(C[4]*C[4]+C[5]*C[5]+C[6]*C[6]),E.z=Math.sqrt(C[8]*C[8]+C[9]*C[9]+C[10]*C[10]),this.determinant()<=0&&(E.y*=-1),0===E.x||0===E.y||0===E.z)return T&&T.copyFromFloats(0,0,0,1),!1;if(T){const v=1/E.x,S=1/E.y,A=1/E.z;Dt.FromValuesToRef(C[0]*v,C[1]*v,C[2]*v,0,C[4]*S,C[5]*S,C[6]*S,0,C[8]*A,C[9]*A,C[10]*A,0,0,0,0,1,Gt.MathTmp.Matrix[0]),qt.Quaternion.FromRotationMatrixToRef(Gt.MathTmp.Matrix[0],T)}return!0}getRow(v){if(v<0||v>3)return null;const T=4*v;return new Ht.Vector4(this._m[T+0],this._m[T+1],this._m[T+2],this._m[T+3])}setRow(v,T){return this.setRowFromFloats(v,T.x,T.y,T.z,T.w)}transpose(){return Dt.Transpose(this)}transposeToRef(v){return Dt.TransposeToRef(this,v),this}setRowFromFloats(v,T,S,C,E){if(v<0||v>3)return this;const A=4*v;return this._m[A+0]=T,this._m[A+1]=S,this._m[A+2]=C,this._m[A+3]=E,this._markAsUpdated(),this}scale(v){const T=new Dt;return this.scaleToRef(v,T),T}scaleToRef(v,T){for(let S=0;S<16;S++)T._m[S]=this._m[S]*v;return T._markAsUpdated(),this}scaleAndAddToRef(v,T){for(let S=0;S<16;S++)T._m[S]+=this._m[S]*v;return T._markAsUpdated(),this}toNormalMatrix(v){const T=Gt.MathTmp.Matrix[0];this.invertToRef(T),T.transposeToRef(v);const S=v._m;Dt.FromValuesToRef(S[0],S[1],S[2],0,S[4],S[5],S[6],0,S[8],S[9],S[10],0,0,0,0,1,v)}getRotationMatrix(){const v=new Dt;return this.getRotationMatrixToRef(v),v}getRotationMatrixToRef(v){const T=Gt.MathTmp.Vector3[0];if(!this.decompose(T))return Dt.IdentityToRef(v),this;const S=this._m,C=1/T.x,E=1/T.y,A=1/T.z;return Dt.FromValuesToRef(S[0]*C,S[1]*C,S[2]*C,0,S[4]*E,S[5]*E,S[6]*E,0,S[8]*A,S[9]*A,S[10]*A,0,0,0,0,1,v),this}toggleModelMatrixHandInPlace(){const v=this._m;v[2]*=-1,v[6]*=-1,v[8]*=-1,v[9]*=-1,v[14]*=-1,this._markAsUpdated()}toggleProjectionMatrixHandInPlace(){const v=this._m;v[8]*=-1,v[9]*=-1,v[10]*=-1,v[11]*=-1,this._markAsUpdated()}_updateIdentityStatus(v,T=!1,S=!1,C=!0){this.updateFlag=Dt._updateFlagSeed++,this._isIdentity=v,this._isIdentity3x2=v||S,this._isIdentityDirty=!this._isIdentity&&T,this._isIdentity3x2Dirty=!this._isIdentity3x2&&C}}Bt.Matrix=Dt,Dt._updateFlagSeed=0,Dt._identityReadOnly=Dt.Identity(),Object.defineProperty(It,"__esModule",{value:!0}),It.Quaternion=void 0;const Wt=Bt,Yt=Ft,Zt=Pt,Qt=Rt,Jt=Nt;class jt{constructor(v=0,T=0,S=0,C=1){this.x=v,this.y=T,this.z=S,this.w=C}static FromRotationMatrix(v){const T=new jt;return jt.FromRotationMatrixToRef(v,T),T}static FromRotationMatrixToRef(v,T){const S=v.m,C=S[0],E=S[4],A=S[8],R=S[1],O=S[5],B=S[9],M=S[2],z=S[6],V=S[10],j=C+O+V;let q;j>0?(q=.5/Math.sqrt(j+1),T.w=.25/q,T.x=(z-B)*q,T.y=(A-M)*q,T.z=(R-E)*q):C>O&&C>V?(q=2*Math.sqrt(1+C-O-V),T.w=(z-B)/q,T.x=.25*q,T.y=(E+R)/q,T.z=(A+M)/q):O>V?(q=2*Math.sqrt(1+O-C-V),T.w=(A-M)/q,T.x=(E+R)/q,T.y=.25*q,T.z=(B+z)/q):(q=2*Math.sqrt(1+V-C-O),T.w=(R-E)/q,T.x=(A+M)/q,T.y=(B+z)/q,T.z=.25*q)}static Dot(v,T){return v.x*T.x+v.y*T.y+v.z*T.z+v.w*T.w}static AreClose(v,T){return jt.Dot(v,T)>=0}static Zero(){return new jt(0,0,0,0)}static Inverse(v){return new jt(-v.x,-v.y,-v.z,v.w)}static IsIdentity(v){return v&&0===v.x&&0===v.y&&0===v.z&&1===v.w}static RotationAxis(v,T){const S=T*Qt.DEG2RAD;return jt.RotationAxisToRef(v,S,new jt)}static RotationAxisToRef(v,T,S){const C=T*Qt.DEG2RAD,E=Math.sin(C/2);return v.normalize(),S.w=Math.cos(C/2),S.x=v.x*E,S.y=v.y*E,S.z=v.z*E,S}static FromArray(v,T=0){return new jt(v[T],v[T+1],v[T+2],v[T+3])}static FromEulerAnglesRef(v,T,S,C){return jt.RotationYawPitchRollToRef(T*Qt.DEG2RAD,v*Qt.DEG2RAD,S*Qt.DEG2RAD,C)}static RotationYawPitchRoll(v,T,S){const C=new jt;return jt.RotationYawPitchRollToRef(v,T,S,C),C}static RotationYawPitchRollToRef(v,T,S,C){const E=.5*T,A=.5*v,R=.5*S,O=Math.cos(E),B=Math.cos(A),M=Math.cos(R),z=Math.sin(E),V=Math.sin(A),j=Math.sin(R);C.x=B*z*M+V*O*j,C.y=V*O*M-B*z*j,C.z=B*O*j-V*z*M,C.w=B*O*M+V*z*j}static RotationAlphaBetaGamma(v,T,S){const C=new jt;return jt.RotationAlphaBetaGammaToRef(v,T,S,C),C}static RotationAlphaBetaGammaToRef(v,T,S,C){const E=.5*(S+v),A=.5*(S-v),R=.5*T;C.x=Math.cos(A)*Math.sin(R),C.y=Math.sin(A)*Math.sin(R),C.z=Math.sin(E)*Math.cos(R),C.w=Math.cos(E)*Math.cos(R)}static RotationQuaternionFromAxis(v,T,S){const C=new jt(0,0,0,0);return jt.RotationQuaternionFromAxisToRef(v,T,S,C),C}static RotationQuaternionFromAxisToRef(v,T,S,C){const E=Zt.MathTmp.Matrix[0];Wt.Matrix.FromXYZAxesToRef(v.normalize(),T.normalize(),S.normalize(),E),jt.FromRotationMatrixToRef(E,C)}static Slerp(v,T,S){const C=jt.Identity;return jt.SlerpToRef(v,T,S,C),C}static SlerpToRef(v,T,S,C){let E,A,R=v.x*T.x+v.y*T.y+v.z*T.z+v.w*T.w,O=!1;if(R<0&&(O=!0,R=-R),R>.999999)A=1-S,E=O?-S:S;else{const v=Math.acos(R),T=1/Math.sin(v);A=Math.sin((1-S)*v)*T,E=O?-Math.sin(S*v)*T:Math.sin(S*v)*T}C.x=A*v.x+E*T.x,C.y=A*v.y+E*T.y,C.z=A*v.z+E*T.z,C.w=A*v.w+E*T.w}static Hermite(v,T,S,C,E){const A=E*E,R=E*A,O=2*R-3*A+1,B=-2*R+3*A,M=R-2*A+E,z=R-A,V=v.x*O+S.x*B+T.x*M+C.x*z,j=v.y*O+S.y*B+T.y*M+C.y*z,q=v.z*O+S.z*B+T.z*M+C.z*z,H=v.w*O+S.w*B+T.w*M+C.w*z;return new jt(V,j,q,H)}static get Identity(){return new jt(0,0,0,1)}static Angle(v,T){const S=jt.Dot(v,T);return 2*Math.acos(Math.min(Math.abs(S),1))*Qt.RAD2DEG}static Euler(v,T,S){return jt.RotationYawPitchRoll(T*Qt.DEG2RAD,v*Qt.DEG2RAD,S*Qt.DEG2RAD)}static LookRotation(v,T=Zt.MathTmp.staticUp){const S=Yt.Vector3.Normalize(v),C=Yt.Vector3.Normalize(Yt.Vector3.Cross(T,S)),E=Yt.Vector3.Cross(S,C),A=C.x,R=C.y,O=C.z,B=E.x,M=E.y,z=E.z,V=S.x,j=S.y,q=S.z,H=A+M+q,W=new jt;if(H>0){let v=Math.sqrt(H+1);return W.w=.5*v,v=.5/v,W.x=(z-j)*v,W.y=(V-O)*v,W.z=(R-B)*v,W}if(A>=M&&A>=q){const v=Math.sqrt(1+A-M-q),T=.5/v;return W.x=.5*v,W.y=(R+B)*T,W.z=(O+V)*T,W.w=(z-j)*T,W}if(M>q){const v=Math.sqrt(1+M-A-q),T=.5/v;return W.x=(B+R)*T,W.y=.5*v,W.z=(j+z)*T,W.w=(V-O)*T,W}const X=Math.sqrt(1+q-A-M),Z=.5/X;return W.x=(V+O)*Z,W.y=(j+z)*Z,W.z=.5*X,W.w=(R-B)*Z,W}static RotateTowards(v,T,S){const C=jt.Angle(v,T);if(0===C)return T;const E=Math.min(1,S/C);return jt.Slerp(v,T,E)}static FromToRotation(v,T,S=Zt.MathTmp.staticUp){const C=v.normalize(),E=T.normalize(),A=Yt.Vector3.Cross(C,E),R=Math.sqrt(C.lengthSquared()*E.lengthSquared())+Yt.Vector3.Dot(C,E);return A.lengthSquared()<1e-4?Math.abs(R)<1e-4?new jt(S.x,S.y,S.z,0).normalized:jt.Identity:new jt(A.x,A.y,A.z,R).normalized}get normalized(){return this.normalize()}setFromToRotation(v,T,S=Zt.MathTmp.staticUp){const C=jt.FromToRotation(v,T,S);this.x=C.x,this.y=C.y,this.z=C.z,this.w=C.w}set eulerAngles(v){this.setEuler(v.x,v.y,v.z)}get eulerAngles(){const v=new Yt.Vector3,T=this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w,S=this.x*this.w-this.y*this.z;return S>.4995*T?(v.x=Math.PI/2,v.y=2*Math.atan2(this.y,this.x),v.z=0):S<-.4995*T?(v.x=-Math.PI/2,v.y=-2*Math.atan2(this.y,this.x),v.z=0):(v.x=Math.asin(2*(this.w*this.x-this.y*this.z)),v.y=Math.atan2(2*this.w*this.y+2*this.z*this.x,1-2*(this.x*this.x+this.y*this.y)),v.z=Math.atan2(2*this.w*this.z+2*this.x*this.y,1-2*(this.z*this.z+this.x*this.x))),v.x*=Qt.RAD2DEG,v.y*=Qt.RAD2DEG,v.z*=Qt.RAD2DEG,v.x=Jt.Scalar.Repeat(v.x,360),v.y=Jt.Scalar.Repeat(v.y,360),v.z=Jt.Scalar.Repeat(v.z,360),v}toString(){return`(${this.x}, ${this.y}, ${this.z}, ${this.w})`}get length(){return Math.sqrt(this.lengthSquared)}get lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}getClassName(){return"Quaternion"}getHashCode(){let v=this.x||0;return v=397*v^(this.y||0),v=397*v^(this.z||0),v=397*v^(this.w||0),v}asArray(){return[this.x,this.y,this.z,this.w]}equals(v){return v&&this.x===v.x&&this.y===v.y&&this.z===v.z&&this.w===v.w}clone(){return new jt(this.x,this.y,this.z,this.w)}copyFrom(v){return this.x=v.x,this.y=v.y,this.z=v.z,this.w=v.w,this}copyFromFloats(v,T,S,C){return this.x=v,this.y=T,this.z=S,this.w=C,this}set(v,T,S,C){return this.copyFromFloats(v,T,S,C)}setEuler(v,T,S){return jt.RotationYawPitchRollToRef(T*Qt.DEG2RAD,v*Qt.DEG2RAD,S*Qt.DEG2RAD,this),this}add(v){return new jt(this.x+v.x,this.y+v.y,this.z+v.z,this.w+v.w)}addInPlace(v){return this.x+=v.x,this.y+=v.y,this.z+=v.z,this.w+=v.w,this}subtract(v){return new jt(this.x-v.x,this.y-v.y,this.z-v.z,this.w-v.w)}scale(v){return new jt(this.x*v,this.y*v,this.z*v,this.w*v)}scaleToRef(v,T){return T.x=this.x*v,T.y=this.y*v,T.z=this.z*v,T.w=this.w*v,this}scaleInPlace(v){return this.x*=v,this.y*=v,this.z*=v,this.w*=v,this}scaleAndAddToRef(v,T){return T.x+=this.x*v,T.y+=this.y*v,T.z+=this.z*v,T.w+=this.w*v,this}multiply(v){const T=new jt(0,0,0,1);return this.multiplyToRef(v,T),T}multiplyToRef(v,T){const S=this.x*v.w+this.y*v.z-this.z*v.y+this.w*v.x,C=-this.x*v.z+this.y*v.w+this.z*v.x+this.w*v.y,E=this.x*v.y-this.y*v.x+this.z*v.w+this.w*v.z,A=-this.x*v.x-this.y*v.y-this.z*v.z+this.w*v.w;return T.copyFromFloats(S,C,E,A),this}multiplyInPlace(v){return this.multiplyToRef(v,this),this}conjugateToRef(v){return v.copyFromFloats(-this.x,-this.y,-this.z,this.w),this}conjugateInPlace(){return this.x*=-1,this.y*=-1,this.z*=-1,this}conjugate(){return new jt(-this.x,-this.y,-this.z,this.w)}normalize(){const v=1/this.length;return this.x*=v,this.y*=v,this.z*=v,this.w*=v,this}angleAxis(v,T){if(0===T.lengthSquared())return jt.Identity;const S=jt.Identity;let C=v*Qt.DEG2RAD;C*=.5;let E=T.normalize();return E=T.scaleInPlace(Math.sin(C)),S.x=E.x,S.y=E.y,S.z=E.z,S.w=Math.cos(C),S.normalize()}toRotationMatrix(v){return Wt.Matrix.FromQuaternionToRef(this,v),this}fromRotationMatrix(v){return jt.FromRotationMatrixToRef(v,this),this}}It.Quaternion=jt,Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.Vector3=void 0;const Kt=Pt,$t=Rt,ee=It,ne=Nt;class Xt{constructor(v=0,T=0,S=0){this.x=v,this.y=T,this.z=S}get isNonUniform(){const v=Math.abs(this.x),T=Math.abs(this.y);if(v!==T)return!0;const S=Math.abs(this.z);return v!==S||T!==S}static Add(v,T){return new Xt(v.x,v.y,v.z).addInPlace(T)}static GetClipFactor(v,T,S,C){const E=Xt.Dot(v,S)-C;return E/(E-(Xt.Dot(T,S)-C))}static GetAngleBetweenVectors(v,T,S){const C=v.normalizeToRef(Kt.MathTmp.Vector3[1]),E=T.normalizeToRef(Kt.MathTmp.Vector3[2]),A=Xt.Dot(C,E),R=Kt.MathTmp.Vector3[3];return Xt.CrossToRef(C,E,R),Xt.Dot(R,S)>0?Math.acos(A):-Math.acos(A)}static FromArray(v,T=0){return new Xt(v[T],v[T+1],v[T+2])}static FromFloatArray(v,T){return Xt.FromArray(v,T)}static FromArrayToRef(v,T,S){S.x=v[T],S.y=v[T+1],S.z=v[T+2]}static FromFloatArrayToRef(v,T,S){return Xt.FromArrayToRef(v,T,S)}static FromFloatsToRef(v,T,S,C){C.copyFromFloats(v,T,S)}static Zero(){return new Xt(0,0,0)}static One(){return new Xt(1,1,1)}static Up(){return new Xt(0,1,0)}static Down(){return new Xt(0,-1,0)}static Forward(){return new Xt(0,0,1)}static Backward(){return new Xt(0,0,-1)}static Right(){return new Xt(1,0,0)}static Left(){return new Xt(-1,0,0)}static TransformCoordinates(v,T){const S=Xt.Zero();return Xt.TransformCoordinatesToRef(v,T,S),S}static TransformCoordinatesToRef(v,T,S){return Xt.TransformCoordinatesFromFloatsToRef(v.x,v.y,v.z,T,S)}static TransformCoordinatesFromFloatsToRef(v,T,S,C,E){const A=C.m,R=v*A[0]+T*A[4]+S*A[8]+A[12],O=v*A[1]+T*A[5]+S*A[9]+A[13],B=v*A[2]+T*A[6]+S*A[10]+A[14],M=1/(v*A[3]+T*A[7]+S*A[11]+A[15]);E.x=R*M,E.y=O*M,E.z=B*M}static TransformNormal(v,T){const S=Xt.Zero();return Xt.TransformNormalToRef(v,T,S),S}static TransformNormalToRef(v,T,S){this.TransformNormalFromFloatsToRef(v.x,v.y,v.z,T,S)}static TransformNormalFromFloatsToRef(v,T,S,C,E){const A=C.m;E.x=v*A[0]+T*A[4]+S*A[8],E.y=v*A[1]+T*A[5]+S*A[9],E.z=v*A[2]+T*A[6]+S*A[10]}static CatmullRom(v,T,S,C,E){const A=E*E,R=E*A,O=.5*(2*T.x+(-v.x+S.x)*E+(2*v.x-5*T.x+4*S.x-C.x)*A+(-v.x+3*T.x-3*S.x+C.x)*R),B=.5*(2*T.y+(-v.y+S.y)*E+(2*v.y-5*T.y+4*S.y-C.y)*A+(-v.y+3*T.y-3*S.y+C.y)*R),M=.5*(2*T.z+(-v.z+S.z)*E+(2*v.z-5*T.z+4*S.z-C.z)*A+(-v.z+3*T.z-3*S.z+C.z)*R);return new Xt(O,B,M)}static Clamp(v,T,S){const C=new Xt;return Xt.ClampToRef(v,T,S,C),C}static ClampToRef(v,T,S,C){let E=v.x;E=E>S.x?S.x:E,E=E<T.x?T.x:E;let A=v.y;A=A>S.y?S.y:A,A=A<T.y?T.y:A;let R=v.z;R=R>S.z?S.z:R,R=R<T.z?T.z:R,C.copyFromFloats(E,A,R)}static Hermite(v,T,S,C,E){const A=E*E,R=E*A,O=2*R-3*A+1,B=-2*R+3*A,M=R-2*A+E,z=R-A,V=v.x*O+S.x*B+T.x*M+C.x*z,j=v.y*O+S.y*B+T.y*M+C.y*z,q=v.z*O+S.z*B+T.z*M+C.z*z;return new Xt(V,j,q)}static Lerp(v,T,S){const C=new Xt(0,0,0);return Xt.LerpToRef(v,T,S,C),C}static LerpToRef(v,T,S,C){C.x=v.x+(T.x-v.x)*S,C.y=v.y+(T.y-v.y)*S,C.z=v.z+(T.z-v.z)*S}static Dot(v,T){return v.x*T.x+v.y*T.y+v.z*T.z}static Cross(v,T){const S=Xt.Zero();return Xt.CrossToRef(v,T,S),S}static CrossToRef(v,T,S){const C=v.y*T.z-v.z*T.y,E=v.z*T.x-v.x*T.z,A=v.x*T.y-v.y*T.x;S.copyFromFloats(C,E,A)}static Normalize(v){const T=Xt.Zero();return Xt.NormalizeToRef(v,T),T}static NormalizeToRef(v,T){v.normalizeToRef(T)}static Minimize(v,T){const S=new Xt(v.x,v.y,v.z);return S.minimizeInPlace(T),S}static Maximize(v,T){const S=new Xt(v.x,v.y,v.z);return S.maximizeInPlace(T),S}static Distance(v,T){return Math.sqrt(Xt.DistanceSquared(v,T))}static DistanceSquared(v,T){const S=v.x-T.x,C=v.y-T.y,E=v.z-T.z;return S*S+C*C+E*E}static Center(v,T){const S=Xt.Add(v,T);return S.scaleInPlace(.5),S}static RotationFromAxis(v,T,S){const C=Xt.Zero();return Xt.RotationFromAxisToRef(v,T,S,C),C}static RotationFromAxisToRef(v,T,S,C){const E=Kt.MathTmp.Quaternion[0];ee.Quaternion.RotationQuaternionFromAxisToRef(v,T,S,E),C.copyFrom(E.eulerAngles)}toString(){return`(${this.x}, ${this.y}, ${this.z})`}getClassName(){return"Vector3"}getHashCode(){let v=this.x||0;return v=397*v^(this.y||0),v=397*v^(this.z||0),v}asArray(){const v=[];return this.toArray(v,0),v}toArray(v,T=0){return v[T]=this.x,v[T+1]=this.y,v[T+2]=this.z,this}toQuaternion(){return ee.Quaternion.Identity.setEuler(this.y,this.x,this.z)}addInPlace(v){return this.addInPlaceFromFloats(v.x,v.y,v.z)}addInPlaceFromFloats(v,T,S){return this.x+=v,this.y+=T,this.z+=S,this}add(v){return new Xt(this.x+v.x,this.y+v.y,this.z+v.z)}addToRef(v,T){return T.copyFromFloats(this.x+v.x,this.y+v.y,this.z+v.z)}subtractInPlace(v){return this.x-=v.x,this.y-=v.y,this.z-=v.z,this}subtract(v){return new Xt(this.x-v.x,this.y-v.y,this.z-v.z)}subtractToRef(v,T){return this.subtractFromFloatsToRef(v.x,v.y,v.z,T)}subtractFromFloats(v,T,S){return new Xt(this.x-v,this.y-T,this.z-S)}subtractFromFloatsToRef(v,T,S,C){return C.copyFromFloats(this.x-v,this.y-T,this.z-S)}applyMatrix4(v){this.applyMatrix4ToRef(v,this)}applyMatrix4ToRef(v,T){const{x:S,y:C,z:E}=this,{m:A}=v,R=1/(A[3]*S+A[7]*C+A[11]*E+A[15]);return T.x=(A[0]*S+A[4]*C+A[8]*E+A[12])*R,T.y=(A[1]*S+A[5]*C+A[9]*E+A[13])*R,T.z=(A[2]*S+A[6]*C+A[10]*E+A[14])*R,T}rotate(v){return this.rotateToRef(v,this)}rotateToRef(v,T){const{x:S,y:C,z:E}=this,{x:A,y:R,z:O,w:B}=v,M=B*S+R*E-O*C,z=B*C+O*S-A*E,V=B*E+A*C-R*S,j=-A*S-R*C-O*E;return T.x=M*B+j*-A+z*-O-V*-R,T.y=z*B+j*-R+V*-A-M*-O,T.z=V*B+j*-O+M*-R-z*-A,T}negate(){return new Xt(-this.x,-this.y,-this.z)}scaleInPlace(v){return this.x*=v,this.y*=v,this.z*=v,this}scale(v){return new Xt(this.x*v,this.y*v,this.z*v)}scaleToRef(v,T){return T.copyFromFloats(this.x*v,this.y*v,this.z*v)}scaleAndAddToRef(v,T){return T.addInPlaceFromFloats(this.x*v,this.y*v,this.z*v)}equals(v){return v&&this.x===v.x&&this.y===v.y&&this.z===v.z}equalsWithEpsilon(v,T=$t.Epsilon){return v&&ne.Scalar.WithinEpsilon(this.x,v.x,T)&&ne.Scalar.WithinEpsilon(this.y,v.y,T)&&ne.Scalar.WithinEpsilon(this.z,v.z,T)}equalsToFloats(v,T,S){return this.x===v&&this.y===T&&this.z===S}multiplyInPlace(v){return this.x*=v.x,this.y*=v.y,this.z*=v.z,this}multiply(v){return this.multiplyByFloats(v.x,v.y,v.z)}multiplyToRef(v,T){return T.copyFromFloats(this.x*v.x,this.y*v.y,this.z*v.z)}multiplyByFloats(v,T,S){return new Xt(this.x*v,this.y*T,this.z*S)}divide(v){return new Xt(this.x/v.x,this.y/v.y,this.z/v.z)}divideToRef(v,T){return T.copyFromFloats(this.x/v.x,this.y/v.y,this.z/v.z)}divideInPlace(v){return this.divideToRef(v,this)}minimizeInPlace(v){return this.minimizeInPlaceFromFloats(v.x,v.y,v.z)}maximizeInPlace(v){return this.maximizeInPlaceFromFloats(v.x,v.y,v.z)}minimizeInPlaceFromFloats(v,T,S){return v<this.x&&(this.x=v),T<this.y&&(this.y=T),S<this.z&&(this.z=S),this}maximizeInPlaceFromFloats(v,T,S){return v>this.x&&(this.x=v),T>this.y&&(this.y=T),S>this.z&&(this.z=S),this}floor(){return new Xt(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z))}fract(){return new Xt(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z))}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z}normalize(){return this.normalizeFromLength(this.length())}normalizeFromLength(v){return 0===v||1===v?this:this.scaleInPlace(1/v)}normalizeToNew(){const v=new Xt(0,0,0);return this.normalizeToRef(v),v}normalizeToRef(v){const T=this.length();return 0===T||1===T?v.copyFromFloats(this.x,this.y,this.z):this.scaleToRef(1/T,v)}clone(){return new Xt(this.x,this.y,this.z)}copyFrom(v){return this.copyFromFloats(v.x,v.y,v.z)}copyFromFloats(v,T,S){return this.x=v,this.y=T,this.z=S,this}set(v,T,S){return this.copyFromFloats(v,T,S)}setAll(v){return this.x=this.y=this.z=v,this}}Ft.Vector3=Xt,Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.MathTmp=void 0;const oe=Ot,ie=Ft,se=It,ae=Bt;Pt.MathTmp={Vector3:(0,oe.buildArray)(6,ie.Vector3.Zero),Matrix:(0,oe.buildArray)(2,ae.Matrix.Identity),Quaternion:(0,oe.buildArray)(3,se.Quaternion.Zero),staticUp:ie.Vector3.Up(),tmpMatrix:ae.Matrix.Zero()};var le={};Object.defineProperty(le,"__esModule",{value:!0}),le.Angle=void 0;class te{constructor(v){this._radians=v,this._radians<0&&(this._radians+=2*Math.PI)}static BetweenTwoPoints(v,T){const S=T.subtract(v),C=Math.atan2(S.y,S.x);return new te(C)}static FromRadians(v){return new te(v)}static FromDegrees(v){return new te(v*Math.PI/180)}degrees(){return 180*this._radians/Math.PI}radians(){return this._radians}}le.Angle=te;var de={},ue={};Object.defineProperty(ue,"__esModule",{value:!0}),ue.Vector2=void 0;const ce=Rt,he=Nt;class re{constructor(v=0,T=0){this.x=v,this.y=T}static Zero(){return new re(0,0)}static One(){return new re(1,1)}static Add(v,T){return new re(v.x,v.y).addInPlace(T)}static FromArray(v,T=0){return new re(v[T],v[T+1])}static FromArrayToRef(v,T,S){S.x=v[T],S.y=v[T+1]}static CatmullRom(v,T,S,C,E){const A=E*E,R=E*A,O=.5*(2*T.x+(-v.x+S.x)*E+(2*v.x-5*T.x+4*S.x-C.x)*A+(-v.x+3*T.x-3*S.x+C.x)*R),B=.5*(2*T.y+(-v.y+S.y)*E+(2*v.y-5*T.y+4*S.y-C.y)*A+(-v.y+3*T.y-3*S.y+C.y)*R);return new re(O,B)}static Clamp(v,T,S){let C=v.x;C=C>S.x?S.x:C,C=C<T.x?T.x:C;let E=v.y;return E=E>S.y?S.y:E,E=E<T.y?T.y:E,new re(C,E)}static Hermite(v,T,S,C,E){const A=E*E,R=E*A,O=2*R-3*A+1,B=-2*R+3*A,M=R-2*A+E,z=R-A,V=v.x*O+S.x*B+T.x*M+C.x*z,j=v.y*O+S.y*B+T.y*M+C.y*z;return new re(V,j)}static Lerp(v,T,S){const C=v.x+(T.x-v.x)*S,E=v.y+(T.y-v.y)*S;return new re(C,E)}static Dot(v,T){return v.x*T.x+v.y*T.y}static Normalize(v){const T=new re(v.x,v.y);return T.normalize(),T}static Minimize(v,T){const S=v.x<T.x?v.x:T.x,C=v.y<T.y?v.y:T.y;return new re(S,C)}static Maximize(v,T){const S=v.x>T.x?v.x:T.x,C=v.y>T.y?v.y:T.y;return new re(S,C)}static Transform(v,T){const S=re.Zero();return re.TransformToRef(v,T,S),S}static TransformToRef(v,T,S){const C=T.m,E=v.x*C[0]+v.y*C[4]+C[12],A=v.x*C[1]+v.y*C[5]+C[13];S.x=E,S.y=A}static PointInTriangle(v,T,S,C){const E=.5*(-S.y*C.x+T.y*(-S.x+C.x)+T.x*(S.y-C.y)+S.x*C.y),A=E<0?-1:1,R=(T.y*C.x-T.x*C.y+(C.y-T.y)*v.x+(T.x-C.x)*v.y)*A,O=(T.x*S.y-T.y*S.x+(T.y-S.y)*v.x+(S.x-T.x)*v.y)*A;return R>0&&O>0&&R+O<2*E*A}static Distance(v,T){return Math.sqrt(re.DistanceSquared(v,T))}static DistanceSquared(v,T){const S=v.x-T.x,C=v.y-T.y;return S*S+C*C}static Center(v,T){const S=re.Add(v,T);return S.scaleInPlace(.5),S}static DistanceOfPointFromSegment(v,T,S){const C=re.DistanceSquared(T,S);if(0===C)return re.Distance(v,T);const E=S.subtract(T),A=Math.max(0,Math.min(1,re.Dot(v.subtract(T),E)/C)),R=T.add(E.multiplyByFloats(A,A));return re.Distance(v,R)}toString(){return"{X: "+this.x+" Y:"+this.y+"}"}getClassName(){return"Vector2"}getHashCode(){let v=this.x||0;return v=397*v^(this.y||0),v}toArray(v,T=0){return v[T]=this.x,v[T+1]=this.y,this}asArray(){const v=new Array;return this.toArray(v,0),v}copyFrom(v){return this.x=v.x,this.y=v.y,this}copyFromFloats(v,T){return this.x=v,this.y=T,this}set(v,T){return this.copyFromFloats(v,T)}add(v){return new re(this.x+v.x,this.y+v.y)}addToRef(v,T){return T.x=this.x+v.x,T.y=this.y+v.y,this}addInPlace(v){return this.x+=v.x,this.y+=v.y,this}addVector3(v){return new re(this.x+v.x,this.y+v.y)}subtract(v){return new re(this.x-v.x,this.y-v.y)}subtractToRef(v,T){return T.x=this.x-v.x,T.y=this.y-v.y,this}subtractInPlace(v){return this.x-=v.x,this.y-=v.y,this}multiplyInPlace(v){return this.x*=v.x,this.y*=v.y,this}multiply(v){return new re(this.x*v.x,this.y*v.y)}multiplyToRef(v,T){return T.x=this.x*v.x,T.y=this.y*v.y,this}multiplyByFloats(v,T){return new re(this.x*v,this.y*T)}divide(v){return new re(this.x/v.x,this.y/v.y)}divideToRef(v,T){return T.x=this.x/v.x,T.y=this.y/v.y,this}divideInPlace(v){return this.divideToRef(v,this)}negate(){return new re(-this.x,-this.y)}scaleInPlace(v){return this.x*=v,this.y*=v,this}scale(v){const T=new re(0,0);return this.scaleToRef(v,T),T}scaleToRef(v,T){return T.x=this.x*v,T.y=this.y*v,this}scaleAndAddToRef(v,T){return T.x+=this.x*v,T.y+=this.y*v,this}equals(v){return v&&this.x===v.x&&this.y===v.y}equalsWithEpsilon(v,T=ce.Epsilon){return v&&he.Scalar.WithinEpsilon(this.x,v.x,T)&&he.Scalar.WithinEpsilon(this.y,v.y,T)}floor(){return new re(Math.floor(this.x),Math.floor(this.y))}fract(){return new re(this.x-Math.floor(this.x),this.y-Math.floor(this.y))}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}lengthSquared(){return this.x*this.x+this.y*this.y}normalize(){const v=this.length();if(0===v)return this;const T=1/v;return this.x*=T,this.y*=T,this}clone(){return new re(this.x,this.y)}}ue.Vector2=re,Object.defineProperty(de,"__esModule",{value:!0}),de.Arc2=void 0;const fe=le,me=ue,ye=Rt;de.Arc2=class{constructor(v,T,S){this.startPoint=v,this.midPoint=T,this.endPoint=S;const C=Math.pow(T.x,2)+Math.pow(T.y,2),E=(Math.pow(v.x,2)+Math.pow(v.y,2)-C)/2,A=(C-Math.pow(S.x,2)-Math.pow(S.y,2))/2,R=(v.x-T.x)*(T.y-S.y)-(T.x-S.x)*(v.y-T.y);this.centerPoint=new me.Vector2((E*(T.y-S.y)-A*(v.y-T.y))/R,((v.x-T.x)*A-(T.x-S.x)*E)/R),this.radius=this.centerPoint.subtract(this.startPoint).length(),this.startAngle=fe.Angle.BetweenTwoPoints(this.centerPoint,this.startPoint);const O=this.startAngle.degrees();let B=fe.Angle.BetweenTwoPoints(this.centerPoint,this.midPoint).degrees(),M=fe.Angle.BetweenTwoPoints(this.centerPoint,this.endPoint).degrees();B-O>180&&(B-=360),B-O<-180&&(B+=360),M-B>180&&(M-=360),M-B<-180&&(M+=360),this.orientation=B-O<0?ye.Orientation.CW:ye.Orientation.CCW,this.angle=fe.Angle.FromDegrees(this.orientation===ye.Orientation.CW?O-M:M-O)}};var ve={};Object.defineProperty(ve,"__esModule",{value:!0}),ve.Axis=void 0;const Te=Ft;class pe{}ve.Axis=pe,pe.X=new Te.Vector3(1,0,0),pe.Y=new Te.Vector3(0,1,0),pe.Z=new Te.Vector3(0,0,1);var we={};Object.defineProperty(we,"__esModule",{value:!0}),we.BezierCurve=void 0,we.BezierCurve=class{static Interpolate(v,T,S,C,E){const A=1-3*C+3*T,R=3*C-6*T,O=3*T;let B=v;for(let T=0;T<5;T++){const T=B*B;B-=1/(3*A*T+2*R*B+O)*(A*(T*B)+R*T+O*B-v),B=Math.min(1,Math.max(0,B))}return 3*Math.pow(1-B,2)*B*S+3*(1-B)*Math.pow(B,2)*E+Math.pow(B,3)}};var be={},Se={};Object.defineProperty(Se,"__esModule",{value:!0}),Se.Color4=void 0;const Ce=Nt,_e=Rt;class ge{constructor(v=0,T=0,S=0,C=1){this.r=v,this.g=T,this.b=S,this.a=C}static FromHexString(v){if("#"!==v.substring(0,1)||9!==v.length)return new ge(0,0,0,0);const T=parseInt(v.substring(1,3),16),S=parseInt(v.substring(3,5),16),C=parseInt(v.substring(5,7),16),E=parseInt(v.substring(7,9),16);return ge.FromInts(T,S,C,E)}static Lerp(v,T,S){const C=new ge(0,0,0,0);return ge.LerpToRef(v,T,S,C),C}static LerpToRef(v,T,S,C){C.r=v.r+(T.r-v.r)*S,C.g=v.g+(T.g-v.g)*S,C.b=v.b+(T.b-v.b)*S,C.a=v.a+(T.a-v.a)*S}static Red(){return new ge(1,0,0,1)}static Green(){return new ge(0,1,0,1)}static Blue(){return new ge(0,0,1,1)}static Black(){return new ge(0,0,0,1)}static White(){return new ge(1,1,1,1)}static Purple(){return new ge(.5,0,.5,1)}static Magenta(){return new ge(1,0,1,1)}static Yellow(){return new ge(1,1,0,1)}static Gray(){return new ge(.5,.5,.5,1)}static Teal(){return new ge(0,1,1,1)}static Clear(){return new ge(0,0,0,0)}static FromColor3(v,T=1){return new ge(v.r,v.g,v.b,T)}static FromArray(v,T=0){return new ge(v[T],v[T+1],v[T+2],v[T+3])}static FromInts(v,T,S,C){return new ge(v/255,T/255,S/255,C/255)}static CheckColors4(v,T){if(v.length===3*T){const T=[];for(let S=0;S<v.length;S+=3){const C=S/3*4;T[C]=v[S],T[C+1]=v[S+1],T[C+2]=v[S+2],T[C+3]=1}return T}return v}addInPlace(v){return this.r+=v.r,this.g+=v.g,this.b+=v.b,this.a+=v.a,this}asArray(){const v=new Array;return this.toArray(v,0),v}toArray(v,T=0){return v[T]=this.r,v[T+1]=this.g,v[T+2]=this.b,v[T+3]=this.a,this}add(v){return new ge(this.r+v.r,this.g+v.g,this.b+v.b,this.a+v.a)}subtract(v){return new ge(this.r-v.r,this.g-v.g,this.b-v.b,this.a-v.a)}subtractToRef(v,T){return T.r=this.r-v.r,T.g=this.g-v.g,T.b=this.b-v.b,T.a=this.a-v.a,this}scale(v){return new ge(this.r*v,this.g*v,this.b*v,this.a*v)}scaleToRef(v,T){return T.r=this.r*v,T.g=this.g*v,T.b=this.b*v,T.a=this.a*v,this}scaleAndAddToRef(v,T){return T.r+=this.r*v,T.g+=this.g*v,T.b+=this.b*v,T.a+=this.a*v,this}clampToRef(v=0,T=1,S){return S.r=Ce.Scalar.Clamp(this.r,v,T),S.g=Ce.Scalar.Clamp(this.g,v,T),S.b=Ce.Scalar.Clamp(this.b,v,T),S.a=Ce.Scalar.Clamp(this.a,v,T),this}multiply(v){return new ge(this.r*v.r,this.g*v.g,this.b*v.b,this.a*v.a)}multiplyToRef(v,T){return T.r=this.r*v.r,T.g=this.g*v.g,T.b=this.b*v.b,T.a=this.a*v.a,T}toString(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+" A:"+this.a+"}"}getClassName(){return"Color4"}getHashCode(){let v=this.r||0;return v=397*v^(this.g||0),v=397*v^(this.b||0),v=397*v^(this.a||0),v}clone(){return new ge(this.r,this.g,this.b,this.a)}copyFrom(v){return this.r=v.r,this.g=v.g,this.b=v.b,this.a=v.a,this}copyFromFloats(v,T,S,C){return this.r=v,this.g=T,this.b=S,this.a=C,this}set(v,T,S,C){return this.copyFromFloats(v,T,S,C)}toHexString(){const v=255*this.r|0,T=255*this.g|0,S=255*this.b|0,C=255*this.a|0;return"#"+Ce.Scalar.ToHex(v)+Ce.Scalar.ToHex(T)+Ce.Scalar.ToHex(S)+Ce.Scalar.ToHex(C)}toLinearSpace(){const v=new ge;return this.toLinearSpaceToRef(v),v}toLinearSpaceToRef(v){return v.r=Math.pow(this.r,_e.ToLinearSpace),v.g=Math.pow(this.g,_e.ToLinearSpace),v.b=Math.pow(this.b,_e.ToLinearSpace),v.a=this.a,this}toGammaSpace(){const v=new ge;return this.toGammaSpaceToRef(v),v}toGammaSpaceToRef(v){return v.r=Math.pow(this.r,_e.ToGammaSpace),v.g=Math.pow(this.g,_e.ToGammaSpace),v.b=Math.pow(this.b,_e.ToGammaSpace),v.a=this.a,this}}Se.Color4=ge,Object.defineProperty(be,"__esModule",{value:!0}),be.Color3=void 0;const Ee=Rt,Re=Se,Pe=Nt;class xe{constructor(v=0,T=0,S=0){this.r=v,this.g=T,this.b=S}static FromHexString(v){if("#"!==v.substring(0,1)||7!==v.length)return new xe(0,0,0);const T=parseInt(v.substring(1,3),16),S=parseInt(v.substring(3,5),16),C=parseInt(v.substring(5,7),16);return xe.FromInts(T,S,C)}static FromArray(v,T=0){return new xe(v[T],v[T+1],v[T+2])}static FromInts(v,T,S){return new xe(v/255,T/255,S/255)}static Lerp(v,T,S){const C=new xe(0,0,0);return xe.LerpToRef(v,T,S,C),C}static LerpToRef(v,T,S,C){C.r=v.r+(T.r-v.r)*S,C.g=v.g+(T.g-v.g)*S,C.b=v.b+(T.b-v.b)*S}static Red(){return new xe(1,0,0)}static Green(){return new xe(0,1,0)}static Blue(){return new xe(0,0,1)}static Black(){return new xe(0,0,0)}static White(){return new xe(1,1,1)}static Purple(){return new xe(.5,0,.5)}static Magenta(){return new xe(1,0,1)}static Yellow(){return new xe(1,1,0)}static Gray(){return new xe(.5,.5,.5)}static Teal(){return new xe(0,1,1)}static Random(){return new xe(Math.random(),Math.random(),Math.random())}toString(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+"}"}getClassName(){return"Color3"}getHashCode(){let v=this.r||0;return v=397*v^(this.g||0),v=397*v^(this.b||0),v}toArray(v,T=0){return v[T]=this.r,v[T+1]=this.g,v[T+2]=this.b,this}toColor4(v=1){return new Re.Color4(this.r,this.g,this.b,v)}asArray(){const v=new Array;return this.toArray(v,0),v}toLuminance(){return.3*this.r+.59*this.g+.11*this.b}multiply(v){return new xe(this.r*v.r,this.g*v.g,this.b*v.b)}multiplyToRef(v,T){return T.r=this.r*v.r,T.g=this.g*v.g,T.b=this.b*v.b,this}equals(v){return v&&this.r===v.r&&this.g===v.g&&this.b===v.b}equalsFloats(v,T,S){return this.r===v&&this.g===T&&this.b===S}scale(v){return new xe(this.r*v,this.g*v,this.b*v)}scaleToRef(v,T){return T.r=this.r*v,T.g=this.g*v,T.b=this.b*v,this}scaleAndAddToRef(v,T){return T.r+=this.r*v,T.g+=this.g*v,T.b+=this.b*v,this}clampToRef(v=0,T=1,S){return S.r=Pe.Scalar.Clamp(this.r,v,T),S.g=Pe.Scalar.Clamp(this.g,v,T),S.b=Pe.Scalar.Clamp(this.b,v,T),this}add(v){return new xe(this.r+v.r,this.g+v.g,this.b+v.b)}addToRef(v,T){return T.r=this.r+v.r,T.g=this.g+v.g,T.b=this.b+v.b,this}subtract(v){return new xe(this.r-v.r,this.g-v.g,this.b-v.b)}subtractToRef(v,T){return T.r=this.r-v.r,T.g=this.g-v.g,T.b=this.b-v.b,this}clone(){return new xe(this.r,this.g,this.b)}copyFrom(v){return this.r=v.r,this.g=v.g,this.b=v.b,this}copyFromFloats(v,T,S){return this.r=v,this.g=T,this.b=S,this}set(v,T,S){return this.copyFromFloats(v,T,S)}toHexString(){const v=255*this.r|0,T=255*this.g|0,S=255*this.b|0;return"#"+Pe.Scalar.ToHex(v)+Pe.Scalar.ToHex(T)+Pe.Scalar.ToHex(S)}toLinearSpace(){const v=new xe;return this.toLinearSpaceToRef(v),v}toLinearSpaceToRef(v){return v.r=Math.pow(this.r,Ee.ToLinearSpace),v.g=Math.pow(this.g,Ee.ToLinearSpace),v.b=Math.pow(this.b,Ee.ToLinearSpace),this}toGammaSpace(){const v=new xe;return this.toGammaSpaceToRef(v),v}toGammaSpaceToRef(v){return v.r=Math.pow(this.r,Ee.ToGammaSpace),v.g=Math.pow(this.g,Ee.ToGammaSpace),v.b=Math.pow(this.b,Ee.ToGammaSpace),this}toJSON(){return{r:this.r,g:this.g,b:this.b}}}be.Color3=xe;var Oe={};Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.Curve3=void 0;const Fe=Ft;class Ae{constructor(v){this._length=0,this._points=v,this._length=this._computeLength(v)}static CreateQuadraticBezier(v,T,S,C){C=C>2?C:3;const E=new Array,r=(v,T,S,C)=>(1-v)*(1-v)*T+2*v*(1-v)*S+v*v*C;for(let A=0;A<=C;A++)E.push(new Fe.Vector3(r(A/C,v.x,T.x,S.x),r(A/C,v.y,T.y,S.y),r(A/C,v.z,T.z,S.z)));return new Ae(E)}static CreateCubicBezier(v,T,S,C,E){E=E>3?E:4;const A=new Array,s=(v,T,S,C,E)=>(1-v)*(1-v)*(1-v)*T+3*v*(1-v)*(1-v)*S+3*v*v*(1-v)*C+v*v*v*E;for(let R=0;R<=E;R++)A.push(new Fe.Vector3(s(R/E,v.x,T.x,S.x,C.x),s(R/E,v.y,T.y,S.y,C.y),s(R/E,v.z,T.z,S.z,C.z)));return new Ae(A)}static CreateHermiteSpline(v,T,S,C,E){const A=new Array,R=1/E;for(let O=0;O<=E;O++)A.push(Fe.Vector3.Hermite(v,T,S,C,O*R));return new Ae(A)}static CreateCatmullRomSpline(v,T,S){const C=new Array,E=1/T;let A=0;if(S){const S=v.length;for(let R=0;R<S;R++){A=0;for(let O=0;O<T;O++)C.push(Fe.Vector3.CatmullRom(v[R%S],v[(R+1)%S],v[(R+2)%S],v[(R+3)%S],A)),A+=E}C.push(C[0])}else{const S=new Array;S.push(v[0].clone()),Array.prototype.push.apply(S,v),S.push(v[v.length-1].clone());let R=0;for(R=0;R<S.length-3;R++){A=0;for(let v=0;v<T;v++)C.push(Fe.Vector3.CatmullRom(S[R],S[R+1],S[R+2],S[R+3],A)),A+=E}R--,C.push(Fe.Vector3.CatmullRom(S[R],S[R+1],S[R+2],S[R+3],A))}return new Ae(C)}getPoints(){return this._points}length(){return this._length}continue(v){const T=this._points[this._points.length-1],S=this._points.slice(),C=v.getPoints();for(let v=1;v<C.length;v++)S.push(C[v].subtract(C[0]).add(T));return new Ae(S)}_computeLength(v){let T=0;for(let S=1;S<v.length;S++)T+=v[S].subtract(v[S-1]).length();return T}}Oe.Curve3=Ae;var Ie={},Be={};Object.defineProperty(Be,"__esModule",{value:!0}),Be.Plane=void 0;const Ne=Ft,Le=Bt,Ve=Pt;class ze{constructor(v,T,S,C){this.normal=new Ne.Vector3(v,T,S),this.d=C}static FromArray(v){return new ze(v[0],v[1],v[2],v[3])}static FromPoints(v,T,S){const C=new ze(0,0,0,0);return C.copyFromPoints(v,T,S),C}static FromPositionAndNormal(v,T){const S=new ze(0,0,0,0);return T.normalize(),S.normal=T,S.d=-(T.x*v.x+T.y*v.y+T.z*v.z),S}static SignedDistanceToPlaneFromPositionAndNormal(v,T,S){const C=-(T.x*v.x+T.y*v.y+T.z*v.z);return Ne.Vector3.Dot(S,T)+C}asArray(){return[this.normal.x,this.normal.y,this.normal.z,this.d]}clone(){return new ze(this.normal.x,this.normal.y,this.normal.z,this.d)}getClassName(){return"Plane"}getHashCode(){let v=this.normal.getHashCode();return v=397*v^(this.d||0),v}normalize(){const v=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z);let T=0;return 0!==v&&(T=1/v),this.normal.x*=T,this.normal.y*=T,this.normal.z*=T,this.d*=T,this}transform(v){const T=Ve.MathTmp.Matrix[0];Le.Matrix.TransposeToRef(v,T);const S=T.m,C=this.normal.x,E=this.normal.y,A=this.normal.z,R=this.d,O=C*S[0]+E*S[1]+A*S[2]+R*S[3],B=C*S[4]+E*S[5]+A*S[6]+R*S[7],M=C*S[8]+E*S[9]+A*S[10]+R*S[11],z=C*S[12]+E*S[13]+A*S[14]+R*S[15];return new ze(O,B,M,z)}dotCoordinate(v){return this.normal.x*v.x+this.normal.y*v.y+this.normal.z*v.z+this.d}copyFromPoints(v,T,S){const C=T.x-v.x,E=T.y-v.y,A=T.z-v.z,R=S.x-v.x,O=S.y-v.y,B=S.z-v.z,M=E*B-A*O,z=A*R-C*B,V=C*O-E*R,j=Math.sqrt(M*M+z*z+V*V);let q;return q=0!==j?1/j:0,this.normal.x=M*q,this.normal.y=z*q,this.normal.z=V*q,this.d=-(this.normal.x*v.x+this.normal.y*v.y+this.normal.z*v.z),this}isFrontFacingTo(v,T){return Ne.Vector3.Dot(this.normal,v)<=T}signedDistanceTo(v){return Ne.Vector3.Dot(v,this.normal)+this.d}}Be.Plane=ze,Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.Frustum=void 0;const ke=Be;class Me{static GetPlanes(v){const T=[];for(let v=0;v<6;v++)T.push(new ke.Plane(0,0,0,0));return Me.GetPlanesToRef(v,T),T}static GetNearPlaneToRef(v,T){const S=v.m;T.normal.x=S[3]+S[2],T.normal.y=S[7]+S[6],T.normal.z=S[11]+S[10],T.d=S[15]+S[14],T.normalize()}static GetFarPlaneToRef(v,T){const S=v.m;T.normal.x=S[3]-S[2],T.normal.y=S[7]-S[6],T.normal.z=S[11]-S[10],T.d=S[15]-S[14],T.normalize()}static GetLeftPlaneToRef(v,T){const S=v.m;T.normal.x=S[3]+S[0],T.normal.y=S[7]+S[4],T.normal.z=S[11]+S[8],T.d=S[15]+S[12],T.normalize()}static GetRightPlaneToRef(v,T){const S=v.m;T.normal.x=S[3]-S[0],T.normal.y=S[7]-S[4],T.normal.z=S[11]-S[8],T.d=S[15]-S[12],T.normalize()}static GetTopPlaneToRef(v,T){const S=v.m;T.normal.x=S[3]-S[1],T.normal.y=S[7]-S[5],T.normal.z=S[11]-S[9],T.d=S[15]-S[13],T.normalize()}static GetBottomPlaneToRef(v,T){const S=v.m;T.normal.x=S[3]+S[1],T.normal.y=S[7]+S[5],T.normal.z=S[11]+S[9],T.d=S[15]+S[13],T.normalize()}static GetPlanesToRef(v,T){Me.GetNearPlaneToRef(v,T[0]),Me.GetFarPlaneToRef(v,T[1]),Me.GetLeftPlaneToRef(v,T[2]),Me.GetRightPlaneToRef(v,T[3]),Me.GetTopPlaneToRef(v,T[4]),Me.GetBottomPlaneToRef(v,T[5])}}Ie.Frustum=Me;var Ue={};Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.Path2=void 0;const qe=ue,Ge=de,He=Rt;class De{constructor(v,T){this.closed=!1,this._points=new Array,this._length=0,this._points.push(new qe.Vector2(v,T))}static StartingAt(v,T){return new De(v,T)}addLineTo(v,T){if(this.closed)return this;const S=new qe.Vector2(v,T),C=this._points[this._points.length-1];return this._points.push(S),this._length+=S.subtract(C).length(),this}addArcTo(v,T,S,C,E=36){if(this.closed)return this;const A=this._points[this._points.length-1],R=new qe.Vector2(v,T),O=new qe.Vector2(S,C),B=new Ge.Arc2(A,R,O);let M=B.angle.radians()/E;B.orientation===He.Orientation.CW&&(M*=-1);let z=B.startAngle.radians()+M;for(let v=0;v<E;v++){const v=Math.cos(z)*B.radius+B.centerPoint.x,T=Math.sin(z)*B.radius+B.centerPoint.y;this.addLineTo(v,T),z+=M}return this}close(){return this.closed=!0,this}length(){let v=this._length;if(!this.closed){const T=this._points[this._points.length-1];v+=this._points[0].subtract(T).length()}return v}getPoints(){return this._points}getPointAtLengthPosition(v){if(v<0||v>1)return qe.Vector2.Zero();const T=v*this.length();let S=0;for(let v=0;v<this._points.length;v++){const C=(v+1)%this._points.length,E=this._points[v],A=this._points[C].subtract(E),R=A.length()+S;if(T>=S&&T<=R){const v=A.normalize(),C=T-S;return new qe.Vector2(E.x+v.x*C,E.y+v.y*C)}S=R}return qe.Vector2.Zero()}}Ue.Path2=De;var We={};Object.defineProperty(We,"__esModule",{value:!0}),We.Path3D=void 0;const Xe=Ft,Ye=Rt,Ze=Nt;We.Path3D=class{constructor(v,T=null,S){this.path=v,this._curve=new Array,this._distances=new Array,this._tangents=new Array,this._normals=new Array,this._binormals=new Array;for(let T=0;T<v.length;T++)this._curve[T]=v[T].clone();this._raw=S||!1,this._compute(T)}getCurve(){return this._curve}getTangents(){return this._tangents}getNormals(){return this._normals}getBinormals(){return this._binormals}getDistances(){return this._distances}update(v,T=null){for(let T=0;T<v.length;T++)this._curve[T].x=v[T].x,this._curve[T].y=v[T].y,this._curve[T].z=v[T].z;return this._compute(T),this}_compute(v){const T=this._curve.length;this._tangents[0]=this._getFirstNonNullVector(0),this._raw||this._tangents[0].normalize(),this._tangents[T-1]=this._curve[T-1].subtract(this._curve[T-2]),this._raw||this._tangents[T-1].normalize();const S=this._tangents[0],C=this._normalVector(this._curve[0],S,v);let E,A,R,O;this._normals[0]=C,this._raw||this._normals[0].normalize(),this._binormals[0]=Xe.Vector3.Cross(S,this._normals[0]),this._raw||this._binormals[0].normalize(),this._distances[0]=0;for(let v=1;v<T;v++)E=this._getLastNonNullVector(v),v<T-1&&(A=this._getFirstNonNullVector(v),this._tangents[v]=E.add(A),this._tangents[v].normalize()),this._distances[v]=this._distances[v-1]+E.length(),R=this._tangents[v],O=this._binormals[v-1],this._normals[v]=Xe.Vector3.Cross(O,R),this._raw||this._normals[v].normalize(),this._binormals[v]=Xe.Vector3.Cross(R,this._normals[v]),this._raw||this._binormals[v].normalize()}_getFirstNonNullVector(v){let T=1,S=this._curve[v+T].subtract(this._curve[v]);for(;0===S.length()&&v+T+1<this._curve.length;)T++,S=this._curve[v+T].subtract(this._curve[v]);return S}_getLastNonNullVector(v){let T=1,S=this._curve[v].subtract(this._curve[v-T]);for(;0===S.length()&&v>T+1;)T++,S=this._curve[v].subtract(this._curve[v-T]);return S}_normalVector(v,T,S){let C,E=T.length();if(0===E&&(E=1),null==S){let v;v=Ze.Scalar.WithinEpsilon(Math.abs(T.y)/E,1,Ye.Epsilon)?Ze.Scalar.WithinEpsilon(Math.abs(T.x)/E,1,Ye.Epsilon)?Ze.Scalar.WithinEpsilon(Math.abs(T.z)/E,1,Ye.Epsilon)?Xe.Vector3.Zero():new Xe.Vector3(0,0,1):new Xe.Vector3(1,0,0):new Xe.Vector3(0,-1,0),C=Xe.Vector3.Cross(T,v)}else C=Xe.Vector3.Cross(T,S),Xe.Vector3.CrossToRef(C,T,C);return C.normalize(),C}};var Qe={};Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.Size=void 0;class je{constructor(v,T){this.width=v,this.height=T}get surface(){return this.width*this.height}static Zero(){return new je(0,0)}static Lerp(v,T,S){const C=v.width+(T.width-v.width)*S,E=v.height+(T.height-v.height)*S;return new je(C,E)}toString(){return`{W: ${this.width}, H: ${this.height}}`}getClassName(){return"Size"}getHashCode(){let v=this.width||0;return v=397*v^(this.height||0),v}copyFrom(v){this.width=v.width,this.height=v.height}copyFromFloats(v,T){return this.width=v,this.height=T,this}set(v,T){return this.copyFromFloats(v,T)}multiplyByFloats(v,T){return new je(this.width*v,this.height*T)}clone(){return new je(this.width,this.height)}equals(v){return!!v&&this.width===v.width&&this.height===v.height}add(v){return new je(this.width+v.width,this.height+v.height)}subtract(v){return new je(this.width-v.width,this.height-v.height)}}Qe.Size=je,function(v){var T=_t&&_t.__createBinding||(Object.create?function(v,T,S,C){void 0===C&&(C=S),Object.defineProperty(v,C,{enumerable:!0,get:function(){return T[S]}})}:function(v,T,S,C){void 0===C&&(C=S),v[C]=T[S]}),S=_t&&_t.__exportStar||function(v,S){for(var C in v)"default"===C||Object.prototype.hasOwnProperty.call(S,C)||T(S,v,C)};Object.defineProperty(v,"__esModule",{value:!0}),S(Rt,v),S(Pt,v),S(le,v),S(de,v),S(ve,v),S(we,v),S(be,v),S(Se,v),S(Oe,v),S(Ie,v),S(Bt,v),S(Ue,v),S(We,v),S(Be,v),S(It,v),S(Nt,v),S(Qe,v),S(ue,v),S(Ft,v),S(zt,v),S(At,v)}(At);var Je,$e,tn,nn,on={looping:!0,speed:1,weight:1,layer:0},rn=function(v){function e(T,S){void 0===S&&(S=on);var C=v.call(this)||this;return C.isAnimationClip=!0,C.looping=on.looping,C.weight=on.weight,C.playing=!1,C.shouldReset=!1,C.speed=on.speed,C.name=f("AnimClip"),C.layer=on.layer,C.clip=T,C.setParams(o({},S)),C}return i(e,v),e.prototype.setParams=function(v){return this.looping=void 0!==v.looping?v.looping:this.looping,this.speed=v.speed||this.speed,this.weight=v.weight||this.weight,this.layer=v.layer||this.layer,this},e.prototype.toJSON=function(){var T=JSON.parse(JSON.stringify(v.prototype.toJSON.call(this)));return this.shouldReset&&(this.shouldReset=!1),T},e.prototype.play=function(v){var T;void 0===v&&(v=!1),null===(T=this.owner)||void 0===T||T.play(this,v)},e.prototype.pause=function(){var v;null===(v=this.owner)||void 0===v||v.pause(this)},e.prototype.reset=function(){this.shouldReset=!0},e.prototype.stop=function(){var v;null===(v=this.owner)||void 0===v||v.stop(this)},r([X.readonly,s("design:type",String)],e.prototype,"clip",void 0),r([X.field,s("design:type",Boolean)],e.prototype,"looping",void 0),r([X.field,s("design:type",Number)],e.prototype,"weight",void 0),r([X.field,s("design:type",Boolean)],e.prototype,"playing",void 0),r([X.field,s("design:type",Boolean)],e.prototype,"shouldReset",void 0),r([X.field,s("design:type",Number)],e.prototype,"speed",void 0),r([X.readonly,s("design:type",String)],e.prototype,"name",void 0),e}(X);v.InputEventType=void 0,(Je=v.InputEventType||(v.InputEventType={}))[Je.DOWN=0]="DOWN",Je[Je.UP=1]="UP",v.CameraMode=void 0,($e=v.CameraMode||(v.CameraMode={}))[$e.FirstPerson=0]="FirstPerson",$e[$e.ThirdPerson=1]="ThirdPerson",$e[$e.BuildingToolGodMode=2]="BuildingToolGodMode",v.LandRole=void 0,(tn=v.LandRole||(v.LandRole={})).OWNER="owner",tn.OPERATOR="operator",v.ActionButton=void 0,(nn=v.ActionButton||(v.ActionButton={})).POINTER="POINTER",nn.PRIMARY="PRIMARY",nn.SECONDARY="SECONDARY",nn.ANY="ANY",nn.FORWARD="FORWARD",nn.BACKWARD="BACKWARD",nn.RIGHT="RIGHT",nn.LEFT="LEFT",nn.JUMP="JUMP",nn.WALK="WALK",nn.ACTION_3="ACTION_3",nn.ACTION_4="ACTION_4",nn.ACTION_5="ACTION_5",nn.ACTION_6="ACTION_6";var sn,an,Ke=function(v){if(this.callback=v,!v||!("apply"in v)||!("call"in v))throw new Error("Callback is not a function");un.ensureInstance()},ln=function(v){function e(){return null!==v&&v.apply(this,arguments)||this}return i(e,v),r([P("pointerDown")],e)}(Ke),dn=function(v){function e(){return null!==v&&v.apply(this,arguments)||this}return i(e,v),r([P("pointerUp")],e)}(Ke),en=function(v,T){this.fn=v,this.useRaycast=T},un=function(){function e(){this.buttonIdMapping=[v.ActionButton.POINTER,v.ActionButton.PRIMARY,v.ActionButton.SECONDARY,v.ActionButton.ANY,v.ActionButton.FORWARD,v.ActionButton.BACKWARD,v.ActionButton.RIGHT,v.ActionButton.LEFT,v.ActionButton.JUMP,v.ActionButton.WALK,v.ActionButton.ACTION_3,v.ActionButton.ACTION_4,v.ActionButton.ACTION_5,v.ActionButton.ACTION_6],this.subscriptions=this.buttonIdMapping.reduce((function(v,T){var S;return o(o({},v),((S={})[T]={BUTTON_DOWN:[],BUTTON_UP:[]},S))}),{}),this.internalState=this.buttonIdMapping.reduce((function(v,T){var S;return o(o({},v),((S={})[T]={BUTTON_DOWN:!1},S))}),{})}return Object.defineProperty(e,"instance",{get:function(){return e.ensureInstance(),e._instance},enumerable:!1,configurable:!0}),e.ensureInstance=function(){e._instance||(e._instance=new e)},e.prototype.isButtonPressed=function(v){return this.internalState[v]},e.prototype.subscribe=function(v,T,S,C){var E=this;return this.subscriptions[T][v].push(new en(C,S)),function(){E.unsubscribe(v,T,C)}},e.prototype.unsubscribe=function(v,T,S){var C=this.getSubscriptionId(v,T,S);return C>-1&&this.subscriptions[T][v].splice(C,1)},e.prototype.handlePointerEvent=function(T){var S=this.getPointerById(T.buttonId);if(S){var C=o(o({},T),{button:S,direction:(new At.Vector3).copyFrom(T.direction),origin:(new At.Vector3).copyFrom(T.origin),hit:void 0}),E=T.hit?o(o({},T.hit),{hitPoint:(new At.Vector3).copyFrom(T.hit.hitPoint),normal:(new At.Vector3).copyFrom(T.hit.normal),worldNormal:(new At.Vector3).copyFrom(T.hit.worldNormal)}):void 0;if(T.type===v.InputEventType.DOWN){this.internalState[S].BUTTON_DOWN=!0;for(var A=0;A<this.subscriptions[S].BUTTON_DOWN.length;A++)(R=this.subscriptions[S].BUTTON_DOWN[A]).useRaycast?C.hit=E:C.hit=void 0,R.fn(C);E&&E.entityId&&N.engine&&(B=(O=N.engine.entities[E.entityId])&&O.getComponentOrNull(ln))&&(C.hit=E,B.callback(C))}else{for(this.internalState[S].BUTTON_DOWN=!1,A=0;A<this.subscriptions[S].BUTTON_UP.length;A++){var R;(R=this.subscriptions[S].BUTTON_UP[A]).useRaycast?C.hit=E:C.hit=void 0,R.fn(C)}var O,B;E&&E.entityId&&N.engine&&(B=(O=N.engine.entities[E.entityId])&&O.getComponentOrNull(dn))&&(C.hit=E,B.callback(C))}}},e.prototype.getSubscriptionId=function(v,T,S){for(var C=0;C<this.subscriptions[T][v].length;C++)if(this.subscriptions[T][v][C].fn===S)return C;return-1},e.prototype.getPointerById=function(T){if(T<0||T>=this.buttonIdMapping.length)return null;var S=this.buttonIdMapping[T];return S===v.ActionButton.ANY?null:S},e}();v.CLASS_ID=void 0,(sn=v.CLASS_ID||(v.CLASS_ID={}))[sn.TRANSFORM=1]="TRANSFORM",sn[sn.UUID_CALLBACK=8]="UUID_CALLBACK",sn[sn.BOX_SHAPE=16]="BOX_SHAPE",sn[sn.SPHERE_SHAPE=17]="SPHERE_SHAPE",sn[sn.PLANE_SHAPE=18]="PLANE_SHAPE",sn[sn.CONE_SHAPE=19]="CONE_SHAPE",sn[sn.CYLINDER_SHAPE=20]="CYLINDER_SHAPE",sn[sn.TEXT_SHAPE=21]="TEXT_SHAPE",sn[sn.NFT_SHAPE=22]="NFT_SHAPE",sn[sn.UI_WORLD_SPACE_SHAPE=23]="UI_WORLD_SPACE_SHAPE",sn[sn.UI_SCREEN_SPACE_SHAPE=24]="UI_SCREEN_SPACE_SHAPE",sn[sn.UI_CONTAINER_RECT=25]="UI_CONTAINER_RECT",sn[sn.UI_CONTAINER_STACK=26]="UI_CONTAINER_STACK",sn[sn.UI_TEXT_SHAPE=27]="UI_TEXT_SHAPE",sn[sn.UI_INPUT_TEXT_SHAPE=28]="UI_INPUT_TEXT_SHAPE",sn[sn.UI_IMAGE_SHAPE=29]="UI_IMAGE_SHAPE",sn[sn.UI_SLIDER_SHAPE=30]="UI_SLIDER_SHAPE",sn[sn.CIRCLE_SHAPE=31]="CIRCLE_SHAPE",sn[sn.BILLBOARD=32]="BILLBOARD",sn[sn.ANIMATION=33]="ANIMATION",sn[sn.FONT=34]="FONT",sn[sn.UI_FULLSCREEN_SHAPE=40]="UI_FULLSCREEN_SHAPE",sn[sn.UI_BUTTON_SHAPE=41]="UI_BUTTON_SHAPE",sn[sn.GLTF_SHAPE=54]="GLTF_SHAPE",sn[sn.OBJ_SHAPE=55]="OBJ_SHAPE",sn[sn.AVATAR_SHAPE=56]="AVATAR_SHAPE",sn[sn.BASIC_MATERIAL=64]="BASIC_MATERIAL",sn[sn.PBR_MATERIAL=65]="PBR_MATERIAL",sn[sn.HIGHLIGHT_ENTITY=66]="HIGHLIGHT_ENTITY",sn[sn.SOUND=67]="SOUND",sn[sn.TEXTURE=68]="TEXTURE",sn[sn.VIDEO_CLIP=70]="VIDEO_CLIP",sn[sn.VIDEO_TEXTURE=71]="VIDEO_TEXTURE",sn[sn.AVATAR_TEXTURE=72]="AVATAR_TEXTURE",sn[sn.AUDIO_CLIP=200]="AUDIO_CLIP",sn[sn.AUDIO_SOURCE=201]="AUDIO_SOURCE",sn[sn.AUDIO_STREAM=202]="AUDIO_STREAM",sn[sn.GIZMOS=203]="GIZMOS",sn[sn.SMART_ITEM=204]="SMART_ITEM",sn[sn.AVATAR_MODIFIER_AREA=205]="AVATAR_MODIFIER_AREA",sn[sn.AVATAR_ATTACH=206]="AVATAR_ATTACH",sn[sn.CAMERA_MODE_AREA=207]="CAMERA_MODE_AREA",sn[sn.NAME=300]="NAME",sn[sn.LOCKED_ON_EDIT=301]="LOCKED_ON_EDIT",sn[sn.VISIBLE_ON_EDIT=302]="VISIBLE_ON_EDIT",v.AvatarModifiers=void 0,(an=v.AvatarModifiers||(v.AvatarModifiers={})).HIDE_AVATARS="HIDE_AVATARS",an.DISABLE_PASSPORTS="DISABLE_PASSPORTS";var cn,hn=function(T){function n(v){var S=T.call(this)||this;return S.area=v.area,S.modifiers=v.modifiers,S.excludeIds=v.excludeIds,S}return i(n,T),r([X.field,s("design:type",Object)],n.prototype,"area",void 0),r([X.field,s("design:type",Array)],n.prototype,"modifiers",void 0),r([X.field,s("design:type",Array)],n.prototype,"excludeIds",void 0),r([P("engine.avatarModifierArea",v.CLASS_ID.AVATAR_MODIFIER_AREA),s("design:paramtypes",[Object])],n)}(X),pn=function(T){function n(v){void 0===v&&(v={});var S=T.call(this)||this;return S.position=v.position||At.Vector3.Zero(),S.rotation=v.rotation||At.Quaternion.Identity,S.scale=v.scale||new At.Vector3(1,1,1),S}return i(n,T),Object.defineProperty(n.prototype,"eulerAngles",{get:function(){return this.rotation.eulerAngles},enumerable:!1,configurable:!0}),n.prototype.lookAt=function(v,T){void 0===T&&(T=At.MathTmp.staticUp);var S=new At.Matrix;return At.Matrix.LookAtLHToRef(this.position,v,T,S),S.invert(),At.Quaternion.FromRotationMatrixToRef(S,this.rotation),this},n.prototype.rotate=function(v,T){return this.rotation.multiplyInPlace(this.rotation.angleAxis(T,v)),this},n.prototype.translate=function(v){return this.position.addInPlace(v),this},r([X.field,s("design:type",At.Vector3)],n.prototype,"position",void 0),r([X.field,s("design:type",At.Quaternion)],n.prototype,"rotation",void 0),r([X.field,s("design:type",At.Vector3)],n.prototype,"scale",void 0),r([P("engine.transform",v.CLASS_ID.TRANSFORM),s("design:paramtypes",[Object])],n)}(X);v.AttachToAvatarAnchorPointId=void 0,(cn=v.AttachToAvatarAnchorPointId||(v.AttachToAvatarAnchorPointId={}))[cn.Position=0]="Position",cn[cn.NameTag=1]="NameTag",cn[cn.LeftHand=2]="LeftHand",cn[cn.RightHand=3]="RightHand";var fn,mn=function(T){function n(S){void 0===S&&(S={});var C=T.call(this)||this;return C.avatarId=S.avatarId||"",C.anchorPointId=S.anchorPointId||v.AttachToAvatarAnchorPointId.Position,C}return i(n,T),r([X.field,s("design:type",String)],n.prototype,"avatarId",void 0),r([X.field,s("design:type",Number)],n.prototype,"anchorPointId",void 0),r([X.field,s("design:type",String)],n.prototype,"avatarSceneId",void 0),r([P("engine.transform",v.CLASS_ID.AVATAR_ATTACH),s("design:paramtypes",[Object])],n)}(X),yn=function(T){function n(v,S,C){void 0===v&&(v=!0),void 0===S&&(S=!0),void 0===C&&(C=!0);var E=T.call(this)||this;return E.x=!0,E.y=!0,E.z=!0,E.x=v,E.y=S,E.z=C,E}return i(n,T),r([X.field,s("design:type",Boolean)],n.prototype,"x",void 0),r([X.field,s("design:type",Boolean)],n.prototype,"y",void 0),r([X.field,s("design:type",Boolean)],n.prototype,"z",void 0),r([P("engine.billboard",v.CLASS_ID.BILLBOARD),s("design:paramtypes",[Boolean,Boolean,Boolean])],n)}(X),gn=function(v){function e(){var T=null!==v&&v.apply(this,arguments)||this;return T.withCollisions=!0,T.isPointerBlocker=!0,T.visible=!0,T}return i(e,v),r([X.field,s("design:type",Boolean)],e.prototype,"withCollisions",void 0),r([X.field,s("design:type",Boolean)],e.prototype,"isPointerBlocker",void 0),r([X.field,s("design:type",Boolean)],e.prototype,"visible",void 0),e}(X),vn=function(T){function n(){return null!==T&&T.apply(this,arguments)||this}return i(n,T),r([X.field,s("design:type",Array)],n.prototype,"uvs",void 0),r([N("engine.shape",v.CLASS_ID.BOX_SHAPE)],n)}(gn),Tn=function(T){function n(){return null!==T&&T.apply(this,arguments)||this}return i(n,T),r([N("engine.shape",v.CLASS_ID.SPHERE_SHAPE)],n)}(gn),wn=function(T){function n(){return null!==T&&T.apply(this,arguments)||this}return i(n,T),r([X.field,s("design:type",Number)],n.prototype,"segments",void 0),r([X.field,s("design:type",Number)],n.prototype,"arc",void 0),r([N("engine.shape",v.CLASS_ID.CIRCLE_SHAPE)],n)}(gn),bn=function(T){function n(){var v=null!==T&&T.apply(this,arguments)||this;return v.width=1,v.height=1,v}return i(n,T),r([X.field,s("design:type",Number)],n.prototype,"width",void 0),r([X.field,s("design:type",Number)],n.prototype,"height",void 0),r([X.field,s("design:type",Array)],n.prototype,"uvs",void 0),r([N("engine.shape",v.CLASS_ID.PLANE_SHAPE)],n)}(gn),Sn=function(T){function n(){var v=null!==T&&T.apply(this,arguments)||this;return v.radiusTop=0,v.radiusBottom=1,v.segmentsHeight=1,v.segmentsRadial=36,v.openEnded=!1,v.radius=null,v.arc=360,v}return i(n,T),r([X.field,s("design:type",Number)],n.prototype,"radiusTop",void 0),r([X.field,s("design:type",Number)],n.prototype,"radiusBottom",void 0),r([X.field,s("design:type",Number)],n.prototype,"segmentsHeight",void 0),r([X.field,s("design:type",Number)],n.prototype,"segmentsRadial",void 0),r([X.field,s("design:type",Boolean)],n.prototype,"openEnded",void 0),r([X.field,s("design:type",Object)],n.prototype,"radius",void 0),r([X.field,s("design:type",Number)],n.prototype,"arc",void 0),r([N("engine.shape",v.CLASS_ID.CONE_SHAPE)],n)}(gn),xn=function(T){function n(){var v=null!==T&&T.apply(this,arguments)||this;return v.radiusTop=1,v.radiusBottom=1,v.segmentsHeight=1,v.segmentsRadial=36,v.openEnded=!1,v.radius=null,v.arc=360,v}return i(n,T),r([X.field,s("design:type",Number)],n.prototype,"radiusTop",void 0),r([X.field,s("design:type",Number)],n.prototype,"radiusBottom",void 0),r([X.field,s("design:type",Number)],n.prototype,"segmentsHeight",void 0),r([X.field,s("design:type",Number)],n.prototype,"segmentsRadial",void 0),r([X.field,s("design:type",Boolean)],n.prototype,"openEnded",void 0),r([X.field,s("design:type",Object)],n.prototype,"radius",void 0),r([X.field,s("design:type",Number)],n.prototype,"arc",void 0),r([N("engine.shape",v.CLASS_ID.CYLINDER_SHAPE)],n)}(gn),Cn=function(T){function n(v){var S=T.call(this)||this;return S.src=v,S}return i(n,T),r([gn.readonly,s("design:type",String)],n.prototype,"src",void 0),r([N("engine.shape",v.CLASS_ID.GLTF_SHAPE),s("design:paramtypes",[String])],n)}(gn);v.PictureFrameStyle=void 0,(fn=v.PictureFrameStyle||(v.PictureFrameStyle={}))[fn.Classic=0]="Classic",fn[fn.Baroque_Ornament=1]="Baroque_Ornament",fn[fn.Diamond_Ornament=2]="Diamond_Ornament",fn[fn.Minimal_Wide=3]="Minimal_Wide",fn[fn.Minimal_Grey=4]="Minimal_Grey",fn[fn.Blocky=5]="Blocky",fn[fn.Gold_Edges=6]="Gold_Edges",fn[fn.Gold_Carved=7]="Gold_Carved",fn[fn.Gold_Wide=8]="Gold_Wide",fn[fn.Gold_Rounded=9]="Gold_Rounded",fn[fn.Metal_Medium=10]="Metal_Medium",fn[fn.Metal_Wide=11]="Metal_Wide",fn[fn.Metal_Slim=12]="Metal_Slim",fn[fn.Metal_Rounded=13]="Metal_Rounded",fn[fn.Pins=14]="Pins",fn[fn.Minimal_Black=15]="Minimal_Black",fn[fn.Minimal_White=16]="Minimal_White",fn[fn.Tape=17]="Tape",fn[fn.Wood_Slim=18]="Wood_Slim",fn[fn.Wood_Wide=19]="Wood_Wide",fn[fn.Wood_Twigs=20]="Wood_Twigs",fn[fn.Canvas=21]="Canvas",fn[fn.None=22]="None";var _n,En=function(T){function n(S,C){void 0===C&&(C={});var E=T.call(this)||this;E.src=S;var A=new At.Color3(.6404918,.611472,.8584906),R=v.PictureFrameStyle.Classic;return"r"in C?A=C:null!==C&&(C.color&&(A=C.color),C.style&&(R=C.style)),E.color=A,E.style=R,E}return i(n,T),r([gn.readonly,s("design:type",String)],n.prototype,"src",void 0),r([gn.readonly,s("design:type",Number)],n.prototype,"style",void 0),r([X.field,s("design:type",At.Color3)],n.prototype,"color",void 0),r([N("engine.shape",v.CLASS_ID.NFT_SHAPE),s("design:paramtypes",[String,Object])],n)}(gn),An=function(T){function n(v,S){var C=T.call(this)||this,E=new RegExp("data:[a-z-]+/[a-z-]+;base64");if((v.length>2048||E.test(v))&&u("⚠️🚨 Base64 textures will be deprecated in version 7 of decentraland-ecs"),C.src=v,S)for(var A in S)C[A]=S[A];return C}return i(n,T),r([X.readonly,s("design:type",String)],n.prototype,"src",void 0),r([X.readonly,s("design:type",Number)],n.prototype,"samplingMode",void 0),r([X.readonly,s("design:type",Number)],n.prototype,"wrap",void 0),r([X.readonly,s("design:type",Boolean)],n.prototype,"hasAlpha",void 0),r([N("engine.texture",v.CLASS_ID.TEXTURE),s("design:paramtypes",[String,Object])],n)}(X),Rn=function(T){function n(){var v=null!==T&&T.apply(this,arguments)||this;return v.states=[],v}return i(n,T),n.prototype.addClip=function(v){var T=this;return this.states.push(v),v.onChange((function(){T.dirty=!0})),v.owner=this,this},n.prototype.getClip=function(v){for(var T=0;T<this.states.length;T++){var S=this.states[T];if(S.clip===v)return S}var C=new rn(v);return this.addClip(C),C},n.prototype.stop=function(v){if(v)v.playing=!1,v.shouldReset=!0;else for(var T=0;T<this.states.length;T++){var S=this.states[T];this.stop(S)}},n.prototype.play=function(v,T){void 0===T&&(T=!1);for(var S=0;S<this.states.length;S++){var C=this.states[S];C.layer===v.layer&&v!==C&&this.pause(C)}T&&(v.shouldReset=!0),v.playing=!0,v.dirty=!0,v.data.nonce=Math.random()},n.prototype.pause=function(v){if(v)v.playing=!1;else for(var T=0;T<this.states.length;T++){var S=this.states[T];this.pause(S)}},r([X.readonly,s("design:type",Array)],n.prototype,"states",void 0),r([P("engine.animator",v.CLASS_ID.ANIMATION)],n)}(gn),Pn=function(T){function n(v){var S=T.call(this)||this;return S.src=v,S}return i(n,T),r([X.readonly,s("design:type",String)],n.prototype,"src",void 0),r([N("engine.shape",v.CLASS_ID.OBJ_SHAPE),s("design:paramtypes",[String])],n)}(gn),On=function(T){function n(v){void 0===v&&(v="");var S=T.call(this)||this;return S.src=v,S}return i(n,T),r([X.readonly,s("design:type",String)],n.prototype,"src",void 0),r([N("engine.font",v.CLASS_ID.FONT),s("design:paramtypes",[String])],n)}(X);v.Fonts=void 0,(_n=v.Fonts||(v.Fonts={})).SanFrancisco="builtin:SF-UI-Text-Regular SDF",_n.SanFrancisco_Heavy="builtin:SF-UI-Text-Heavy SDF",_n.SanFrancisco_Semibold="builtin:SF-UI-Text-Semibold SDF",_n.LiberationSans="builtin:LiberationSans SDF",_n.SansSerif="SansSerif",_n.SansSerif_Heavy="SansSerif_Heavy",_n.SansSerif_Bold="SansSerif_Bold",_n.SansSerif_SemiBold="SansSerif_SemiBold";var Fn,In=function(T){function n(v){var S=T.call(this)||this;return S.outlineWidth=0,S.outlineColor=new At.Color3(1,1,1),S.color=new At.Color3(1,1,1),S.fontSize=10,S.opacity=1,S.value="",S.lineSpacing="0px",S.lineCount=0,S.textWrapping=!1,S.shadowBlur=0,S.shadowOffsetX=0,S.shadowOffsetY=0,S.shadowColor=new At.Color3(1,1,1),S.hTextAlign="center",S.vTextAlign="center",S.width=1,S.height=1,S.paddingTop=0,S.paddingRight=0,S.paddingBottom=0,S.paddingLeft=0,S.billboard=!1,S.visible=!0,v&&(S.value=v),S}return i(n,T),r([X.field,s("design:type",Number)],n.prototype,"outlineWidth",void 0),r([X.field,s("design:type",At.Color3)],n.prototype,"outlineColor",void 0),r([X.field,s("design:type",At.Color3)],n.prototype,"color",void 0),r([X.field,s("design:type",Number)],n.prototype,"fontSize",void 0),r([X.component,s("design:type",On)],n.prototype,"font",void 0),r([X.field,s("design:type",Number)],n.prototype,"opacity",void 0),r([X.field,s("design:type",String)],n.prototype,"value",void 0),r([X.field,s("design:type",String)],n.prototype,"lineSpacing",void 0),r([X.field,s("design:type",Number)],n.prototype,"lineCount",void 0),r([X.field,s("design:type",Boolean)],n.prototype,"textWrapping",void 0),r([X.field,s("design:type",Number)],n.prototype,"shadowBlur",void 0),r([X.field,s("design:type",Number)],n.prototype,"shadowOffsetX",void 0),r([X.field,s("design:type",Number)],n.prototype,"shadowOffsetY",void 0),r([X.field,s("design:type",At.Color3)],n.prototype,"shadowColor",void 0),r([X.field,s("design:type",String)],n.prototype,"hTextAlign",void 0),r([X.field,s("design:type",String)],n.prototype,"vTextAlign",void 0),r([X.field,s("design:type",Number)],n.prototype,"width",void 0),r([X.field,s("design:type",Number)],n.prototype,"height",void 0),r([X.field,s("design:type",Number)],n.prototype,"paddingTop",void 0),r([X.field,s("design:type",Number)],n.prototype,"paddingRight",void 0),r([X.field,s("design:type",Number)],n.prototype,"paddingBottom",void 0),r([X.field,s("design:type",Number)],n.prototype,"paddingLeft",void 0),r([X.field,s("design:type",Boolean)],n.prototype,"billboard",void 0),r([X.field,s("design:type",Boolean)],n.prototype,"visible",void 0),r([P("engine.text",v.CLASS_ID.TEXT_SHAPE),s("design:paramtypes",[String])],n)}(X);v.TransparencyMode=void 0,(Fn=v.TransparencyMode||(v.TransparencyMode={}))[Fn.OPAQUE=0]="OPAQUE",Fn[Fn.ALPHA_TEST=1]="ALPHA_TEST",Fn[Fn.ALPHA_BLEND=2]="ALPHA_BLEND",Fn[Fn.ALPHA_TEST_AND_BLEND=3]="ALPHA_TEST_AND_BLEND",Fn[Fn.AUTO=4]="AUTO";var Bn,Mn=function(T){function n(){var S=null!==T&&T.apply(this,arguments)||this;return S.alphaTest=.5,S.castShadows=!0,S.transparencyMode=v.TransparencyMode.AUTO,S}return i(n,T),r([X.field,s("design:type",Number)],n.prototype,"alphaTest",void 0),r([X.field,s("design:type",Object)],n.prototype,"albedoColor",void 0),r([X.field,s("design:type",At.Color3)],n.prototype,"emissiveColor",void 0),r([X.field,s("design:type",Number)],n.prototype,"metallic",void 0),r([X.field,s("design:type",Number)],n.prototype,"roughness",void 0),r([X.field,s("design:type",At.Color3)],n.prototype,"reflectivityColor",void 0),r([X.field,s("design:type",Number)],n.prototype,"directIntensity",void 0),r([X.field,s("design:type",Number)],n.prototype,"microSurface",void 0),r([X.field,s("design:type",Number)],n.prototype,"emissiveIntensity",void 0),r([X.field,s("design:type",Number)],n.prototype,"specularIntensity",void 0),r([X.component,s("design:type",Object)],n.prototype,"albedoTexture",void 0),r([X.component,s("design:type",Object)],n.prototype,"alphaTexture",void 0),r([X.component,s("design:type",Object)],n.prototype,"emissiveTexture",void 0),r([X.component,s("design:type",Object)],n.prototype,"bumpTexture",void 0),r([X.field,s("design:type",Boolean)],n.prototype,"castShadows",void 0),r([X.field,s("design:type",Number)],n.prototype,"transparencyMode",void 0),r([N("engine.material",v.CLASS_ID.PBR_MATERIAL)],n)}(X),zn=function(T){function n(){var v=null!==T&&T.apply(this,arguments)||this;return v.alphaTest=.5,v.castShadows=!0,v}return i(n,T),r([X.component,s("design:type",Object)],n.prototype,"texture",void 0),r([X.field,s("design:type",Number)],n.prototype,"alphaTest",void 0),r([X.field,s("design:type",Boolean)],n.prototype,"castShadows",void 0),r([N("engine.material",v.CLASS_ID.BASIC_MATERIAL)],n)}(X),Dn=function(v){function e(T){var S=v.call(this)||this;if(S.uuid=f("UUID"),!T||!("apply"in T)||!("call"in T))throw new Error("Callback is not a function");return S.callback=T,S}return i(e,v),e.uuidEvent=function(v,T){if(delete v[T]){var S=T+"_"+Math.random();v[S]=void 0,Object.defineProperty(v,S,o(o({},Object.getOwnPropertyDescriptor(v,S)),{enumerable:!1})),Object.defineProperty(v,T.toString(),{get:function(){return this[S]},set:function(v){var C=this[S];if(v){if(!(v instanceof e))throw new Error("value is not an OnUUIDEvent");this.data[T]=v.uuid}else this.data[T]=null;if(this[S]=v,v!==C){this.dirty=!0;for(var E=0;E<this.subscriptions.length;E++)this.subscriptions[E](T,v,C)}},enumerable:!0})}},e.prototype.toJSON=function(){return{uuid:this.uuid,type:this.type}},r([X.field,s("design:type",Function)],e.prototype,"callback",void 0),e}(X),Nn=function(T){function n(){var S=null!==T&&T.apply(this,arguments)||this;return S.button=v.ActionButton.ANY,S.hoverText="Interact",S.distance=10,S.showFeedback=!0,S}return i(n,T),n.prototype.toJSON=function(){return{uuid:this.uuid,type:this.type,button:this.button,hoverText:this.hoverText,distance:this.distance,showFeedback:this.showFeedback}},r([X.field,s("design:type",String)],n.prototype,"button",void 0),r([X.field,s("design:type",String)],n.prototype,"hoverText",void 0),r([X.field,s("design:type",Number)],n.prototype,"distance",void 0),r([X.field,s("design:type",Boolean)],n.prototype,"showFeedback",void 0),n}(Dn),Ln=function(T){function n(){var v=null!==T&&T.apply(this,arguments)||this;return v.type="onPointerLock",v}return i(n,T),r([X.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.onPointerLock",v.CLASS_ID.UUID_CALLBACK)],n)}(Dn),Vn=function(T){function n(){var v=null!==T&&T.apply(this,arguments)||this;return v.type="onAnimationEnd",v}return i(n,T),r([X.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.onAnimationEnd",v.CLASS_ID.UUID_CALLBACK)],n)}(Dn),kn=function(T){function n(){return null!==T&&T.apply(this,arguments)||this}return i(n,T),r([P("engine.smartItem",v.CLASS_ID.SMART_ITEM)],n)}(X),Un=function(T){function n(v){var S=T.call(this)||this;return S.url=v,S}return i(n,T),r([X.readonly,s("design:type",String)],n.prototype,"url",void 0),r([N("engine.VideoClip",v.CLASS_ID.VIDEO_CLIP),s("design:paramtypes",[String])],n)}(X);v.VideoStatus=void 0,(Bn=v.VideoStatus||(v.VideoStatus={}))[Bn.NONE=0]="NONE",Bn[Bn.ERROR=1]="ERROR",Bn[Bn.LOADING=2]="LOADING",Bn[Bn.READY=3]="READY",Bn[Bn.PLAYING=4]="PLAYING",Bn[Bn.BUFFERING=5]="BUFFERING";var jn,qn=function(T){function n(S,C){var E=T.call(this)||this;if(E.volume=1,E.playbackRate=1,E.loop=!1,E.seek=-1,E._position=-1,E._videoLength=-1,E._status=v.VideoStatus.NONE,E.playing=!1,!(S instanceof Un))throw new Error("Trying to create VideoTexture(VideoClip) with an invalid VideoClip");if(E.videoClipId=D(S),C)for(var A in C)E[A]=C[A];return E}return i(n,T),n.prototype.play=function(){this.playing=!0},n.prototype.pause=function(){this.playing=!1},n.prototype.reset=function(){this.seekTime(0),this.pause()},n.prototype.seekTime=function(v){this.seek=v,this.dirty=!0,this.data.nonce=Math.random()},n.prototype.toJSON=function(){if(this.seek>=0){var v=JSON.parse(JSON.stringify(T.prototype.toJSON.call(this)));return this.seek=-1,v}return T.prototype.toJSON.call(this)},n.prototype.update=function(T){T.videoClipId===this.videoClipId&&(this._status=T.videoStatus||v.VideoStatus.NONE,this._videoLength=T.totalVideoLength,this._position=T.currentOffset)},Object.defineProperty(n.prototype,"position",{get:function(){return this._position},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"videoLength",{get:function(){return this._videoLength},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),r([X.readonly,s("design:type",String)],n.prototype,"videoClipId",void 0),r([X.readonly,s("design:type",Number)],n.prototype,"samplingMode",void 0),r([X.readonly,s("design:type",Number)],n.prototype,"wrap",void 0),r([X.field,s("design:type",Number)],n.prototype,"volume",void 0),r([X.field,s("design:type",Number)],n.prototype,"playbackRate",void 0),r([X.field,s("design:type",Boolean)],n.prototype,"loop",void 0),r([X.field,s("design:type",Number)],n.prototype,"seek",void 0),r([X.field,s("design:type",Boolean)],n.prototype,"playing",void 0),r([N("engine.VideoTexture",v.CLASS_ID.VIDEO_TEXTURE),s("design:paramtypes",[Un,Object])],n)}(X),Gn=function(T){function n(v){var S=T.call(this)||this;return S.area=v.area,S.cameraMode=v.cameraMode,S}return i(n,T),r([X.field,s("design:type",Object)],n.prototype,"area",void 0),r([X.field,s("design:type",Number)],n.prototype,"cameraMode",void 0),r([P("engine.cameraModeArea",v.CLASS_ID.CAMERA_MODE_AREA),s("design:paramtypes",[Object])],n)}(X),Hn=function(T){function n(v,S){var C=T.call(this)||this;if(C.userId=v,S)for(var E in S)C[E]=S[E];return C}return i(n,T),r([X.readonly,s("design:type",String)],n.prototype,"userId",void 0),r([X.readonly,s("design:type",Number)],n.prototype,"samplingMode",void 0),r([X.readonly,s("design:type",Number)],n.prototype,"wrap",void 0),r([X.readonly,s("design:type",Boolean)],n.prototype,"hasAlpha",void 0),r([N("engine.texture",v.CLASS_ID.AVATAR_TEXTURE),s("design:paramtypes",[String,Object])],n)}(X),Wn=function(){function e(){var T=this;this.position=new At.Vector3,this.rotation=new At.Quaternion,this.feetPosition=new At.Vector3,this.worldPosition=new At.Vector3,this.lastEventPosition={x:0,y:0,z:0},this.lastEventWorldPosition={x:0,y:0,z:0},this.lastEventRotation={x:0,y:0,z:0,w:1},this._playerHeight=1.6,this._cameraMode=v.CameraMode.ThirdPerson,"undefined"!=typeof dcl&&(dcl.subscribe("positionChanged"),dcl.subscribe("rotationChanged"),dcl.subscribe("cameraModeChanged"),dcl.onEvent((function(v){switch(v.type){case"positionChanged":T.positionChanged(v.data);break;case"rotationChanged":T.rotationChanged(v.data);break;case"cameraModeChanged":T.cameraModeChanged(v.data)}}))),Object.defineProperty(this.position,"x",{get:function(){return T.lastEventPosition.x}}),Object.defineProperty(this.position,"y",{get:function(){return T.lastEventPosition.y}}),Object.defineProperty(this.position,"z",{get:function(){return T.lastEventPosition.z}}),Object.defineProperty(this.worldPosition,"x",{get:function(){return T.lastEventWorldPosition.x}}),Object.defineProperty(this.worldPosition,"y",{get:function(){return T.lastEventWorldPosition.y}}),Object.defineProperty(this.worldPosition,"z",{get:function(){return T.lastEventWorldPosition.z}}),Object.defineProperty(this.feetPosition,"x",{get:function(){return T.lastEventPosition.x}}),Object.defineProperty(this.feetPosition,"y",{get:function(){return T.lastEventPosition.y-T.playerHeight}}),Object.defineProperty(this.feetPosition,"z",{get:function(){return T.lastEventPosition.z}}),Object.defineProperty(this.rotation,"x",{get:function(){return T.lastEventRotation.x}}),Object.defineProperty(this.rotation,"y",{get:function(){return T.lastEventRotation.y}}),Object.defineProperty(this.rotation,"z",{get:function(){return T.lastEventRotation.z}}),Object.defineProperty(this.rotation,"w",{get:function(){return T.lastEventRotation.w}})}return Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playerHeight",{get:function(){return this._playerHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cameraMode",{get:function(){return this._cameraMode},enumerable:!1,configurable:!0}),e.prototype.positionChanged=function(v){this.lastEventPosition=v.position,this.lastEventWorldPosition=v.cameraPosition,this._playerHeight=v.playerHeight},e.prototype.rotationChanged=function(v){this.lastEventRotation=v.quaternion},e.prototype.cameraModeChanged=function(v){this._cameraMode=v.cameraMode},e}();!function(v){v.HitFirst="rqhf",v.HitAll="rqha"}(jn||(jn={}));var Xn,Yn=function(){function t(){this.queries={}}return Object.defineProperty(t,"instance",{get:function(){return t.ensureInstance(),t._instance},enumerable:!1,configurable:!0}),t.ensureInstance=function(){t._instance||(t._instance=new t)},t.prototype.getRayFromCamera=function(v){var T=Wn.instance.rotation,S=At.Matrix.Identity();T.toRotationMatrix(S);var C=At.Vector3.TransformCoordinates(At.Vector3.Forward(),S);return{origin:Wn.instance.position,direction:C,distance:v}},t.prototype.getRayFromPositions=function(v,T){var S=T.subtract(v),C=S.length();return{origin:v,direction:S.normalize(),distance:C}},t.prototype.hitFirst=function(v,T,S){var C="number"==typeof S?jn.HitFirst+S:m();this.queries[C]=T,"undefined"!=typeof dcl&&dcl.query("raycast",{queryId:C,queryType:"HitFirst",ray:v})},t.prototype.hitAll=function(v,T,S){var C="number"==typeof S?jn.HitAll+S:m();this.queries[C]=T,"undefined"!=typeof dcl&&dcl.query("raycast",{queryId:C,queryType:"HitAll",ray:v})},t.prototype.hitFirstAvatar=function(v,T){u("not implemented yet")},t.prototype.hitAllAvatars=function(v,T){u("not implemented yet")},t.prototype.handleRaycastHitFirstResponse=function(v){this.queries[v.payload.queryId](v.payload.payload),delete this.queries[v.payload.queryId]},t.prototype.handleRaycastHitAllResponse=function(v){this.queries[v.payload.queryId](v.payload.payload),delete this.queries[v.payload.queryId]},t}(),Zn=function(){function t(){}return t.prototype.activate=function(v){v.eventManager.addListener(st,this,(function(v){"HitFirst"===v.payload.queryType?Yn.instance.handleRaycastHitFirstResponse(v):"HitAll"===v.payload.queryType&&Yn.instance.handleRaycastHitAllResponse(v)})),"undefined"!=typeof dcl&&dcl.subscribe("raycastResponse")},t.prototype.deactivate=function(){"undefined"!=typeof dcl&&dcl.unsubscribe("raycastResponse")},t}(),Qn=function(){function t(){}return t.prototype.activate=function(v){v.eventManager.addListener(at,this,(function(v){un.instance.handlePointerEvent(v.payload)})),"undefined"!=typeof dcl&&(dcl.subscribe("pointerUp"),dcl.subscribe("pointerDown"),dcl.subscribe("actionButtonEvent"))},t.prototype.deactivate=function(){"undefined"!=typeof dcl&&(dcl.unsubscribe("pointerUp"),dcl.unsubscribe("pointerDown"),dcl.unsubscribe("actionButtonEvent"))},t}(),Jn=function(){function t(){this.handlerMap={}}return t.prototype.activate=function(v){v.eventManager.addListener(rt,this,this.handleEvent),v.eventManager.addListener(O,this,this.componentAdded),v.eventManager.addListener(R,this,this.componentRemoved),"undefined"!=typeof dcl&&dcl.subscribe("uuidEvent")},t.prototype.deactivate=function(){"undefined"!=typeof dcl&&dcl.unsubscribe("uuidEvent")},t.prototype.onAddEntity=function(v){for(var T in v.components){var S=v.components[T];S instanceof Dn&&(this.handlerMap[S.uuid]=S)}},t.prototype.onRemoveEntity=function(v){for(var T in v.components){var S=v.components[T];S instanceof Dn&&delete this.handlerMap[S.uuid]}},t.prototype.componentAdded=function(v){if(v.entity.isAddedToEngine()){var T=v.entity.components[v.componentName];T instanceof Dn&&(this.handlerMap[T.uuid]=T)}},t.prototype.componentRemoved=function(v){v.entity.isAddedToEngine()&&v.component instanceof Dn&&delete this.handlerMap[v.component.uuid]},t.prototype.handleEvent=function(v){if(v.uuid in this.handlerMap){var T=this.handlerMap[v.uuid];T&&T.callback&&"call"in T.callback&&T.callback(v.payload)}},t}(),Kn=new Zn,$n=new Qn,to=new Jn,eo=function(T){function n(v){var S=T.call(this)||this;return S.loop=!1,S.volume=1,S.url=v,S}return i(n,T),r([X.readonly,s("design:type",String)],n.prototype,"url",void 0),r([X.field,s("design:type",Boolean)],n.prototype,"loop",void 0),r([X.field,s("design:type",String)],n.prototype,"loadingCompleteEventId",void 0),r([X.field,s("design:type",Number)],n.prototype,"volume",void 0),r([N("engine.AudioClip",v.CLASS_ID.AUDIO_CLIP),s("design:paramtypes",[String])],n)}(X),no=function(T){function n(v){var S=T.call(this)||this;if(S.audioClip=v,S.loop=!1,S.volume=1,S.playing=!1,S.pitch=1,S.playedAtTimestamp=Date.now(),!(v instanceof eo))throw new Error("Trying to create AudioSource(AudioClip) with an invalid AudioClip");return S.audioClipId=D(v),S}return i(n,T),n.prototype.playOnce=function(){return this.playing=!0,this.dirty=!0,this.playedAtTimestamp=Date.now(),this.data.nonce=Math.random(),this},r([X.readonly,s("design:type",String)],n.prototype,"audioClipId",void 0),r([X.field,s("design:type",Boolean)],n.prototype,"loop",void 0),r([X.field,s("design:type",Number)],n.prototype,"volume",void 0),r([X.field,s("design:type",Boolean)],n.prototype,"playing",void 0),r([X.field,s("design:type",Number)],n.prototype,"pitch",void 0),r([X.field,s("design:type",Number)],n.prototype,"playedAtTimestamp",void 0),r([P("engine.AudioSource",v.CLASS_ID.AUDIO_SOURCE),s("design:paramtypes",[eo])],n)}(X),oo=function(T){function n(v){var S=T.call(this)||this;return S.playing=!1,S.volume=1,S.url=v,S.playing=!0,S}return i(n,T),r([X.readonly,s("design:type",String)],n.prototype,"url",void 0),r([X.field,s("design:type",Boolean)],n.prototype,"playing",void 0),r([X.field,s("design:type",Number)],n.prototype,"volume",void 0),r([P("engine.AudioStream",v.CLASS_ID.AUDIO_STREAM),s("design:paramtypes",[String])],n)}(X);v.Gizmo=void 0,(Xn=v.Gizmo||(v.Gizmo={})).MOVE="MOVE",Xn.ROTATE="ROTATE",Xn.SCALE="SCALE",Xn.NONE="NONE";var io,ro=function(T){function n(){var v=null!==T&&T.apply(this,arguments)||this;return v.type="gizmoEvent",v}return i(n,T),r([X.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.gizmoEvent",v.CLASS_ID.UUID_CALLBACK)],n)}(Dn),so=function(T){function n(){var v=null!==T&&T.apply(this,arguments)||this;return v.position=!0,v.rotation=!0,v.scale=!0,v.cycle=!0,v.localReference=!1,v}return i(n,T),r([X.field,s("design:type",Boolean)],n.prototype,"position",void 0),r([X.field,s("design:type",Boolean)],n.prototype,"rotation",void 0),r([X.field,s("design:type",Boolean)],n.prototype,"scale",void 0),r([X.field,s("design:type",Boolean)],n.prototype,"cycle",void 0),r([X.field,s("design:type",String)],n.prototype,"selectedGizmo",void 0),r([X.field,s("design:type",Boolean)],n.prototype,"localReference",void 0),r([P("engine.gizmos",v.CLASS_ID.GIZMOS)],n)}(X),ao=function(T){function n(v){var S=T.call(this,v)||this;return S.type="onFocus",to.handlerMap[S.uuid]=S,S}return i(n,T),r([X.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.onFocus",v.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function])],n)}(Dn),lo=function(T){function n(v){var S=T.call(this,v)||this;return S.type="onTextSubmit",to.handlerMap[S.uuid]=S,S}return i(n,T),r([X.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.onTextSubmit",v.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function])],n)}(Dn),uo=function(T){function n(v){var S=T.call(this,v)||this;return S.type="onBlur",to.handlerMap[S.uuid]=S,S}return i(n,T),r([X.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.onBlur",v.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function])],n)}(Dn),co=function(T){function n(v){var S=T.call(this,v)||this;return S.type="onEnter",to.handlerMap[S.uuid]=S,S}return i(n,T),r([X.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.onEnter",v.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function])],n)}(Dn),ho=function(T){function n(v){var S=T.call(this,v)||this;return S.type="onChange",to.handlerMap[S.uuid]=S,S}return i(n,T),r([X.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.onChange",v.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function])],n)}(Dn),po=function(T){function n(v,S){var C=T.call(this,v)||this;return C.type="onClick",to.handlerMap[C.uuid]=C,S&&(C.showFeedback=!(!1===S.showFeedback),S.button&&(C.button=S.button),S.hoverText&&(C.hoverText=S.hoverText),S.distance&&(C.distance=S.distance)),C}return i(n,T),r([X.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.onClick",v.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function,Object])],n)}(Nn),fo=function(T){function n(v,S){var C=T.call(this,v)||this;return C.type="pointerDown",to.handlerMap[C.uuid]=C,S&&(C.showFeedback=!(!1===S.showFeedback),S.button&&(C.button=S.button),S.hoverText&&(C.hoverText=S.hoverText),S.distance&&(C.distance=S.distance)),C}return i(n,T),r([X.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.pointerDown",v.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function,Object])],n)}(Nn),mo=function(T){function n(v,S){var C=T.call(this,v)||this;return C.type="pointerUp",to.handlerMap[C.uuid]=C,S&&(C.showFeedback=!(!1===S.showFeedback),S.button&&(C.button=S.button),S.hoverText&&(C.hoverText=S.hoverText),S.distance&&(C.distance=S.distance)),C}return i(n,T),r([X.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.pointerUp",v.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function,Object])],n)}(Nn),yo=function(T){function n(v,S){var C=T.call(this,v)||this;return C.type="pointerHoverEnter",to.handlerMap[C.uuid]=C,S&&S.distance&&(C.distance=S.distance),C}return i(n,T),r([X.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.pointerHoverEnter",v.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function,Object])],n)}(Nn),go=function(T){function n(v){var S=T.call(this,v)||this;return S.type="pointerHoverExit",to.handlerMap[S.uuid]=S,S.distance=160,S}return i(n,T),r([X.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.pointerHoverExit",v.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function])],n)}(Nn),vo=function(v){function e(T){var S=v.call(this)||this;return S.name=null,S.visible=!0,S.opacity=1,S.hAlign="center",S.vAlign="center",S.width="100px",S.height="50px",S.positionX="0px",S.positionY="0px",S.isPointerBlocker=!0,T&&(S._parent=T,S.data.parentComponent=D(T)),S}return i(e,v),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentComponent",{get:function(){return this.data.parentComponent},enumerable:!1,configurable:!0}),r([X.field,s("design:type",Object)],e.prototype,"name",void 0),r([X.field,s("design:type",Boolean)],e.prototype,"visible",void 0),r([X.field,s("design:type",Number)],e.prototype,"opacity",void 0),r([X.field,s("design:type",String)],e.prototype,"hAlign",void 0),r([X.field,s("design:type",String)],e.prototype,"vAlign",void 0),r([X.uiValue,s("design:type",Object)],e.prototype,"width",void 0),r([X.uiValue,s("design:type",Object)],e.prototype,"height",void 0),r([X.uiValue,s("design:type",Object)],e.prototype,"positionX",void 0),r([X.uiValue,s("design:type",Object)],e.prototype,"positionY",void 0),r([X.field,s("design:type",Boolean)],e.prototype,"isPointerBlocker",void 0),e}(X),To=function(T){function n(){return T.call(this,null)||this}return i(n,T),r([N("engine.shape",v.CLASS_ID.UI_FULLSCREEN_SHAPE),s("design:paramtypes",[])],n)}(vo),wo=function(T){function n(){return T.call(this,null)||this}return i(n,T),r([N("engine.shape",v.CLASS_ID.UI_WORLD_SPACE_SHAPE),s("design:paramtypes",[])],n)}(vo),bo=function(T){function n(){return T.call(this,null)||this}return i(n,T),r([N("engine.shape",v.CLASS_ID.UI_SCREEN_SPACE_SHAPE),s("design:paramtypes",[])],n)}(vo),So=function(T){function n(){var v=null!==T&&T.apply(this,arguments)||this;return v.thickness=0,v.color=At.Color4.Clear(),v.alignmentUsesSize=!0,v}return i(n,T),r([X.field,s("design:type",Number)],n.prototype,"thickness",void 0),r([X.field,s("design:type",At.Color4)],n.prototype,"color",void 0),r([X.field,s("design:type",Boolean)],n.prototype,"alignmentUsesSize",void 0),r([N("engine.shape",v.CLASS_ID.UI_CONTAINER_RECT)],n)}(vo);v.UIStackOrientation=void 0,(io=v.UIStackOrientation||(v.UIStackOrientation={}))[io.VERTICAL=0]="VERTICAL",io[io.HORIZONTAL=1]="HORIZONTAL";var xo=function(T){function n(){var S=null!==T&&T.apply(this,arguments)||this;return S.adaptWidth=!0,S.adaptHeight=!0,S.color=At.Color4.Clear(),S.stackOrientation=v.UIStackOrientation.VERTICAL,S.spacing=0,S}return i(n,T),r([X.field,s("design:type",Boolean)],n.prototype,"adaptWidth",void 0),r([X.field,s("design:type",Boolean)],n.prototype,"adaptHeight",void 0),r([X.field,s("design:type",At.Color4)],n.prototype,"color",void 0),r([X.field,s("design:type",Number)],n.prototype,"stackOrientation",void 0),r([X.field,s("design:type",Number)],n.prototype,"spacing",void 0),r([N("engine.shape",v.CLASS_ID.UI_CONTAINER_STACK)],n)}(vo),Co=function(T){function n(){var v=null!==T&&T.apply(this,arguments)||this;return v.fontSize=10,v.fontWeight="normal",v.thickness=0,v.cornerRadius=0,v.color=At.Color4.White(),v.background=At.Color4.White(),v.paddingTop=0,v.paddingRight=0,v.paddingBottom=0,v.paddingLeft=0,v.shadowBlur=0,v.shadowOffsetX=0,v.shadowOffsetY=0,v.shadowColor=At.Color4.Black(),v.text="button",v}return i(n,T),r([X.field,s("design:type",Number)],n.prototype,"fontSize",void 0),r([X.field,s("design:type",String)],n.prototype,"fontWeight",void 0),r([X.field,s("design:type",Number)],n.prototype,"thickness",void 0),r([X.field,s("design:type",Number)],n.prototype,"cornerRadius",void 0),r([X.field,s("design:type",At.Color4)],n.prototype,"color",void 0),r([X.field,s("design:type",At.Color4)],n.prototype,"background",void 0),r([X.field,s("design:type",Number)],n.prototype,"paddingTop",void 0),r([X.field,s("design:type",Number)],n.prototype,"paddingRight",void 0),r([X.field,s("design:type",Number)],n.prototype,"paddingBottom",void 0),r([X.field,s("design:type",Number)],n.prototype,"paddingLeft",void 0),r([X.field,s("design:type",Number)],n.prototype,"shadowBlur",void 0),r([X.field,s("design:type",Number)],n.prototype,"shadowOffsetX",void 0),r([X.field,s("design:type",Number)],n.prototype,"shadowOffsetY",void 0),r([X.field,s("design:type",At.Color4)],n.prototype,"shadowColor",void 0),r([X.field,s("design:type",String)],n.prototype,"text",void 0),r([N("engine.shape",v.CLASS_ID.UI_BUTTON_SHAPE)],n)}(vo),_o=function(T){function n(){var v=null!==T&&T.apply(this,arguments)||this;return v.outlineWidth=0,v.outlineColor=At.Color4.White(),v.color=At.Color4.White(),v.fontSize=10,v.fontAutoSize=!1,v.value="",v.lineSpacing=0,v.lineCount=0,v.adaptWidth=!1,v.adaptHeight=!1,v.textWrapping=!1,v.shadowBlur=0,v.shadowOffsetX=0,v.shadowOffsetY=0,v.shadowColor=At.Color4.Black(),v.hTextAlign="left",v.vTextAlign="bottom",v.paddingTop=0,v.paddingRight=0,v.paddingBottom=0,v.paddingLeft=0,v}return i(n,T),r([X.field,s("design:type",Number)],n.prototype,"outlineWidth",void 0),r([X.field,s("design:type",At.Color4)],n.prototype,"outlineColor",void 0),r([X.field,s("design:type",At.Color4)],n.prototype,"color",void 0),r([X.field,s("design:type",Number)],n.prototype,"fontSize",void 0),r([X.field,s("design:type",Boolean)],n.prototype,"fontAutoSize",void 0),r([X.component,s("design:type",On)],n.prototype,"font",void 0),r([X.field,s("design:type",String)],n.prototype,"value",void 0),r([X.field,s("design:type",Number)],n.prototype,"lineSpacing",void 0),r([X.field,s("design:type",Number)],n.prototype,"lineCount",void 0),r([X.field,s("design:type",Boolean)],n.prototype,"adaptWidth",void 0),r([X.field,s("design:type",Boolean)],n.prototype,"adaptHeight",void 0),r([X.field,s("design:type",Boolean)],n.prototype,"textWrapping",void 0),r([X.field,s("design:type",Number)],n.prototype,"shadowBlur",void 0),r([X.field,s("design:type",Number)],n.prototype,"shadowOffsetX",void 0),r([X.field,s("design:type",Number)],n.prototype,"shadowOffsetY",void 0),r([X.field,s("design:type",At.Color4)],n.prototype,"shadowColor",void 0),r([X.field,s("design:type",String)],n.prototype,"hTextAlign",void 0),r([X.field,s("design:type",String)],n.prototype,"vTextAlign",void 0),r([X.field,s("design:type",Number)],n.prototype,"paddingTop",void 0),r([X.field,s("design:type",Number)],n.prototype,"paddingRight",void 0),r([X.field,s("design:type",Number)],n.prototype,"paddingBottom",void 0),r([X.field,s("design:type",Number)],n.prototype,"paddingLeft",void 0),r([N("engine.shape",v.CLASS_ID.UI_TEXT_SHAPE)],n)}(vo),Eo=function(T){function n(v){var S=T.call(this,v)||this;return S.outlineWidth=0,S.outlineColor=At.Color4.Black(),S.color=At.Color4.Clear(),S.fontSize=10,S.value="",S.placeholder="",S.margin=10,S.hTextAlign="left",S.vTextAlign="bottom",S.focusedBackground=At.Color4.Black(),S.textWrapping=!1,S.shadowBlur=0,S.shadowOffsetX=0,S.shadowOffsetY=0,S.shadowColor=At.Color4.White(),S.paddingTop=0,S.paddingRight=0,S.paddingBottom=0,S.paddingLeft=0,S.onTextSubmit=null,S.onChanged=null,S.onFocus=null,S.onBlur=null,S.onTextChanged=new ho((function(v){var T=v.value,C=T.value,E=T.isSubmit,A=S.dirty;if(S.value=C,S.dirty=A,E&&S.onTextSubmit){var R={text:C};S.onTextSubmit.callback(R)}else if(!E&&S.onChanged){var O={value:C,pointerId:v.pointerId};S.onChanged.callback(O)}})),S}return i(n,T),r([X.field,s("design:type",Number)],n.prototype,"outlineWidth",void 0),r([X.field,s("design:type",At.Color4)],n.prototype,"outlineColor",void 0),r([X.field,s("design:type",At.Color4)],n.prototype,"color",void 0),r([X.field,s("design:type",Number)],n.prototype,"fontSize",void 0),r([X.component,s("design:type",On)],n.prototype,"font",void 0),r([X.field,s("design:type",String)],n.prototype,"value",void 0),r([X.field,s("design:type",String)],n.prototype,"placeholder",void 0),r([X.field,s("design:type",Number)],n.prototype,"margin",void 0),r([X.field,s("design:type",String)],n.prototype,"hTextAlign",void 0),r([X.field,s("design:type",String)],n.prototype,"vTextAlign",void 0),r([X.field,s("design:type",At.Color4)],n.prototype,"focusedBackground",void 0),r([X.field,s("design:type",Boolean)],n.prototype,"textWrapping",void 0),r([X.field,s("design:type",Number)],n.prototype,"shadowBlur",void 0),r([X.field,s("design:type",Number)],n.prototype,"shadowOffsetX",void 0),r([X.field,s("design:type",Number)],n.prototype,"shadowOffsetY",void 0),r([X.field,s("design:type",At.Color4)],n.prototype,"shadowColor",void 0),r([X.field,s("design:type",Number)],n.prototype,"paddingTop",void 0),r([X.field,s("design:type",Number)],n.prototype,"paddingRight",void 0),r([X.field,s("design:type",Number)],n.prototype,"paddingBottom",void 0),r([X.field,s("design:type",Number)],n.prototype,"paddingLeft",void 0),r([Dn.uuidEvent,s("design:type",ho)],n.prototype,"onTextChanged",void 0),r([Dn.uuidEvent,s("design:type",Object)],n.prototype,"onFocus",void 0),r([Dn.uuidEvent,s("design:type",Object)],n.prototype,"onBlur",void 0),r([N("engine.shape",v.CLASS_ID.UI_INPUT_TEXT_SHAPE),s("design:paramtypes",[Object])],n)}(vo),Ao=function(T){function n(v,S){var C=T.call(this,v)||this;return C.sourceLeft=0,C.sourceTop=0,C.sourceWidth=1,C.sourceHeight=1,C.paddingTop=0,C.paddingRight=0,C.paddingBottom=0,C.paddingLeft=0,C.sizeInPixels=!0,C.onClick=null,C.source=S,C}return i(n,T),r([X.field,s("design:type",Number)],n.prototype,"sourceLeft",void 0),r([X.field,s("design:type",Number)],n.prototype,"sourceTop",void 0),r([X.field,s("design:type",Number)],n.prototype,"sourceWidth",void 0),r([X.field,s("design:type",Number)],n.prototype,"sourceHeight",void 0),r([X.component,s("design:type",Object)],n.prototype,"source",void 0),r([X.field,s("design:type",Number)],n.prototype,"paddingTop",void 0),r([X.field,s("design:type",Number)],n.prototype,"paddingRight",void 0),r([X.field,s("design:type",Number)],n.prototype,"paddingBottom",void 0),r([X.field,s("design:type",Number)],n.prototype,"paddingLeft",void 0),r([X.field,s("design:type",Boolean)],n.prototype,"sizeInPixels",void 0),r([Dn.uuidEvent,s("design:type",Object)],n.prototype,"onClick",void 0),r([N("engine.shape",v.CLASS_ID.UI_IMAGE_SHAPE),s("design:paramtypes",[vo,Object])],n)}(vo),Ro=function(T){function n(){var v=null!==T&&T.apply(this,arguments)||this;return v.valueX=0,v.valueY=0,v.backgroundColor=At.Color4.Clear(),v.isHorizontal=!1,v.isVertical=!1,v.paddingTop=0,v.paddingRight=0,v.paddingBottom=0,v.paddingLeft=0,v.onChanged=null,v}return i(n,T),r([X.field,s("design:type",Number)],n.prototype,"valueX",void 0),r([X.field,s("design:type",Number)],n.prototype,"valueY",void 0),r([X.field,s("design:type",At.Color4)],n.prototype,"backgroundColor",void 0),r([X.field,s("design:type",Boolean)],n.prototype,"isHorizontal",void 0),r([X.field,s("design:type",Boolean)],n.prototype,"isVertical",void 0),r([X.field,s("design:type",Number)],n.prototype,"paddingTop",void 0),r([X.field,s("design:type",Number)],n.prototype,"paddingRight",void 0),r([X.field,s("design:type",Number)],n.prototype,"paddingBottom",void 0),r([X.field,s("design:type",Number)],n.prototype,"paddingLeft",void 0),r([Dn.uuidEvent,s("design:type",Object)],n.prototype,"onChanged",void 0),r([N("engine.shape",v.CLASS_ID.UI_SLIDER_SHAPE)],n)}(vo),Po=function(T){function n(){var v=null!==T&&T.apply(this,arguments)||this;return v.useDummyModel=!1,v.talking=!1,v}var S;return i(n,T),S=n,n.Dummy=function(){var v=new S;return v.useDummyModel=!0,v},r([X.field,s("design:type",String)],n.prototype,"id",void 0),r([X.field,s("design:type",String)],n.prototype,"name",void 0),r([X.field,s("design:type",String)],n.prototype,"expressionTriggerId",void 0),r([X.field,s("design:type",Number)],n.prototype,"expressionTriggerTimestamp",void 0),r([X.field,s("design:type",String)],n.prototype,"bodyShape",void 0),r([X.field,s("design:type",Array)],n.prototype,"wearables",void 0),r([X.field,s("design:type",Object)],n.prototype,"skinColor",void 0),r([X.field,s("design:type",Object)],n.prototype,"hairColor",void 0),r([X.field,s("design:type",Object)],n.prototype,"eyeColor",void 0),r([X.field,s("design:type",Boolean)],n.prototype,"useDummyModel",void 0),r([X.field,s("design:type",Boolean)],n.prototype,"talking",void 0),S=r([P("engine.avatarShape",v.CLASS_ID.AVATAR_SHAPE)],n)}(X),Oo=null,Fo=null,Io=null;function Ri(){return Io||(Io=new it),Io}var Bo=function(){function t(){var v=this;this.messageQueue=[],this.connected=!1,this.flushing=!1,function(){if(!Fo){(Fo=dcl.loadModule("@decentraland/CommunicationsController",{})).then((function(v){Oo=v}));var v=Ri();dcl.subscribe("comms"),dcl.onEvent((function(T){"comms"===T.type&&v.notifyObservers(T.data)}))}return Fo}().then((function(){v.connected=!0,v.flush()}))}return t.prototype.on=function(v,T){return Ri().add((function(S){try{var C=JSON.parse(S.message);C.message===v&&T(C.payload,S.sender)}catch(S){dcl.error("Error parsing comms message "+(S.message||""),S)}}))},t.prototype.sendRaw=function(v){this.messageQueue.push(v),this.connected&&this.flush()},t.prototype.emit=function(v,T){var S=JSON.stringify({message:v,payload:T});this.sendRaw(S),Ri().notifyObservers({message:S,sender:"self"})},t.prototype.flush=function(){var v=this;if(0!==this.messageQueue.length&&this.connected&&Oo&&!this.flushing){var T=this.messageQueue.shift();this.flushing=!0,dcl.callRpc(Oo.rpcHandle,"send",[T]).then((function(T){v.flushing=!1,v.flush()}),(function(T){v.flushing=!1,y("Error flushing MessageBus",T)}))}},t}(),Mo=new Q("scene");Mo.uuid="0";var zo=new J(Mo);N.engine=zo,"undefined"!=typeof dcl&&(zo.addSystem(new Ct(dcl),1/0),mt(dcl)),zo.addSystem(to),zo.addSystem($n),zo.addSystem(Kn),v.AVATAR_OBSERVABLE="AVATAR_OBSERVABLE",v.Angle=At.Angle,v.AnimationState=rn,v.Animator=Rn,v.Arc2=At.Arc2,v.AttachToAvatar=mn,v.Attachable=T,v.AudioClip=eo,v.AudioSource=no,v.AudioStream=oo,v.AvatarModifierArea=hn,v.AvatarShape=Po,v.AvatarTexture=Hn,v.Axis=At.Axis,v.BasicMaterial=zn,v.BezierCurve=At.BezierCurve,v.Billboard=yn,v.BoxShape=vn,v.Camera=Wn,v.CameraModeArea=Gn,v.CircleShape=wn,v.Color3=At.Color3,v.Color4=At.Color4,v.Component=P,v.ComponentAdded=O,v.ComponentGroup=Z,v.ComponentRemoved=R,v.ConeShape=Sn,v.Curve3=At.Curve3,v.CylinderShape=xn,v.DEG2RAD=At.DEG2RAD,v.DisposableComponent=N,v.DisposableComponentCreated=q,v.DisposableComponentRemoved=H,v.DisposableComponentUpdated=W,v.Engine=J,v.Entity=Q,v.Epsilon=At.Epsilon,v.EventConstructor=x,v.EventManager=E,v.Font=On,v.Frustum=At.Frustum,v.GLTFShape=Cn,v.Gizmos=so,v.GlobalPointerDown=ln,v.GlobalPointerUp=dn,v.Input=un,v.Material=Mn,v.Matrix=At.Matrix,v.MessageBus=Bo,v.MultiObserver=ot,v.NFTShape=En,v.OBJShape=Pn,v.Observable=it,v.ObservableComponent=X,v.Observer=Y,v.ObserverEventState=nt,v.OnAnimationEnd=Vn,v.OnBlur=uo,v.OnChanged=ho,v.OnClick=po,v.OnEnter=co,v.OnFocus=ao,v.OnGizmoEvent=ro,v.OnPointerDown=fo,v.OnPointerHoverEnter=yo,v.OnPointerHoverExit=go,v.OnPointerLock=Ln,v.OnPointerUUIDEvent=Nn,v.OnPointerUp=mo,v.OnTextSubmit=lo,v.OnUUIDEvent=Dn,v.Orientation=At.Orientation,v.ParentChanged=B,v.Path2=At.Path2,v.Path3D=At.Path3D,v.PhysicsCast=Yn,v.Plane=At.Plane,v.PlaneShape=bn,v.PointerEvent=at,v.PointerEventComponent=Ke,v.PointerEventSystem=Qn,v.Quaternion=At.Quaternion,v.RAD2DEG=At.RAD2DEG,v.RaycastEventSystem=Zn,v.RaycastResponse=st,v.Scalar=At.Scalar,v.Shape=gn,v.Size=At.Size,v.SmartItem=kn,v.Space=At.Space,v.SphereShape=Tn,v.Subscription=en,v.TextShape=In,v.Texture=An,v.ToGammaSpace=At.ToGammaSpace,v.ToLinearSpace=At.ToLinearSpace,v.Transform=pn,v.UIButton=Co,v.UICanvas=bo,v.UIContainerRect=So,v.UIContainerStack=xo,v.UIFullScreen=To,v.UIImage=Ao,v.UIInputText=Eo,v.UIScrollRect=Ro,v.UIShape=vo,v.UIText=_o,v.UIValue=M,v.UIWorldSpace=wo,v.UUIDEvent=rt,v.UUIDEventSystem=Jn,v.Vector2=At.Vector2,v.Vector3=At.Vector3,v.Vector4=At.Vector4,v.VideoClip=Un,v.VideoTexture=qn,v._initEventObservables=mt,v.buildArray=function(v,T){for(var S=[],C=0;C<v;++C)S.push(T());return S},v.engine=zo,v.error=y,v.executeTask=G,v.getComponentClassId=L,v.getComponentId=D,v.getComponentName=F,v.getMessageObserver=Ri,v.isDisposableComponent=U,v.log=u,v.newId=f,v.onCameraModeChangedObservable=lt,v.onEnterScene=ct,v.onEnterSceneObservable=ut,v.onIdleStateChangedObservable=dt,v.onLeaveScene=pt,v.onLeaveSceneObservable=ht,v.onPlayerClickedObservable=xt,v.onPlayerConnectedObservable=wt,v.onPlayerDisconnectedObservable=bt,v.onPlayerExpressionObservable=yt,v.onPointerLockedStateChange=gt,v.onProfileChanged=Tt,v.onRealmChangedObservable=St,v.onSceneReadyObservable=ft,v.onVideoEvent=vt,v.openExternalURL=function(v){"undefined"!=typeof dcl?dcl.openExternalUrl(v):y("ERROR: openExternalURL dcl is undefined")},v.openNFTDialog=function(v,T){if(void 0===T&&(T=null),"undefined"!=typeof dcl){var S=v.match(/ethereum:\/\/(.+)\/(.+)/);if(!S||S.length<3)return;dcl.openNFTDialog(S[1],S[2],T)}else y("ERROR: openNFTDialog dcl is undefined")},v.pointerEventSystem=$n,v.raycastEventSystem=Kn,v.teleportTo=function(v){var T;T=[v],void 0===$&&"undefined"!=typeof dcl&&($=dcl.loadModule("@decentraland/UserActionModule",{})),void 0!==$&&"undefined"!=typeof dcl&&$.then((function(v){dcl.callRpc(v.rpcHandle,"requestTeleport",T)}))},v.uuid=m,v.uuidEventSystem=to,Object.defineProperty(v,"__esModule",{value:!0})}(this.self=this.self||{}),define("@dcl/ecs-scene-utils",["exports","@decentraland/EnvironmentAPI"],(function(v,T){
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var n=function(v,T){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,T){v.__proto__=T}||function(v,T){for(var S in T)Object.prototype.hasOwnProperty.call(T,S)&&(v[S]=T[S])})(v,T)};function i(v,T){function i(){this.constructor=v}n(v,T),v.prototype=null===T?Object.create(T):(i.prototype=T.prototype,new i)}function r(v,T,S,C){var E,A=arguments.length,R=A<3?T:null===C?C=Object.getOwnPropertyDescriptor(T,S):C;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(v,T,S,C);else for(var O=v.length-1;O>=0;O--)(E=v[O])&&(R=(A<3?E(R):A>3?E(T,S,R):E(T,S))||R);return A>3&&R&&Object.defineProperty(T,S,R),R}function o(v,T,S,C){return new(S||(S=Promise))((function(E,A){function a(v){try{u(C.next(v))}catch(v){A(v)}}function s(v){try{u(C.throw(v))}catch(v){A(v)}}function u(v){var T;v.done?E(v.value):(T=v.value,T instanceof S?T:new S((function(v){v(T)}))).then(a,s)}u((C=C.apply(v,T||[])).next())}))}function a(v,T){var S,C,E,A,R={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]};return A={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(A[Symbol.iterator]=function(){return this}),A;function s(A){return function(O){return function(A){if(S)throw new TypeError("Generator is already executing.");for(;R;)try{if(S=1,C&&(E=2&A[0]?C.return:A[0]?C.throw||((E=C.return)&&E.call(C),0):C.next)&&!(E=E.call(C,A[1])).done)return E;switch(C=0,E&&(A=[2&A[0],E.value]),A[0]){case 0:case 1:E=A;break;case 4:return R.label++,{value:A[1],done:!1};case 5:R.label++,C=A[1],A=[0];continue;case 7:A=R.ops.pop(),R.trys.pop();continue;default:if(!((E=(E=R.trys).length>0&&E[E.length-1])||6!==A[0]&&2!==A[0])){R=0;continue}if(3===A[0]&&(!E||A[1]>E[0]&&A[1]<E[3])){R.label=A[1];break}if(6===A[0]&&R.label<E[1]){R.label=E[1],E=A;break}if(E&&R.label<E[2]){R.label=E[2],R.ops.push(A);break}E[2]&&R.ops.pop(),R.trys.pop();continue}A=T.call(v,R)}catch(v){A=[6,v],C=0}finally{S=E=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([A,O])}}}function s(v){var T="function"==typeof Symbol&&Symbol.iterator,S=T&&v[T],C=0;if(S)return S.call(v);if(v&&"number"==typeof v.length)return{next:function(){return v&&C>=v.length&&(v=void 0),{value:v&&v[C++],done:!v}}};throw new TypeError(T?"Object is not iterable.":"Symbol.iterator is not defined.")}var S,C=function(){function e(){this._components=[],this._componentGroups=[],e._instance=this}return e.createAndAddToEngine=function(){return null==this._instance&&(this._instance=new e,engine.addSystem(this._instance)),this._instance},e.registerCustomComponent=function(v){this.createAndAddToEngine()._components.push(v)},e.prototype.addComponentType=function(v){var T,S;try{for(var C=s(this._components),E=C.next();!E.done;E=C.next())if(v==E.value)return}catch(v){T={error:v}}finally{try{E&&!E.done&&(S=C.return)&&S.call(C)}finally{if(T)throw T.error}}this._components.push(v),this._componentGroups.push(engine.getComponentGroup(v,Transform))},e.prototype.update=function(v){for(var T=0;T<this._components.length;T++)this.updateComponent(v,this._components[T],this._componentGroups[T])},e.prototype.updateComponent=function(v,T,S){S.entities.forEach((function(S){var C=S.getComponent(Transform),E=S.getComponent(T);E.update(v),E.assignValueToTransform(C),E.hasFinished()&&(S.removeComponent(E),null!=E.onFinishCallback&&E.onFinishCallback())}))},e._instance=null,e}();function h(T,S){switch(T){case v.InterpolationType.LINEAR:return S;case v.InterpolationType.EASEINQUAD:return function(v){return v*v}(S);case v.InterpolationType.EASEOUTQUAD:return function(v){return v*(2-v)}(S);case v.InterpolationType.EASEQUAD:return function(v){return v*v/(2*(v*v-v)+1)}(S);case v.InterpolationType.EASEINSINE:return function(v){return 1-Math.cos(v*Math.PI/2)}(S);case v.InterpolationType.EASEOUTSINE:return function(v){return Math.sin(v*Math.PI/2)}(S);case v.InterpolationType.EASESINE:return function(v){return-(Math.cos(Math.PI*v)-1)/2}(S);case v.InterpolationType.EASEINEXPO:return function(v){return 0===v?0:Math.pow(2,10*v-10)}(S);case v.InterpolationType.EASEOUTEXPO:return function(v){return 1===v?1:1-Math.pow(2,-10*v)}(S);case v.InterpolationType.EASEEXPO:return function(v){return 0===v?0:1===v?1:v<.5?Math.pow(2,20*v-10)/2:(2-Math.pow(2,-20*v+10))/2}(S);case v.InterpolationType.EASEINELASTIC:return function(v){var T=2*Math.PI/3;return 0===v?0:1===v?1:-Math.pow(2,10*v-10)*Math.sin((10*v-10.75)*T)}(S);case v.InterpolationType.EASEOUTELASTIC:return function(v){var T=2*Math.PI/3;return 0===v?0:1===v?1:Math.pow(2,-10*v)*Math.sin((10*v-.75)*T)+1}(S);case v.InterpolationType.EASEELASTIC:return function(v){var T=2*Math.PI/4.5;return 0===v?0:1===v?1:v<.5?-Math.pow(2,20*v-10)*Math.sin((20*v-11.125)*T)/2:Math.pow(2,-20*v+10)*Math.sin((20*v-11.125)*T)/2+1}(S);case v.InterpolationType.EASEINBOUNCE:return function(v){return 1-l(1-v)}(S);case v.InterpolationType.EASEOUTEBOUNCE:return function(v){return l(v)}(S);case v.InterpolationType.EASEBOUNCE:return function(v){return v<.5?(1-l(1-2*v))/2:(1+l(2*v-1))/2}(S);default:return S}}function l(v){var T=7.5625,S=2.75;return v<1/S?T*v*v:v<2/S?T*(v-=1.5/S)*v+.75:v<2.5/S?T*(v-=2.25/S)*v+.9375:T*(v-=2.625/S)*v+.984375}v.InterpolationType=void 0,(S=v.InterpolationType||(v.InterpolationType={}))[S.LINEAR=0]="LINEAR",S[S.EASEINQUAD=1]="EASEINQUAD",S[S.EASEOUTQUAD=2]="EASEOUTQUAD",S[S.EASEQUAD=3]="EASEQUAD",S.EASEINSINE="easeinsine",S.EASEOUTSINE="easeoutsine",S.EASESINE="easeinoutsine",S.EASEINEXPO="easeinexpo",S.EASEOUTEXPO="easeoutexpo",S.EASEEXPO="easeinoutexpo",S.EASEINELASTIC="easeinelastic",S.EASEOUTELASTIC="easeoutelastic",S.EASEELASTIC="easeinoutelastic",S.EASEINBOUNCE="easeinbounce",S.EASEOUTEBOUNCE="easeoutbounce",S.EASEBOUNCE="easeinoutbounce";var E,A=function(){function t(S,E,A,R,O){void 0===O&&(O=v.InterpolationType.LINEAR),this.start=S,this.end=E,this.normalizedTime=0,this.lerpTime=0,this.onFinishCallback=R,this.interpolationType=O,0!=A?this.speed=1/A:(this.speed=0,this.normalizedTime=1,this.lerpTime=1),C.createAndAddToEngine().addComponentType(T)}var T;return T=t,t.prototype.update=function(v){this.normalizedTime=Scalar.Clamp(this.normalizedTime+v*this.speed,0,1),this.lerpTime=h(this.interpolationType,this.normalizedTime)},t.prototype.hasFinished=function(){return this.normalizedTime>=1},t.prototype.assignValueToTransform=function(v){v.position=Vector3.Lerp(this.start,this.end,this.lerpTime)},T=r([Component("moveTransformComponent")],t)}(),R=function(){function t(S,E,A,R,O){void 0===O&&(O=v.InterpolationType.LINEAR),this.start=S,this.end=E,this.normalizedTime=0,this.lerpTime=0,this.onFinishCallback=R,this.interpolationType=O,0!=A?this.speed=1/A:(this.speed=0,this.normalizedTime=1,this.lerpTime=1),C.createAndAddToEngine().addComponentType(T)}var T;return T=t,t.prototype.update=function(v){this.normalizedTime=Scalar.Clamp(this.normalizedTime+v*this.speed,0,1),this.lerpTime=h(this.interpolationType,this.normalizedTime)},t.prototype.hasFinished=function(){return this.normalizedTime>=1},t.prototype.assignValueToTransform=function(v){v.rotation=Quaternion.Slerp(this.start,this.end,this.lerpTime)},T=r([Component("rotateTransformComponent")],t)}(),O=function(){function t(S,E,A,R,O){void 0===O&&(O=v.InterpolationType.LINEAR),this.start=S,this.end=E,this.normalizedTime=0,this.lerpTime=0,this.onFinishCallback=R,this.interpolationType=O,0!=A?this.speed=1/A:(this.speed=0,this.normalizedTime=1,this.lerpTime=1),C.createAndAddToEngine().addComponentType(T)}var T;return T=t,t.prototype.update=function(v){this.normalizedTime=Scalar.Clamp(this.normalizedTime+v*this.speed,0,1),this.lerpTime=h(this.interpolationType,this.normalizedTime)},t.prototype.hasFinished=function(){return this.normalizedTime>=1},t.prototype.assignValueToTransform=function(v){v.scale=Vector3.Lerp(this.start,this.end,this.lerpTime)},T=r([Component("scaleTransformComponent")],t)}(),B=function(){function e(T,S,E,A){if(this.speed=[],this.normalizedTime=0,this.currentIndex=0,this.points=T,this.onFinishCallback=E,this.onPointReachedCallback=A,T.length<2)throw new Error("At least 2 points are needed for FollowPathComponent.");if(S>0){for(var R=0,O=[],B=0;B<T.length-1;B++){var M=Vector3.Distance(T[B],T[B+1]);R+=M,O.push(M)}for(B=0;B<O.length;B++)this.speed.push(1/(O[B]/R*S))}else this.normalizedTime=1,this.currentIndex=T.length-2;C.createAndAddToEngine().addComponentType(v)}var v;return v=e,e.prototype.update=function(v){this.normalizedTime=Scalar.Clamp(this.normalizedTime+v*this.speed[this.currentIndex],0,1),this.normalizedTime>=1&&this.currentIndex<this.points.length-2&&(this.currentIndex++,this.normalizedTime=0,this.onPointReachedCallback&&this.currentIndex<this.points.length-1&&this.onPointReachedCallback(this.points[this.currentIndex],this.points[this.currentIndex+1]))},e.prototype.hasFinished=function(){return this.currentIndex>=this.points.length-2&&this.normalizedTime>=1},e.prototype.assignValueToTransform=function(v){v.position=Vector3.Lerp(this.points[this.currentIndex],this.points[this.currentIndex+1],this.normalizedTime)},v=r([Component("followPathComponent")],e)}(),M=function(){function e(T,S,E,A,R,O){if(this.speed=[],this.turnToFaceNext=!1,this.facingNext=!1,this.normalizedTime=0,this.currentIndex=0,this.points=Curve3.CreateCatmullRomSpline(T,E,!!R).getPoints(),this.onFinishCallback=O,this.turnToFaceNext=A||!1,this.points.length<2)throw new Error("At least 2 points are needed for FollowPathComponent.");if(S>0){for(var B=0,M=[],z=0;z<this.points.length-1;z++){var V=Vector3.Distance(this.points[z],this.points[z+1]);B+=V,M.push(V)}for(z=0;z<M.length;z++)this.speed.push(1/(M[z]/B*S))}else this.normalizedTime=1,this.currentIndex=T.length-2;C.createAndAddToEngine().addComponentType(v)}var v;return v=e,e.prototype.update=function(v){this.normalizedTime=Scalar.Clamp(this.normalizedTime+v*this.speed[this.currentIndex],0,1),this.normalizedTime>=1&&this.currentIndex<this.points.length-2&&(this.currentIndex++,this.normalizedTime=0,1==this.turnToFaceNext&&(this.facingNext=!1))},e.prototype.hasFinished=function(){return this.currentIndex>=this.points.length-2&&this.normalizedTime>=1},e.prototype.assignValueToTransform=function(v){v.position=Vector3.Lerp(this.points[this.currentIndex],this.points[this.currentIndex+1],this.normalizedTime),this.facingNext||(this.facingNext=!0,this.currentIndex<this.points.length-1?v.lookAt(this.points[this.currentIndex+1]):v.lookAt(this.points[0]))},v=r([Component("followCurvedPathComponent")],e)}(),z=function(){function e(T,S){this.rotationVelocity=T,this.onFinishCallback=S,this.rotation=Quaternion.Identity,this.finished=!1,C.createAndAddToEngine().addComponentType(v)}var v;return v=e,e.prototype.update=function(v){this.rotation=Quaternion.Slerp(Quaternion.Identity,this.rotationVelocity,v)},e.prototype.hasFinished=function(){return this.finished},e.prototype.assignValueToTransform=function(v){v.rotation=v.rotation.multiply(this.rotation)},e.prototype.stop=function(){this.finished=!0},v=r([Component("keepRotatingComponent")],e)}();v.ToggleState=void 0,(E=v.ToggleState||(v.ToggleState={}))[E.Off=0]="Off",E[E.On=1]="On";var V=function(){function t(T,S){void 0===T&&(T=v.ToggleState.On),this.enabled=!0,this.state=v.ToggleState.Off,this.set(T),S&&this.setCallback(S)}return t.prototype.set=function(v){this.state=v,this.onValueChangedCallback&&this.onValueChangedCallback(v)},t.prototype.toggle=function(){this.enabled&&this.set(1-this.state)},t.prototype.isOn=function(){return this.state==v.ToggleState.On},t.prototype.setCallback=function(v){this.onValueChangedCallback=v},r([Component("toggle")],t)}(),j=function(){function e(){this._components=[],e._instance=this}return e.createAndAddToEngine=function(){return null==this._instance&&(this._instance=new e,engine.addSystem(this._instance)),this._instance},e.registerCustomComponent=function(v){this.createAndAddToEngine()._components.push(v)},e.prototype.addComponentType=function(v){var T,S;try{for(var C=s(this._components),E=C.next();!E.done;E=C.next())if(v==E.value)return}catch(v){T={error:v}}finally{try{E&&!E.done&&(S=C.return)&&S.call(C)}finally{if(T)throw T.error}}this._components.push(v)},e.prototype.update=function(v){var T=this;this._components.forEach((function(S){T.updateComponent(v,S)}))},e.prototype.updateComponent=function(v,T){var S=engine.getEntitiesWithComponent(T);for(var C in S)if(S.hasOwnProperty(C)){var E=S[C],A=E.getComponent(T);A.elapsedTime+=v,A.elapsedTime>=A.targetTime&&A.onTargetTimeReached(E)}},e._instance=null,e}(),q=function(){function e(T,S){var C=this;j.createAndAddToEngine().addComponentType(v),this.elapsedTime=0,this.targetTime=T/1e3,this.onTimeReachedCallback=S,this.onTargetTimeReached=function(v){C.onTimeReachedCallback&&C.onTimeReachedCallback(),v.removeComponent(C)}}var v;return v=e,e.prototype.setCallback=function(v){this.onTimeReachedCallback=v},v=r([Component("timerDelay")],e)}(),H=function(){function e(T,S){var C=this;j.createAndAddToEngine().addComponentType(v),this.elapsedTime=0,this.targetTime=T/1e3,this.onTimeReachedCallback=S,this.onTargetTimeReached=function(v){C.onTimeReachedCallback&&C.onTimeReachedCallback(),v.removeComponent(C),engine.removeEntity(v)}}var v;return v=e,e.prototype.setCallback=function(v){this.onTimeReachedCallback=v},v=r([Component("timerExpireIn")],e)}(),W=function(){function e(T,S){var C=this;j.createAndAddToEngine().addComponentType(v),this.elapsedTime=0,this.targetTime=T/1e3,this.onTimeReachedCallback=S,this.onTargetTimeReached=function(){C.elapsedTime=0,C.onTimeReachedCallback&&C.onTimeReachedCallback()}}var v;return v=e,e.prototype.setCallback=function(v){this.onTimeReachedCallback=v},v=r([Component("timerInterval")],e)}();function I(v,T,S,C,E,A){var R=new Entity;R.addComponent(new Transform(A||{position:new Vector3(0,1.5,0)})),R.setParent(T);var O=new TextShape(v);return O.fontSize=E||3,O.color=C||Color3.Black(),R.addComponent(O),S&&R.addComponent(new Billboard),engine.addEntity(R),R}var X,Z,Q=function(){function e(){this._triggers={},e._instance=this,this._cameraTriggerWrapper=new K(new P(new Vector3(.5,1.8,.5),new Vector3(0,.91,0))),this._componentGroup=engine.getComponentGroup($)}return Object.defineProperty(e,"instance",{get:function(){return this.createAndAddToEngine()},enumerable:!1,configurable:!0}),e.createAndAddToEngine=function(){return null==this._instance&&(this._instance=new e,engine.addSystem(this._instance)),this._instance},e.prototype.setCameraTriggerShape=function(v){this._cameraTriggerWrapper.setShape(v)},e.prototype.update=function(){var v=this,T=this._componentGroup.entities;for(var S in T.forEach((function(T){v.shouldWrapTriggerEntity(T)&&v.wrapTriggerEntity(T)})),this._triggers)if(this._triggers.hasOwnProperty(S)){var C=this._triggers[S];C.isDebugging()&&C.updateDebugEntity(),C.isInEngine()?null!=C.trigger&&C.trigger.enabled?(C.wasEnabled||C.isDebugging()&&C.addDebugEntity(),C.wasEnabled=!0,(C.trigger.onCameraEnter||C.trigger.onCameraExit)&&this.checkCollisionAgainstCamera(C),(C.trigger.onTriggerEnter||C.trigger.onTriggerExit)&&this.checkCollisionAgainstOtherTriggers(C)):C.wasEnabled&&(C.wasEnabled=!1,C.isDebugging()&&C.removeDebugEntity(),e.removeTriggerFromSystem(C)):(C.isDebugging()&&C.removeDebugEntity(),e.removeTriggerFromSystem(C),delete this._triggers[S])}},e.prototype.shouldWrapTriggerEntity=function(v){return null==this._triggers[v.uuid]||null==this._triggers[v.uuid]},e.prototype.wrapTriggerEntity=function(v){this._triggers[v.uuid]=new J(v)},e.removeTriggerFromSystem=function(v){for(var T,S=v.getActiveCollisions(),C=0;C<S.length;C++)!(S[C]===(null===(T=e._instance)||void 0===T?void 0:T._cameraTriggerWrapper)||null==S[C].trigger)&&S[C].trigger.onTriggerExit&&v.entity&&S[C].trigger.onTriggerExit(v.entity),S[C].disengageActiveCollision(v),v.disengageActiveCollision(S[C])},e.disengageCollision=function(v,T){v.disengageActiveCollision(T),T.disengageActiveCollision(v),v.trigger.onTriggerExit&&T.entity&&v.trigger.onTriggerExit(T.entity),T.trigger.onTriggerExit&&v.entity&&T.trigger.onTriggerExit(v.entity)},e.engageCollision=function(v,T){v.engageCollision(T),T.engageCollision(v),v.trigger.onTriggerEnter&&T.entity&&v.trigger.onTriggerEnter(T.entity),T.trigger.onTriggerEnter&&v.entity&&T.trigger.onTriggerEnter(v.entity)},e.prototype.checkCollisionAgainstCamera=function(v){var T=v.hasActiveCollision(this._cameraTriggerWrapper),S=e.areColliding(v,this._cameraTriggerWrapper);T&&!S?(v.disengageActiveCollision(this._cameraTriggerWrapper),v.trigger.onCameraExit&&v.trigger.onCameraExit()):!T&&S&&(v.engageCollision(this._cameraTriggerWrapper),v.trigger.onCameraEnter&&v.trigger.onCameraEnter())},e.prototype.checkCollisionAgainstOtherTriggers=function(v){for(var T in this._triggers)if(this._triggers.hasOwnProperty(T)&&T!=v.uuid&&this._triggers[T].trigger.enabled&&e.canTriggersCollide(v,this._triggers[T])){var S=v.hasActiveCollision(this._triggers[T]),C=e.areColliding(v,this._triggers[T]);S&&!C?e.disengageCollision(v,this._triggers[T]):!S&&C&&e.engageCollision(v,this._triggers[T])}},e.canTriggersCollide=function(v,T){return 0==v.trigger.triggeredByLayer||0!=(T.trigger.layer&v.trigger.triggeredByLayer)},e.areColliding=function(v,T){return v.getShape()instanceof P&&T.getShape()instanceof P?e.areCollidingAABB(v.getGlobalPosition(),v.getShape(),T.getGlobalPosition(),T.getShape()):v.getShape()instanceof k&&T.getShape()instanceof k?e.areCollidingSphere(v.getGlobalPosition(),v.getShape(),T.getGlobalPosition(),T.getShape()):v.getShape()instanceof P&&T.getShape()instanceof k?e.areCollidingAABBSphere(v.getGlobalPosition(),v.getShape(),T.getGlobalPosition(),T.getShape()):v.getShape()instanceof k&&T.getShape()instanceof P&&e.areCollidingAABBSphere(T.getGlobalPosition(),T.getShape(),v.getGlobalPosition(),v.getShape())},e.areCollidingAABB=function(v,T,S,C){var E=e.getBoxShapeValues(v,T),A=e.getBoxShapeValues(S,C);return E.min.x<=A.max.x&&E.max.x>=A.min.x&&E.min.y<=A.max.y&&E.max.y>=A.min.y&&E.min.z<=A.max.z&&E.max.z>=A.min.z},e.areCollidingSphere=function(v,T,S,C){return Vector3.DistanceSquared(v.add(T.position),S.add(C.position))<T.radius*T.radius+C.radius*C.radius},e.areCollidingAABBSphere=function(v,T,S,C){var E=e.getBoxShapeValues(v,T),A=S.add(C.position),R=C.radius,O=0;return A.x<E.min.x&&(O+=(E.min.x-A.x)*(E.min.x-A.x)),A.x>E.max.x&&(O+=(A.x-E.max.x)*(A.x-E.max.x)),A.y<E.min.y&&(O+=(E.min.y-A.y)*(E.min.y-A.y)),A.y>E.max.y&&(O+=(A.y-E.max.y)*(A.y-E.max.y)),A.z<E.min.z&&(O+=(E.min.z-A.z)*(E.min.z-A.z)),A.z>E.max.z&&(O+=(A.z-E.max.z)*(A.z-E.max.z)),O<R*R},e.getBoxShapeValues=function(v,T){var S=v.add(T.position);return{center:S,min:S.subtract(T.size.scale(.5)),max:S.add(T.size.scale(.5))}},e._instance=null,e}(),J=function(){function e(v){this.wasEnabled=!0,this._uuid="",this._collidingWith={},this._isDebug=!1,this._debugEntity=null,this._entity=v,v&&(this._trigger=v.getComponent($),this._uuid=v.uuid,this._isDebug=this._trigger.debugEnabled,this._isDebug&&this.addDebugEntity())}return Object.defineProperty(e.prototype,"entity",{get:function(){return this._entity},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trigger",{get:function(){return this._trigger},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uuid",{get:function(){return this._uuid},enumerable:!1,configurable:!0}),e.prototype.getGlobalPosition=function(){return this._entity?e.getEntityWorldPosition(this._entity):Vector3.Zero()},e.prototype.getShape=function(){return this._trigger.shape},e.prototype.isInEngine=function(){return null!=this._entity&&this._entity.isAddedToEngine()},e.prototype.getActiveCollisions=function(){var v=[];for(var T in this._collidingWith)this._collidingWith.hasOwnProperty(T)&&v.push(this._collidingWith[T]);return v},e.prototype.hasActiveCollision=function(v){return null!=this._collidingWith[v.uuid]&&null!=this._collidingWith[v.uuid]},e.prototype.disengageActiveCollision=function(v){delete this._collidingWith[v.uuid]},e.prototype.engageCollision=function(v){this._collidingWith[v.uuid]=v},e.prototype.isDebugging=function(){return this._isDebug},e.prototype.addDebugEntity=function(){return o(this,void 0,void 0,(function(){var v,S,C;return a(this,(function(E){switch(E.label){case 0:return[4,!T.isPreviewMode()];case 1:return E.sent()||(e._debugMaterial||(e._debugMaterial=new Material,e._debugMaterial.alphaTest=.5),null==this._debugEntity&&(this._debugEntity=new Entity,v=new Transform,this._debugEntity.addComponent(v),this._debugEntity.addComponent(e._debugMaterial),this.getShape()instanceof P&&((S=new BoxShape).withCollisions=!1,this._debugEntity.addComponent(S),v.scale=this.getShape().size),this.getShape()instanceof k&&((S=new SphereShape).withCollisions=!1,this._debugEntity.addComponent(S),C=this.getShape().radius,v.scale=new Vector3(C,C,C))),engine.addEntity(this._debugEntity)),[2]}}))}))},e.prototype.removeDebugEntity=function(){null!=this._debugEntity&&engine.removeEntity(this._debugEntity)},e.prototype.updateDebugEntity=function(){this._debugEntity&&(this._debugEntity.getComponent(Transform).position=this.getGlobalPosition().add(this.getShape().position))},e.getEntityWorldPosition=function(v){var T=v.hasComponent(Transform)?v.getComponent(Transform).position.clone():Vector3.Zero(),S=v.getParent();if(null!=S){var C=S.hasComponent(Transform)?S.getComponent(Transform).rotation:Quaternion.Identity;return this.getEntityWorldPosition(S).add(T.rotate(C))}return T},e._debugMaterial=null,e}(),K=function(v){function t(T){var S=v.call(this)||this;return S._shape=T,S._uuid="cameraTrigger",S}return i(t,v),t.prototype.getGlobalPosition=function(){return Camera.instance.position},t.prototype.getShape=function(){return this._shape},t.prototype.setShape=function(v){this._shape=v},t.prototype.isInEngine=function(){return!1},t.prototype.hasActiveCollision=function(v){return!1},t.prototype.disengageActiveCollision=function(v){},t.prototype.engageCollision=function(v){},t.prototype.isDebugging=function(){return!1},t}(J),$=function(){function e(v,T){this.enabled=!0,this.layer=0,this.triggeredByLayer=0,this._debugEnabled=!1,Q.createAndAddToEngine(),this.shape=v,T&&(T.layer&&(this.layer=T.layer),T.triggeredByLayer&&(this.triggeredByLayer=T.triggeredByLayer),T.onTriggerEnter&&(this.onTriggerEnter=T.onTriggerEnter),T.onTriggerExit&&(this.onTriggerExit=T.onTriggerExit),T.onCameraEnter&&(this.onCameraEnter=T.onCameraEnter),T.onCameraExit&&(this.onCameraExit=T.onCameraExit),T.enableDebug&&(this._debugEnabled=T.enableDebug))}return Object.defineProperty(e.prototype,"debugEnabled",{get:function(){return this._debugEnabled},enumerable:!1,configurable:!0}),r([Component("triggerComponent")],e)}(),P=function(v,T){void 0===v&&(v=Vector3.One().scale(2)),void 0===T&&(T=Vector3.Zero()),this.size=v,this.position=T},k=function(v,T){void 0===v&&(v=2),void 0===T&&(T=Vector3.Zero()),this.radius=v,this.position=T};v.ActionsSequenceSystem=function(){function e(v){this.beginSequenceNode=null,this.currentSequenceNode=null,this.running=!1,this.started=!1,v&&this.startSequence(v)}return e.prototype.startSequence=function(v){this.beginSequenceNode=v.beginSequenceNode,this.currentSequenceNode=this.beginSequenceNode,this.running=!0,this.started=!1},e.prototype.setOnFinishCallback=function(v){this.onFinishCallback=v},e.prototype.isRunning=function(){return this.running},e.prototype.stop=function(){this.running=!1},e.prototype.resume=function(){null!=this.beginSequenceNode&&(this.running=!0)},e.prototype.reset=function(){this.currentSequenceNode=this.beginSequenceNode,this.running=!0,this.started=!1},e.prototype.getRunningAction=function(){var v=this.currentSequenceNode;if(this.currentSequenceNode instanceof nt)do{v=v.currentInnerSequence}while(v instanceof nt);return v.action},e.prototype.update=function(v){this.running&&(this.started?this.currentSequenceNode.hasFinish()?(this.currentSequenceNode.onFinish(),this.currentSequenceNode=this.currentSequenceNode.next,this.currentSequenceNode?this.currentSequenceNode.onStart():(this.running=!1,this.onFinishCallback&&this.onFinishCallback())):this.currentSequenceNode.update(v):(this.currentSequenceNode.onStart(),this.started=!0))},e}(),X=v.ActionsSequenceSystem||(v.ActionsSequenceSystem={}),Z=function(){function e(){this.currentSequenceNode=null,this.beginSequenceNode=null,this.whileNodeStack=[]}return e.prototype.then=function(v){if(null==this.currentSequenceNode)this.currentSequenceNode=new et,this.currentSequenceNode.action=v,this.beginSequenceNode=this.currentSequenceNode;else{var T=new et;T.action=v,this.currentSequenceNode=this.currentSequenceNode.then(T)}return this},e.prototype.if=function(v){var T=new ot(v);return null==this.currentSequenceNode?(this.currentSequenceNode=T,this.beginSequenceNode=T):this.currentSequenceNode=this.currentSequenceNode.then(T),this},e.prototype.else=function(){var v=this.currentSequenceNode.getSequence();if(!(v instanceof ot))throw new Error("IF statement is needed to be called before ELSE statement.");v.closed=!0;var T=new it(v);return this.currentSequenceNode=this.currentSequenceNode.then(T),this},e.prototype.endIf=function(){var v=this.currentSequenceNode.getSequence();if(!(v instanceof ot||v instanceof it))throw new Error("IF statement is needed to be called before ENDIF statement.");return v.closed=!0,this},e.prototype.while=function(v){var T=new rt(v);return null==this.currentSequenceNode?(this.currentSequenceNode=T,this.beginSequenceNode=T):this.currentSequenceNode=this.currentSequenceNode.then(T),this.whileNodeStack.push(T),this},e.prototype.endWhile=function(){var v=this.currentSequenceNode.getSequence();if(!(v instanceof rt))throw new Error("WHILE statement is needed to be called before ENDWHILE statement.");return v.closed=!0,this.whileNodeStack.length>0&&this.whileNodeStack.splice(this.whileNodeStack.length-1,1),this},e.prototype.breakWhile=function(){if(!(this.whileNodeStack.length>0))throw new Error("WHILE statement is needed to be called before BREAKWHILE statement.");return this.currentSequenceNode=this.currentSequenceNode.then(new st(this.whileNodeStack[this.whileNodeStack.length-1])),this},e}(),X.SequenceBuilder=Z;var et=function(){function e(){this.action=null,this.next=null}return e.prototype.then=function(v){return this.next=v,v},e.prototype.onStart=function(){this.action&&this.action.onStart()},e.prototype.update=function(v){this.action&&this.action.update(v)},e.prototype.onFinish=function(){this.action&&this.action.onFinish()},e.prototype.hasFinish=function(){return!this.action||this.action.hasFinished},e.prototype.getSequence=function(){return this},e}(),nt=function(v){function t(){var T=null!==v&&v.apply(this,arguments)||this;return T.currentInnerSequence=null,T.startingInnerSequence=null,T.closed=!1,T}return i(t,v),t.prototype.then=function(v){if(null==this.currentInnerSequence)this.currentInnerSequence=v,this.startingInnerSequence=v;else{if(this.closed)return this.next=v,v;this.currentInnerSequence=this.currentInnerSequence.then(v)}return this},t.prototype.onStart=function(){this.currentInnerSequence=this.startingInnerSequence,this.currentInnerSequence&&this.currentInnerSequence.onStart()},t.prototype.update=function(v){this.currentInnerSequence&&(this.currentInnerSequence.hasFinish()?(this.currentInnerSequence.onFinish(),this.currentInnerSequence=this.currentInnerSequence.next,this.currentInnerSequence&&this.currentInnerSequence.onStart()):this.currentInnerSequence.update(v))},t.prototype.onFinish=function(){this.currentInnerSequence&&this.currentInnerSequence.onFinish()},t.prototype.hasFinish=function(){return null==this.currentInnerSequence},t.prototype.getSequence=function(){if(this.currentInnerSequence){var v=this.currentInnerSequence.getSequence();if(v instanceof t&&!v.closed)return v}return this},t}(et),ot=function(v){function t(T){var S=v.call(this)||this;return S.result=!1,S.condition=T,S}return i(t,v),t.prototype.onStart=function(){this.result=this.condition(),this.result?v.prototype.onStart.call(this):this.currentInnerSequence=null},t}(nt),it=function(v){function t(T){var S=v.call(this)||this;return S.ifSequence=null,S.ifSequence=T,S}return i(t,v),t.prototype.onStart=function(){this.ifSequence&&!this.ifSequence.result?v.prototype.onStart.call(this):this.currentInnerSequence=null},t}(nt),rt=function(v){function t(T){var S=v.call(this)||this;return S.breakWhile=!1,S.condition=T,S}return i(t,v),t.prototype.onStart=function(){this.breakWhile=!1,this.condition()?v.prototype.onStart.call(this):this.currentInnerSequence=null},t.prototype.update=function(v){this.currentInnerSequence&&(this.currentInnerSequence.hasFinish()?(this.currentInnerSequence.onFinish(),this.currentInnerSequence=this.currentInnerSequence.next,null==this.currentInnerSequence&&(this.currentInnerSequence=this.startingInnerSequence),this.currentInnerSequence&&this.currentInnerSequence.onStart()):this.currentInnerSequence.update(v))},t.prototype.hasFinish=function(){return this.breakWhile||!this.condition()},t}(nt),st=function(v){function t(T){var S=v.call(this)||this;return S.whileNode=T,S}return i(t,v),t.prototype.onStart=function(){this.whileNode.breakWhile=!0},t}(et);v.Delay=q,v.ExpireIn=H,v.FollowCurvedPathComponent=M,v.FollowPathComponent=B,v.Interpolate=h,v.Interval=W,v.KeepRotatingComponent=z,v.MoveTransformComponent=A,v.RotateTransformComponent=R,v.ScaleTransformComponent=O,v.SequenceNode=et,v.ToggleComponent=V,v.TransformSystem=C,v.TriggerBoxShape=P,v.TriggerComponent=$,v.TriggerSphereShape=k,v.TriggerSystem=Q,v.addLabel=I,v.addOneTimeTrigger=function(v,T,S){var C=!1,E=!1,A=new Entity;A.addComponent(new Transform({}));var R={};return T.layer&&(R.layer=T.layer),T.triggeredByLayer&&(R.triggeredByLayer=T.triggeredByLayer),T.onCameraEnter&&(R.onCameraEnter=function(){C||(C=!0,T.onCameraEnter()),!C&&T.onCameraEnter||!E&&T.onCameraExit||engine.removeEntity(A)}),T.onCameraExit&&(R.onCameraExit=function(){E||(E=!0,T.onCameraExit()),!C&&T.onCameraEnter||!E&&T.onCameraExit||engine.removeEntity(A)}),T.enableDebug&&(R.enableDebug=T.enableDebug),A.addComponent(new $(v,R)),S&&A.setParent(S),engine.addEntity(A),A},v.addTestCube=function(v,S,C,E,A,R,O){return o(this,void 0,void 0,(function(){var B,M,z;return a(this,(function(V){switch(V.label){case 0:return(B=!O)?[4,!T.isPreviewMode()]:[3,2];case 1:B=V.sent(),V.label=2;case 2:return B?[2]:((M=new Entity).addComponent(new Transform(v)),A?(M.addComponent(new SphereShape),M.getComponent(Transform).scale.setAll(.5)):M.addComponent(new BoxShape),engine.addEntity(M),M.addComponent(new OnPointerDown(S,{hoverText:C||"click",button:ActionButton.POINTER})),E&&((z=new Material).albedoColor=E,M.addComponent(z)),R&&(M.getComponent(BoxShape).withCollisions=!1),C&&I(C,M,!0),[2,M])}}))}))},v.clamp=function(v,T,S){var C=v;return v>S?C=S:v<T&&(C=T),C},v.getEntityWorldPosition=function e(v){var T=v.hasComponent(Transform)?v.getComponent(Transform).position.clone():Vector3.Zero(),S=v.getParent();if(null!=S&&"0"!=S.uuid){if("FirstPersonCameraEntityReference"==S.uuid){var C=Camera.instance.rotation.clone();return Camera.instance.position.clone().add(T.rotate(C))}if("AvatarEntityReference"==S.uuid){var E=Camera.instance.rotation;return C=Quaternion.Euler(0,E.eulerAngles.y,0),Camera.instance.position.clone().add(T.rotate(C)).add(new Vector3(0,-.875,0))}return C=S.hasComponent(Transform)?S.getComponent(Transform).rotation:Quaternion.Identity,e(S).add(T.rotate(C))}return T},v.getEntityWorldRotation=function e(v){var T=v.hasComponent(Transform)?v.getComponent(Transform).rotation.clone():Quaternion.Zero(),S=v.getParent();if(null!=S&&"0"!=S.uuid){if("FirstPersonCameraEntityReference"==S.uuid){var C=Camera.instance.rotation.clone();return T.multiply(C)}return"AvatarEntityReference"==S.uuid?(C=Quaternion.Euler(0,Camera.instance.rotation.eulerAngles.y,0),T.multiply(C)):(C=e(S),T.multiply(C))}return T},v.map=function(v,T,S,C,E){return(v-T)/(S-T)*(E-C)+C},v.sendRequest=function(v,T,S,C){return o(this,void 0,void 0,(function(){var E,A,R;return a(this,(function(O){switch(O.label){case 0:return O.trys.push([0,6,,7]),E={method:T||"GET"},S&&(E.headers=S),C&&(E.body=JSON.stringify(C)),[4,fetch(v,E)];case 1:A=O.sent(),O.label=2;case 2:return O.trys.push([2,4,,5]),[4,A.json()];case 3:return[2,O.sent()];case 4:return O.sent(),[2,A];case 5:return[3,7];case 6:return R=O.sent(),log("error fetching from ",v," : ",R),[3,7];case 7:return[2]}}))}))},v.setTimeout=function(v,T){var S=new Entity;return S.addComponent(new q(v,(function(){T(),engine.removeEntity(S)}))),engine.addEntity(S),S},Object.defineProperty(v,"__esModule",{value:!0})})),define("@dcl/builder-hud",["exports","@decentraland/EnvironmentAPI"],(function(v,T){function e(v,T,S,C){return new(S||(S=Promise))((function(E,A){function a(v){try{r(C.next(v))}catch(v){A(v)}}function h(v){try{r(C.throw(v))}catch(v){A(v)}}function r(v){var T;v.done?E(v.value):(T=v.value,T instanceof S?T:new S((function(v){v(T)}))).then(a,h)}r((C=C.apply(v,T||[])).next())}))}function n(v,T){var S,C,E,A,R={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]};return A={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(A[Symbol.iterator]=function(){return this}),A;function h(A){return function(O){return function(A){if(S)throw new TypeError("Generator is already executing.");for(;R;)try{if(S=1,C&&(E=2&A[0]?C.return:A[0]?C.throw||((E=C.return)&&E.call(C),0):C.next)&&!(E=E.call(C,A[1])).done)return E;switch(C=0,E&&(A=[2&A[0],E.value]),A[0]){case 0:case 1:E=A;break;case 4:return R.label++,{value:A[1],done:!1};case 5:R.label++,C=A[1],A=[0];continue;case 7:A=R.ops.pop(),R.trys.pop();continue;default:if(!((E=(E=R.trys).length>0&&E[E.length-1])||6!==A[0]&&2!==A[0])){R=0;continue}if(3===A[0]&&(!E||A[1]>E[0]&&A[1]<E[3])){R.label=A[1];break}if(6===A[0]&&R.label<E[1]){R.label=E[1],E=A;break}if(E&&R.label<E[2]){R.label=E[2],R.ops.push(A);break}E[2]&&R.ops.pop(),R.trys.pop();continue}A=T.call(v,R)}catch(v){A=[6,v],C=0}finally{S=E=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([A,O])}}}var S=function(){function t(v,T,S){this.direction=v,this.mode=T,this.pos=S||0}return t=function(v,T,S,C){var E,A=arguments.length,R=A<3?T:null===C?C=Object.getOwnPropertyDescriptor(T,S):C;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(v,T,S,C);else for(var O=v.length-1;O>=0;O--)(E=v[O])&&(R=(A<3?E(R):A>3?E(T,S,R):E(T,S))||R);return A>3&&R&&Object.defineProperty(T,S,R),R}([Component("moving")],t),t}(),C=engine.getComponentGroup(S),E=function(){function t(){this.positions=[]}return t.prototype.addCameraPosition=function(v){this.positions.push(v),log(this.positions)},t.prototype.update=function(){var v,T;try{for(var E=function(v){var T="function"==typeof Symbol&&Symbol.iterator,S=T&&v[T],C=0;if(S)return S.call(v);if(v&&"number"==typeof v.length)return{next:function(){return v&&C>=v.length&&(v=void 0),{value:v&&v[C++],done:!v}}};throw new TypeError(T?"Object is not iterable.":"Symbol.iterator is not defined.")}(C.entities),A=E.next();!A.done;A=E.next()){var R=A.value,O=R.getComponent(Transform).position,B=R.getComponent(S).direction;switch(R.getComponent(S).mode){case"fixed":var M=R.getComponent(Transform).position.clone(),z=R.getComponent(S).pos;Vector3.Distance(M,this.positions[z])<.05?R.removeComponent(S):R.getComponent(Transform).position=Vector3.Lerp(M,this.positions[z],.04);break;case"free":"up"==B&&O.y<150&&(O.y+=.1),"down"==B&&(O.y>.2?O.y-=.1:R.removeComponent(S)),"forward"==B&&(O.z+=.1),"back"==B&&(O.z>1?O.z-=.1:R.removeComponent(S)),"right"==B&&(O.x+=.1),"left"==B&&(O.x>1?O.x-=.1:R.removeComponent(S))}}}catch(T){v={error:T}}finally{try{A&&!A.done&&(T=E.return)&&T.call(E)}finally{if(v)throw v.error}}},t}(),A=function(){function t(){var v=this;this.isSetup=!1,this.entities=[],this.numEntities=0,this.selectedEntityIndex=-1,this.selectionPointerScale=1,this.selectionPointerElevation=1,this.newEntityScale=.1,this.modePOSITION=0,this.modeROTATION=1,this.modeSCALE=2,this.mode=this.modePOSITION,this.snap=0,this.snapPosScale=1,this.snapRot=90,this.uiMaximized=!1,this.engineEntities=[],this.showingColliders=!1,this.transparent=new Texture("https://lsnft.mypinata.cloud/ipfs/QmaqcRuouE6Tip9acZmjxMyBftEA5aHASRDjn8Bmad87Ld"),this.scaffoldScale=new Vector3(1.2,1,1.2),this.transparentMat=new BasicMaterial,this.transparentMat.alphaTest=1,this.transparentMat.texture=this.transparent,this.scaffolding=new Entity,this.scaffolding.addComponent(new Transform({position:new Vector3(1,.3,1),scale:Vector3.Zero()})),engine.addEntity(this.scaffolding);var S=new Entity;S.addComponent(new Transform({position:new Vector3(-.5,1,-.5),scale:Vector3.One()})),S.setParent(this.scaffolding);var C=new Entity;C.addComponent(new BoxShape),C.addComponent(new Transform({position:new Vector3(2,0,.1),scale:new Vector3(4,.1,.1)})),C.setParent(S),C.getComponent(BoxShape).withCollisions=!1,C.addComponent(new Material),C.getComponent(Material).albedoColor=Color4.Red();var A=new Entity;A.addComponent(new TextShape("X")),A.addComponent(new Transform({position:new Vector3(3,.5,.4)})),A.addComponent(new Billboard(!1,!0,!1)),A.setParent(S);var R=new Entity;R.addComponent(new BoxShape),R.addComponent(new Transform({position:new Vector3(.1,2,.1),scale:new Vector3(.1,4,.1)})),R.setParent(S),R.getComponent(BoxShape).withCollisions=!1,R.addComponent(new Material),R.getComponent(Material).albedoColor=Color4.Green();var B=new Entity;B.addComponent(new TextShape("Y")),B.addComponent(new Transform({position:new Vector3(.5,3,.5)})),B.addComponent(new Billboard(!1,!0,!1)),B.setParent(S);var M=new Entity;M.addComponent(new BoxShape),M.addComponent(new Transform({position:new Vector3(.1,0,2),scale:new Vector3(.1,.1,4)})),M.setParent(S),M.addComponent(new Material),M.getComponent(BoxShape).withCollisions=!1,M.getComponent(Material).albedoColor=Color4.Blue();var z=new Entity;z.addComponent(new TextShape("Z")),z.addComponent(new Transform({position:new Vector3(.4,1,4)})),z.addComponent(new Billboard(!1,!0,!1)),z.setParent(S),this.scaffloor=new Entity,this.scaffloor.addComponent(new PlaneShape),this.scaffloor.addComponent(new Transform({position:new Vector3(0,0,0),rotation:Quaternion.Euler(90,0,0),scale:Vector3.One()})),this.scaffloor.addComponent(new Material),engine.addEntity(this.scaffloor),this.scaffloor.setParent(this.scaffolding),this.leftWall=new Entity,this.leftWall.addComponent(new PlaneShape),this.leftWall.addComponent(new Transform({position:new Vector3(0,-4.5,.6),rotation:Quaternion.Euler(0,180,0),scale:Vector3.Zero()})),this.leftWall.addComponent(this.transparentMat),this.leftWall.setParent(this.scaffolding),this.rightWall=new Entity,this.rightWall.addComponent(new PlaneShape),this.rightWall.addComponent(new Transform({position:new Vector3(0,-4.5,-.6),rotation:Quaternion.Euler(0,180,0),scale:Vector3.Zero()})),this.rightWall.addComponent(this.transparentMat),this.rightWall.setParent(this.scaffolding),this.frontWall=new Entity,this.frontWall.addComponent(new PlaneShape),this.frontWall.addComponent(new Transform({position:new Vector3(.6,-4.5,0),rotation:Quaternion.Euler(0,270,0),scale:Vector3.Zero()})),this.frontWall.addComponent(this.transparentMat),this.frontWall.setParent(this.scaffolding),this.backWall=new Entity,this.backWall.addComponent(new PlaneShape),this.backWall.addComponent(new Transform({position:new Vector3(-.6,-4.5,0),rotation:Quaternion.Euler(0,270,0),scale:Vector3.One()})),this.backWall.addComponent(this.transparentMat),this.backWall.setParent(this.scaffolding),this.selectionPointer=new Entity,this.selectionPointer.addComponent(new PlaneShape),this.selectionPointer.getComponent(PlaneShape).withCollisions=!1,this.selectionPointer.addComponent(new BasicMaterial),this.selectionPointer.getComponent(BasicMaterial).texture=new Texture("https://lsnft.mypinata.cloud/ipfs/QmWbKQtJjsLjgDFinoH6fvmbUoetLZd7LanChC1R4QkA2e"),this.selectionPointer.addComponent(new Transform({rotation:Quaternion.Euler(0,0,180),scale:Vector3.One()})),this.selectionPointer.addComponent(new Billboard(!1,!0,!1)),this.setupUI(),executeTask((function(){return e(v,void 0,void 0,(function(){return n(this,(function(v){switch(v.label){case 0:return[4,T.isPreviewMode()];case 1:return v.sent()?(log("in preview mode"),O.uiMinimizedContainer.visible=!0):(log("not in preview mode"),O.uiMinimizedContainer.visible=!1,O.uiMaximizedContainer.visible=!1,engine.removeEntity(this.selectionPointer)),[2]}}))}))})),this.unsavedContainer=new UIContainerRect(this.uiMaximizedContainer),this.unsavedContainer.hAlign="center",this.unsavedContainer.vAlign="center",this.unsavedContainer.width=160,this.unsavedContainer.height=20,this.unsavedContainer.positionY=225,this.unsavedContainer.positionX=0,this.unsavedContainer.color=Color4.Red(),this.unsavedContainer.visible=!1;var V=new UIText(this.unsavedContainer);V.hAlign="center",V.vAlign="center",V.positionY=0,V.positionX=0,V.height=10,V.fontSize=12,V.hTextAlign="center",V.value="** Unsaved Changes **",this.movingSystem=new E,engine.addSystem(this.movingSystem)}return t.prototype.setDefaultParent=function(v){this.defaultParent=v},t.prototype.setupUI=function(){return e(this,void 0,void 0,(function(){var v,T,S,C,E=this;return n(this,(function(A){return this.isSetup=!0,v=new Texture("https://lsnft.mypinata.cloud/ipfs/QmYyDWc67svskJWxQrZNJxjwNsvsXyG9dvVzXvJtYtmgAr"),this.canvas=new UICanvas,this.canvas.hAlign="center",this.canvas.vAlign="bottom",this.uiMinimizedContainer=new UIContainerRect(this.canvas),this.uiMinimizedContainer.hAlign="right",this.uiMinimizedContainer.vAlign="bottom",this.uiMinimizedContainer.width=70,this.uiMinimizedContainer.height=80,this.uiMinimizedContainer.positionY=100,this.uiMinimizedContainer.positionX=0,this.uiMinimizedContainer.color=new Color4(0,0,0,0),this.uiMinimizedContainer.visible=!1,this.maximizeButton=new UIImage(this.uiMinimizedContainer,v),this.maximizeButton.sourceLeft=826,this.maximizeButton.sourceTop=544,this.maximizeButton.sourceWidth=74,this.maximizeButton.sourceHeight=74,this.maximizeButton.hAlign="right",this.maximizeButton.vAlign="bottom",this.maximizeButton.positionX=-15,this.maximizeButton.positionY=30,this.maximizeButton.width=40,this.maximizeButton.height=40,this.maximizeButton.isPointerBlocker=!0,this.maximizeButton.onClick=new OnClick((function(){E.maximizeUI()})),this.uiMaximizedContainer=new UIContainerRect(this.canvas),this.uiMaximizedContainer.hAlign="right",this.uiMaximizedContainer.vAlign="bottom",this.uiMaximizedContainer.width=160,this.uiMaximizedContainer.height=430,this.uiMaximizedContainer.positionX=0,this.uiMaximizedContainer.positionY=100,this.uiMaximizedContainer.color=new Color4(0,0,0,.75),(T=new UIImage(this.uiMaximizedContainer,v)).sourceLeft=826,T.sourceTop=184,T.sourceWidth=74,T.sourceHeight=74,T.hAlign="right",T.vAlign="top",T.positionX=-60,T.positionY=-10,T.width=40,T.height=40,T.isPointerBlocker=!0,T.onClick=new OnClick((function(){E.toggleLift.sourceLeft=503,E.toggleColliders(!0),engine.addSystem(new B(T))})),this.toggleLift=new UIImage(this.uiMaximizedContainer,v),this.toggleLift.sourceLeft=584,this.toggleLift.sourceTop=544,this.toggleLift.sourceWidth=74,this.toggleLift.sourceHeight=74,this.toggleLift.hAlign="right",this.toggleLift.vAlign="top",this.toggleLift.positionX=-15,this.toggleLift.positionY=-10,this.toggleLift.width=40,this.toggleLift.height=40,this.toggleLift.isPointerBlocker=!0,this.toggleLift.onClick=new OnClick((function(){E.toggleColliders(!1),engine.addSystem(new B(E.toggleLift))})),this.toggleCamera=new UIImage(this.uiMaximizedContainer,v),this.toggleCamera.sourceLeft=16,this.toggleCamera.sourceTop=94,this.toggleCamera.sourceWidth=74,this.toggleCamera.sourceHeight=74,this.toggleCamera.hAlign="right",this.toggleCamera.vAlign="top",this.toggleCamera.positionX=-105,this.toggleCamera.positionY=-10,this.toggleCamera.width=40,this.toggleCamera.height=40,this.toggleCamera.isPointerBlocker=!0,this.toggleCamera.onClick=new OnClick((function(){E.toggleCameraOptions(),engine.addSystem(new B(E.toggleCamera))})),this.toggleCamera.visible=!1,this.scaffoldB=new UIImage(this.uiMaximizedContainer,v),this.scaffoldB.sourceLeft=340,this.scaffoldB.sourceTop=544,this.scaffoldB.sourceWidth=74,this.scaffoldB.sourceHeight=74,this.scaffoldB.hAlign="right",this.scaffoldB.vAlign="bottom",this.scaffoldB.positionX=-105,this.scaffoldB.positionY=335,this.scaffoldB.width=40,this.scaffoldB.height=40,this.scaffoldB.isPointerBlocker=!0,this.scaffoldB.onClick=new OnClick((function(){E.moveScaffold("q"),engine.addSystem(new B(E.scaffoldB))})),this.scaffoldU=new UIImage(this.uiMaximizedContainer,v),this.scaffoldU.sourceLeft=178,this.scaffoldU.sourceTop=544,this.scaffoldU.sourceWidth=74,this.scaffoldU.sourceHeight=74,this.scaffoldU.hAlign="right",this.scaffoldU.vAlign="bottom",this.scaffoldU.positionX=-60,this.scaffoldU.positionY=335,this.scaffoldU.width=40,this.scaffoldU.height=40,this.scaffoldU.isPointerBlocker=!0,this.scaffoldU.onClick=new OnClick((function(){E.moveScaffold("w"),engine.addSystem(new B(E.scaffoldU))})),this.scaffoldF=new UIImage(this.uiMaximizedContainer,v),this.scaffoldF.sourceLeft=422,this.scaffoldF.sourceTop=544,this.scaffoldF.sourceWidth=74,this.scaffoldF.sourceHeight=74,this.scaffoldF.hAlign="right",this.scaffoldF.vAlign="bottom",this.scaffoldF.positionX=-15,this.scaffoldF.positionY=335,this.scaffoldF.width=40,this.scaffoldF.height=40,this.scaffoldF.isPointerBlocker=!0,this.scaffoldF.onClick=new OnClick((function(){E.moveScaffold("e"),engine.addSystem(new B(E.scaffoldF))})),this.scaffoldL=new UIImage(this.uiMaximizedContainer,v),this.scaffoldL.sourceLeft=16,this.scaffoldL.sourceTop=544,this.scaffoldL.sourceWidth=74,this.scaffoldL.sourceHeight=74,this.scaffoldL.hAlign="right",this.scaffoldL.vAlign="bottom",this.scaffoldL.positionX=-105,this.scaffoldL.positionY=290,this.scaffoldL.width=40,this.scaffoldL.height=40,this.scaffoldL.isPointerBlocker=!0,this.scaffoldL.onClick=new OnClick((function(){E.moveScaffold("a"),engine.addSystem(new B(E.scaffoldL))})),this.scaffoldD=new UIImage(this.uiMaximizedContainer,v),this.scaffoldD.sourceLeft=259,this.scaffoldD.sourceTop=544,this.scaffoldD.sourceWidth=74,this.scaffoldD.sourceHeight=74,this.scaffoldD.hAlign="right",this.scaffoldD.vAlign="bottom",this.scaffoldD.positionX=-60,this.scaffoldD.positionY=290,this.scaffoldD.width=40,this.scaffoldD.height=40,this.scaffoldD.isPointerBlocker=!0,this.scaffoldD.onClick=new OnClick((function(){E.moveScaffold("s"),engine.addSystem(new B(E.scaffoldD))})),this.scaffoldR=new UIImage(this.uiMaximizedContainer,v),this.scaffoldR.sourceLeft=97,this.scaffoldR.sourceTop=544,this.scaffoldR.sourceWidth=74,this.scaffoldR.sourceHeight=74,this.scaffoldR.hAlign="right",this.scaffoldR.vAlign="bottom",this.scaffoldR.positionX=-15,this.scaffoldR.positionY=290,this.scaffoldR.width=40,this.scaffoldR.height=40,this.scaffoldR.isPointerBlocker=!0,this.scaffoldR.onClick=new OnClick((function(){E.moveScaffold("d"),engine.addSystem(new B(E.scaffoldR))})),this.displayName=new UIText(this.uiMaximizedContainer),this.displayName.hAlign="center",this.displayName.vAlign="top",this.displayName.positionY=-180,this.displayName.positionX=0,this.displayName.height=10,this.displayName.fontSize=12,this.displayName.hTextAlign="center",(S=new UIText(this.uiMaximizedContainer)).hAlign="center",S.vAlign="top",S.positionY=-160,S.positionX=0,S.height=10,S.fontSize=12,S.hTextAlign="center",S.value="Entity Label",this.displayPRS=new UIText(this.uiMaximizedContainer),this.displayPRS.hAlign="center",this.displayPRS.vAlign="top",this.displayPRS.positionY=-200,this.displayPRS.positionX=0,this.displayPRS.height=10,this.displayPRS.fontSize=12,this.displayPRS.hTextAlign="center",this.displayPRS.value="(0,0,0)",this.scaffoldTitle=new UIText(this.uiMaximizedContainer),this.scaffoldTitle.hAlign="center",this.scaffoldTitle.vAlign="top",this.scaffoldTitle.positionY=-25,this.scaffoldTitle.positionX=-45,this.scaffoldTitle.height=10,this.scaffoldTitle.fontSize=8,this.scaffoldTitle.hTextAlign="center",this.scaffoldTitle.value="Scaffold",this.selectPreviousButton=new UIImage(this.uiMaximizedContainer,v),this.selectPreviousButton.sourceLeft=16,this.selectPreviousButton.sourceTop=184,this.selectPreviousButton.sourceWidth=74,this.selectPreviousButton.sourceHeight=74,this.selectPreviousButton.hAlign="right",this.selectPreviousButton.vAlign="bottom",this.selectPreviousButton.positionX=-105,this.selectPreviousButton.positionY=30,this.selectPreviousButton.width=40,this.selectPreviousButton.height=40,this.selectPreviousButton.isPointerBlocker=!0,this.selectPreviousButton.onClick=new OnClick((function(){E.selectPrevious(),engine.addSystem(new B(E.selectPreviousButton))})),this.selectNextButton=new UIImage(this.uiMaximizedContainer,v),this.selectNextButton.sourceLeft=97,this.selectNextButton.sourceTop=184,this.selectNextButton.sourceWidth=74,this.selectNextButton.sourceHeight=74,this.selectNextButton.hAlign="right",this.selectNextButton.vAlign="bottom",this.selectNextButton.positionX=-60,this.selectNextButton.positionY=30,this.selectNextButton.width=40,this.selectNextButton.height=40,this.selectNextButton.isPointerBlocker=!0,this.selectNextButton.onClick=new OnClick((function(){E.selectNext(),engine.addSystem(new B(E.selectNextButton))})),this.saveButton=new UIImage(this.uiMaximizedContainer,v),this.saveButton.sourceLeft=745,this.saveButton.sourceTop=184,this.saveButton.sourceWidth=74,this.saveButton.sourceHeight=74,this.saveButton.hAlign="right",this.saveButton.vAlign="bottom",this.saveButton.positionX=-15,this.saveButton.positionY=75,this.saveButton.width=40,this.saveButton.height=40,this.saveButton.isPointerBlocker=!0,this.saveButton.onClick=new OnClick((function(){E.dump(),engine.addSystem(new B(E.saveButton))})),this.qButton=new UIImage(this.uiMaximizedContainer,v),this.qButton.sourceLeft=340,this.qButton.sourceTop=544,this.qButton.sourceWidth=74,this.qButton.sourceHeight=74,this.qButton.hAlign="right",this.qButton.vAlign="bottom",this.qButton.positionX=-105,this.qButton.positionY=165,this.qButton.width=40,this.qButton.height=40,this.qButton.isPointerBlocker=!0,this.qButton.onClick=new OnClick((function(v){E.adjustTransform("q"),engine.addSystem(new B(E.qButton))})),this.wButton=new UIImage(this.uiMaximizedContainer,v),this.wButton.sourceLeft=178,this.wButton.sourceTop=544,this.wButton.sourceWidth=74,this.wButton.sourceHeight=74,this.wButton.hAlign="right",this.wButton.vAlign="bottom",this.wButton.positionX=-60,this.wButton.positionY=165,this.wButton.width=40,this.wButton.height=40,this.wButton.isPointerBlocker=!0,this.wButton.onClick=new OnClick((function(){E.adjustTransform("w"),engine.addSystem(new B(E.wButton))})),this.eButton=new UIImage(this.uiMaximizedContainer,v),this.eButton.sourceLeft=422,this.eButton.sourceTop=544,this.eButton.sourceWidth=74,this.eButton.sourceHeight=74,this.eButton.hAlign="right",this.eButton.vAlign="bottom",this.eButton.positionX=-15,this.eButton.positionY=165,this.eButton.width=40,this.eButton.height=40,this.eButton.isPointerBlocker=!0,this.eButton.onClick=new OnClick((function(){E.adjustTransform("e"),engine.addSystem(new B(E.eButton))})),this.aButton=new UIImage(this.uiMaximizedContainer,v),this.aButton.sourceLeft=16,this.aButton.sourceTop=544,this.aButton.sourceWidth=74,this.aButton.sourceHeight=74,this.aButton.hAlign="right",this.aButton.vAlign="bottom",this.aButton.positionX=-105,this.aButton.positionY=120,this.aButton.width=40,this.aButton.height=40,this.aButton.isPointerBlocker=!0,this.aButton.onClick=new OnClick((function(){E.adjustTransform("a"),engine.addSystem(new B(E.aButton))})),this.sButton=new UIImage(this.uiMaximizedContainer,v),this.sButton.sourceLeft=259,this.sButton.sourceTop=544,this.sButton.sourceWidth=74,this.sButton.sourceHeight=74,this.sButton.hAlign="right",this.sButton.vAlign="bottom",this.sButton.positionX=-60,this.sButton.positionY=120,this.sButton.width=40,this.sButton.height=40,this.sButton.isPointerBlocker=!0,this.sButton.onClick=new OnClick((function(){E.adjustTransform("s"),engine.addSystem(new B(E.sButton))})),this.dButton=new UIImage(this.uiMaximizedContainer,v),this.dButton.sourceLeft=97,this.dButton.sourceTop=544,this.dButton.sourceWidth=74,this.dButton.sourceHeight=74,this.dButton.hAlign="right",this.dButton.vAlign="bottom",this.dButton.positionX=-15,this.dButton.positionY=120,this.dButton.width=40,this.dButton.height=40,this.dButton.isPointerBlocker=!0,this.dButton.onClick=new OnClick((function(){E.adjustTransform("d"),engine.addSystem(new B(E.dButton))})),this.modeButton=new UIImage(this.uiMaximizedContainer,v),this.modeButton.sourceLeft=259,this.modeButton.sourceTop=94,this.modeButton.sourceWidth=74,this.modeButton.sourceHeight=74,this.modeButton.hAlign="right",this.modeButton.vAlign="bottom",this.modeButton.positionX=-105,this.modeButton.positionY=75,this.modeButton.width=40,this.modeButton.height=40,this.modeButton.isPointerBlocker=!0,this.modeButton.onClick=new OnClick((function(){E.mode+=1,E.mode>E.modeSCALE&&(E.mode=E.modePOSITION),E.snap=0,E.setSnaps(),E.applyModeAndSnapLabels(),engine.addSystem(new B(E.modeButton))})),this.modeLabel=new UIText(this.modeButton),this.modeLabel.color=Color4.White(),this.modeLabel.hAlign="center",this.modeLabel.vAlign="bottom",this.modeLabel.paddingTop=0,this.modeLabel.paddingBottom=12,this.modeLabel.positionX=-30,this.modeLabel.paddingLeft=0,this.modeLabel.fontSize=12,this.modeLabel.isPointerBlocker=!1,this.modeLabel.hTextAlign="center",this.snapButton=new UIImage(this.uiMaximizedContainer,v),this.snapButton.sourceLeft=259,this.snapButton.sourceTop=93,this.snapButton.sourceWidth=74,this.snapButton.sourceHeight=74,this.snapButton.hAlign="right",this.snapButton.vAlign="bottom",this.snapButton.positionX=-60,this.snapButton.positionY=75,this.snapButton.width=40,this.snapButton.height=40,this.snapButton.isPointerBlocker=!0,this.snapButton.onClick=new OnClick((function(){E.snap+=1,E.snap>3&&(E.snap=0),E.setSnaps(),E.applyModeAndSnapLabels(),engine.addSystem(new B(E.snapButton))})),this.snapLabel=new UIText(this.snapButton),this.snapLabel.color=Color4.White(),this.snapLabel.hAlign="right",this.snapLabel.vAlign="bottom",this.snapLabel.positionX=-30,this.snapLabel.paddingTop=0,this.snapLabel.paddingBottom=12,this.snapLabel.paddingLeft=0,this.snapLabel.fontSize=12,this.snapLabel.hTextAlign="center",this.snapLabel.isPointerBlocker=!1,this.applyModeAndSnapLabels(!0),this.minimizeButton=new UIImage(this.uiMaximizedContainer,v),this.minimizeButton.sourceLeft=908,this.minimizeButton.sourceTop=544,this.minimizeButton.sourceWidth=74,this.minimizeButton.sourceHeight=74,this.minimizeButton.hAlign="right",this.minimizeButton.vAlign="bottom",this.minimizeButton.positionX=-15,this.minimizeButton.positionY=30,this.minimizeButton.width=40,this.minimizeButton.height=40,this.minimizeButton.isPointerBlocker=!0,this.minimizeButton.onClick=new OnClick((function(){E.minimizeUI(),engine.addSystem(new B(E.minimizeButton))})),(C=new UIText(this.uiMaximizedContainer)).value="Builder HUD",C.color=Color4.White(),C.hAlign="center",C.vAlign="bottom",C.paddingTop=0,C.paddingBottom=5,C.paddingLeft=15,C.fontSize=12,C.isPointerBlocker=!1,this.minimizeUI(),[2]}))}))},t.prototype.setSnaps=function(){switch(this.snap){case 0:this.snapPosScale=1,this.snapRot=90;break;case 1:this.snapPosScale=.1,this.snapRot=15;break;case 2:this.snapPosScale=.01,this.snapRot=5;break;case 3:this.snapPosScale=.001,this.snapRot=1}},t.prototype.applyModeAndSnapLabels=function(v){switch(this.mode){case this.modePOSITION:this.modeLabel.value="P";break;case this.modeROTATION:this.modeLabel.value="R";break;case this.modeSCALE:this.modeLabel.value="S";break;default:this.modeLabel.value="ERR"}switch(!v&&this.updateDisplayPRS(),this.snap){case 0:this.mode==this.modeROTATION?this.snapLabel.value="90":this.snapLabel.value="1";break;case 1:this.mode==this.modeROTATION?this.snapLabel.value="15":this.snapLabel.value="0.1";break;case 2:this.mode==this.modeROTATION?this.snapLabel.value="5":this.snapLabel.value="0.01";break;case 3:this.mode==this.modeROTATION?this.snapLabel.value="1":this.snapLabel.value="0.001";break;default:this.snapLabel.value="ERR"}},t.prototype.countDecimals=function(v){return Math.floor(v)===v?0:v.toString().split(".")[1].length||0},t.prototype.updateDisplayPRS=function(){switch(this.mode){case this.modePOSITION:this.displayPRS.value="POS: ("+this.entities[this.selectedEntityIndex].entity.getComponent(Transform).position.x.toFixed(this.countDecimals(this.snapPosScale))+","+this.entities[this.selectedEntityIndex].entity.getComponent(Transform).position.y.toFixed(this.countDecimals(this.snapPosScale))+","+this.entities[this.selectedEntityIndex].entity.getComponent(Transform).position.z.toFixed(this.countDecimals(this.snapPosScale))+")";break;case this.modeROTATION:this.displayPRS.value="ROT: ("+Math.ceil(this.entities[this.selectedEntityIndex].entity.getComponent(Transform).rotation.eulerAngles.x)+","+Math.ceil(this.entities[this.selectedEntityIndex].entity.getComponent(Transform).rotation.eulerAngles.y)+","+Math.ceil(this.entities[this.selectedEntityIndex].entity.getComponent(Transform).rotation.eulerAngles.z)+")";break;case this.modeSCALE:this.displayPRS.value="SCL: ("+this.entities[this.selectedEntityIndex].entity.getComponent(Transform).scale.x.toFixed(this.countDecimals(this.snapPosScale))+","+this.entities[this.selectedEntityIndex].entity.getComponent(Transform).scale.y.toFixed(this.countDecimals(this.snapPosScale))+","+this.entities[this.selectedEntityIndex].entity.getComponent(Transform).scale.z.toFixed(this.countDecimals(this.snapPosScale))+")"}},t.prototype.maximizeUI=function(){this.uiMinimizedContainer.visible=!1,this.uiMaximizedContainer.visible=!0,this.uiMaximized=!0,this.selectedEntityIndex>=0&&this.numEntities>0&&engine.addEntity(this.selectionPointer),this.mode=this.modePOSITION,this.applyModeAndSnapLabels(),this.displayName.value=this.entities[this.selectedEntityIndex].entity.name,this.updateDisplayPRS(),this.scaffolding.getComponent(Transform).scale=this.scaffoldScale},t.prototype.minimizeUI=function(){this.uiMaximizedContainer.visible=!1,this.uiMinimizedContainer.visible=!0,this.uiMaximized=!1,this.selectedEntityIndex>=0&&this.numEntities>0&&engine.removeEntity(this.selectionPointer),this.scaffolding.getComponent(Transform).scale=Vector3.Zero()},t.prototype.showUI=function(){this.canvas.visible=!0,this.canvas.isPointerBlocker=!0},t.prototype.hideUI=function(){this.canvas.visible=!1,this.canvas.isPointerBlocker=!1},t.prototype.updateSelectionPointerPOS=function(v){var T=v.position.clone();this.selectionPointer.getComponent(Transform).position=new Vector3(T.x,T.y+this.selectionPointerElevation,T.z)},t.prototype.selectEntity=function(v){this.selectedEntityIndex=v,null!=this.entities[v].entity&&(this.displayName.value=this.entities[this.selectedEntityIndex].entity.name,this.updateSelectionPointerPOS(this.entities[v].entity.getComponent(Transform)))},t.prototype.selectPrevious=function(){this.selectedEntityIndex>0&&this.selectEntity(this.selectedEntityIndex-1),this.updateDisplayPRS()},t.prototype.selectNext=function(){this.selectedEntityIndex<this.numEntities-1&&this.selectEntity(this.selectedEntityIndex+1),this.updateDisplayPRS()},t.prototype.discardSelected=function(){log("Discard Selected Entity isn't implemented at this time.")},t.prototype.toggleCameraOptions=function(){this.movingSystem.addCameraPosition(new Vector3(8,8,8)),log(this.movingSystem.positions),this.scaffolding.addComponent(new S("","fixed",0))},t.prototype.toggleColliders=function(v){584==this.toggleLift.sourceLeft?(this.toggleLift.sourceLeft=503,this.scaffloor.getComponent(Material).albedoColor=new Color4(.97,.27,.34),this.backWall.getComponent(Transform).scale=this.scaffoldScale,this.backWall.getComponent(Transform).position=new Vector3(-.6,1.5,0),this.frontWall.getComponent(Transform).scale=this.scaffoldScale,this.frontWall.getComponent(Transform).position=new Vector3(.6,1.5,0),this.leftWall.getComponent(Transform).scale=this.scaffoldScale,this.leftWall.getComponent(Transform).position=new Vector3(0,1.5,.6),this.rightWall.getComponent(Transform).scale=this.scaffoldScale,this.rightWall.getComponent(Transform).position=new Vector3(0,1.5,-.6)):(this.toggleLift.sourceLeft=584,this.backWall.getComponent(Transform).scale=Vector3.Zero(),this.frontWall.getComponent(Transform).scale=Vector3.Zero(),this.leftWall.getComponent(Transform).scale=Vector3.Zero(),this.rightWall.getComponent(Transform).scale=Vector3.Zero(),this.rightWall.getComponent(Transform).position=new Vector3(0,-41.5,-.6),this.backWall.getComponent(Transform).position=new Vector3(0,-4.5,-.6),this.frontWall.getComponent(Transform).position=new Vector3(0,-4.5,-.6),this.leftWall.getComponent(Transform).position=new Vector3(0,-4.5,-.6),this.scaffloor.getComponent(Material).albedoColor=Color4.White()),v&&(this.scaffolding.getComponent(Transform).position=new Vector3(1,.3,1))},t.prototype.moveScaffold=function(v){var T=this.scaffolding.getComponent(Transform);if(this.mode===this.modePOSITION)switch(T.position,v){case"a":this.scaffolding.hasComponent(S)?this.scaffolding.removeComponent(S):this.scaffolding.addComponent(new S("left","free"));break;case"s":this.scaffolding.hasComponent(S)?this.scaffolding.removeComponent(S):this.scaffolding.addComponent(new S("down","free"));break;case"d":this.scaffolding.hasComponent(S)?this.scaffolding.removeComponent(S):this.scaffolding.addComponent(new S("right","free"));break;case"q":this.scaffolding.hasComponent(S)?this.scaffolding.removeComponent(S):this.scaffolding.addComponent(new S("back","free"));break;case"w":this.scaffolding.hasComponent(S)?this.scaffolding.removeComponent(S):this.scaffolding.addComponent(new S("up","free"));break;case"e":this.scaffolding.hasComponent(S)?this.scaffolding.removeComponent(S):this.scaffolding.addComponent(new S("forward","free"))}},t.prototype.adjustTransform=function(v){this.unsavedContainer.visible=!0;var T=this.entities[this.selectedEntityIndex].entity.getComponent(Transform);switch(this.mode){case this.modePOSITION:var S=T.position;switch(v){case"a":S.x-=this.snapPosScale;break;case"s":S.y-=this.snapPosScale;break;case"d":S.x+=this.snapPosScale;break;case"q":S.z-=this.snapPosScale;break;case"w":S.y+=this.snapPosScale;break;case"e":S.z+=this.snapPosScale}this.updateSelectionPointerPOS(T);break;case this.modeROTATION:switch(v){case"a":T.rotate(Vector3.Left(),-this.snapRot);break;case"s":T.rotate(Vector3.Up(),this.snapRot);break;case"d":T.rotate(Vector3.Left(),this.snapRot);break;case"q":T.rotate(Vector3.Forward(),-this.snapRot);break;case"w":T.rotate(Vector3.Up(),-this.snapRot);break;case"e":T.rotate(Vector3.Forward(),this.snapRot)}break;case this.modeSCALE:var C=T.scale;switch(v){case"a":C.x-=this.snapPosScale;break;case"s":C.y-=this.snapPosScale;break;case"d":C.x+=this.snapPosScale;break;case"q":C.z-=this.snapPosScale;break;case"w":C.y+=this.snapPosScale;break;case"e":C.z+=this.snapPosScale}}this.updateDisplayPRS()},t.prototype.attachToEntity=function(v,T){return void 0===T&&(T=!0),e(this,void 0,void 0,(function(){return n(this,(function(S){return null==v?log("BuilderHUD attachToEntity called with a null entity"):O.isSetup&&(this.entities[this.numEntities]={entity:v,transform:v.getComponent(Transform),preexisting:T},T?(this.selectedEntityIndex=-1)&&this.selectEntity(0):this.selectEntity(this.numEntities),this.numEntities++),[2]}))}))},t.prototype.newEntity=function(){var v=Camera.instance,T=v.rotation.eulerAngles.y;T>=180?T-=180:T+=180;var S=0,C=0,E=0,A=1,R=1,O=1;if(null!=this.defaultParent){var B=this.defaultParent.getComponent(Transform);S=B.position.x,C=B.position.y,E=B.position.z,B.rotation.eulerAngles.x,B.rotation.eulerAngles.y,B.rotation.eulerAngles.z,A=B.scale.x,R=B.scale.y,O=B.scale.z}var M=new Transform({position:new Vector3((v.position.x-S)/A,(0-C)/R,(v.position.z-E)/O),rotation:Quaternion.Euler(0,0,0),scale:new Vector3(this.newEntityScale/A,this.newEntityScale/R,this.newEntityScale/O)});M.rotate(Vector3.Up(),-T);var z=new Entity;if(z.name="Entity"+this.numEntities,z.addComponent(M),null==this.newEntityShape)try{this.newEntityShape=new GLTFShape("models/xyz/xyzLeftHand.glb")}catch(z){this.newEntityShape=new BoxShape,(new Material).albedoColor=Color3.Green()}z.addComponent(this.newEntityShape),null!=this.defaultParent&&z.setParent(this.defaultParent),engine.addEntity(z),this.attachToEntity(z,!1)},t.prototype.round=function(v){return Math.floor(1e3*(v+49e-5))/1e3},t.prototype.dump=function(){for(var v in this.unsavedContainer.visible=!1,log("--------------- BuilderHUD entities -------------"),this.entities){var T=null==this.entities[v].entity.name?"Existing":""+this.entities[v].entity.name,S=this.entities[v].transform,C=S.position,E=S.rotation.eulerAngles,A=S.scale,R="position: new Vector3("+this.round(C.x)+","+this.round(C.y)+","+this.round(C.z)+"), rotation: Quaternion.Euler("+this.round(E.x)+","+this.round(E.y)+","+this.round(E.z)+"), scale: new Vector3("+this.round(A.x)+","+this.round(A.y)+","+this.round(A.z)+")";log(T+" {"+R+"}")}log("-------------------------------------------------")},t.prototype.destroy=function(){for(var v in this.dump(),this.entities)this.entities[v].preexisting||(this.entities[v].entity.setParent(null),engine.removeEntity(this.entities[v].entity));this.entities=[],this.numEntities=0,this.refreshDisplay()},t.prototype.refreshDisplay=function(){},t}(),R=function(){function t(v){this.timer=4,this.entities=[],this.hud=v}return t.prototype.pendingEntity=function(v){this.entities.push(v)},t.prototype.update=function(v){if(this.timer>0)this.timer-=v;else{this.timer=4;for(var T=0;T<this.entities.length;T++)log("here"),this.hud.attachToEntity(this.entities[T],!0);this.entities=[]}},t}(),O=new A;O.pendingEntityAdd=new R(O),engine.addSystem(O.pendingEntityAdd);var B=function(){function t(v){this.timer=.1,this.uiIMage=v}return t.prototype.update=function(v){this.timer>0?(this.uiIMage.opacity-=.3,this.timer-=v):(this.timer=.1,this.uiIMage.opacity=1,engine.removeSystem(this))},t}();v.hud=O,Object.defineProperty(v,"__esModule",{value:!0})}));var __awaiter=this&&this.__awaiter||function(v,T,S,C){return new(S||(S=Promise))((function(E,A){function fulfilled(v){try{step(C.next(v))}catch(v){A(v)}}function rejected(v){try{step(C.throw(v))}catch(v){A(v)}}function step(v){var T;v.done?E(v.value):(T=v.value,T instanceof S?T:new S((function(v){v(T)}))).then(fulfilled,rejected)}step((C=C.apply(v,T||[])).next())}))},__generator=this&&this.__generator||function(v,T){var S,C,E,A,R={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]};return A={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(A[Symbol.iterator]=function(){return this}),A;function verb(A){return function(O){return function(A){if(S)throw new TypeError("Generator is already executing.");for(;R;)try{if(S=1,C&&(E=2&A[0]?C.return:A[0]?C.throw||((E=C.return)&&E.call(C),0):C.next)&&!(E=E.call(C,A[1])).done)return E;switch(C=0,E&&(A=[2&A[0],E.value]),A[0]){case 0:case 1:E=A;break;case 4:return R.label++,{value:A[1],done:!1};case 5:R.label++,C=A[1],A=[0];continue;case 7:A=R.ops.pop(),R.trys.pop();continue;default:if(!((E=(E=R.trys).length>0&&E[E.length-1])||6!==A[0]&&2!==A[0])){R=0;continue}if(3===A[0]&&(!E||A[1]>E[0]&&A[1]<E[3])){R.label=A[1];break}if(6===A[0]&&R.label<E[1]){R.label=E[1],E=A;break}if(E&&R.label<E[2]){R.label=E[2],R.ops.push(A);break}E[2]&&R.ops.pop(),R.trys.pop();continue}A=T.call(v,R)}catch(v){A=[6,v],C=0}finally{S=E=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([A,O])}}};define("Resources/Resources",["require","exports"],(function(v,T){Object.defineProperty(T,"__esModule",{value:!0}),T.default={Models:{TestModel:new GLTFShape("models/cubeTest.glb"),MrcBuilding:new GLTFShape("Models/building/MrcBuilding6.glb"),MrcPanel:new GLTFShape("models/MrcPanel.glb")},Variables:{TeleportDelay:100,GroundFirstRowButtonOffetY:1.03,GroundSecondRowButtonOffetY:1.59,SecondFloorFirstRowButtonOffetY:.45,SecondFloorSecondRowButtonOffetY:1.05,ThirdFloorFirstRowButtonOffetY:-.1,ThirdFloorSecondRowButtonOffetY:.35,FourthFloorFirstRowButtonOffetY:.91,FourthFloorSecondRowButtonOffetY:1.45,FifthFloorFirstRowButtonOffetY:.45,FifthFloorSecondRowButtonOffetY:1.05,MeetingFloorFirstRowButtonOffetY:.22,MeetingFloorSecondRowButtonOffetY:.78,FirstColumnOffsetZ:16.57,SecondColumnOffsetZ:15.92,ThirdColumnOffsetZ:15.33,GroundOffsetX:10.2,SecondFloorOffsetX:13.2,ThirdFloorOffsetX:12.5,FourthFloorOffsetX:14,FifthFloorOffsetX:12.5,MeetingFloorOffsetX:14},Text:{GroundButtonText:"Ground Floor(1)",SecondFloorButtonText:"MarcoMkt Floor(2)",ThirdFloorButtonText:"XinNux Floor(3)",FourthFloorButtonText:"BlueO Floor(4)",FifthFloorButtonText:"Meetail Floor(5)",SixthFloorButtonText:"Meeting Floor(6)"},Transforms:{StaticTransforms:{BuildingPos:new Vector3(8,0,16),BuildingScale:new Vector3(.8,.8,.8),BuildingRotation:Quaternion.Euler(0,270,0),BoxShapeScale:new Vector3(.3,.4,.4)},DynamicTransforms:{GroundFloor:new Vector3(6,0,15),SecondFloor:new Vector3(3,3.5,15),ThirdFloor:new Vector3(4,9.32,15),FourthFloor:new Vector3(3,14.5,15),FifthFloor:new Vector3(3,20.58,15),SixthFloor:new Vector3(3,20.75,15)}}}})),define("GameObjects/Other/LoadBuilding",["require","exports","Resources/Resources"],(function(v,T,S){Object.defineProperty(T,"__esModule",{value:!0}),T.LoadMainBuilding=void 0;var C=new Entity("BuildingEntity");T.LoadMainBuilding=function(){var v=new Transform({position:S.default.Transforms.StaticTransforms.BuildingPos,rotation:S.default.Transforms.StaticTransforms.BuildingRotation,scale:new Vector3(1,1,1)});C.addComponentOrReplace(v);var T=S.default.Models.MrcBuilding;T.withCollisions=!0,T.isPointerBlocker=!0,T.visible=!0,C.addComponentOrReplace(T),engine.addEntity(C)}})),define("Player/Teleport",["require","exports","@decentraland/RestrictedActions","@dcl/ecs-scene-utils","Resources/Resources"],(function(v,T,S,C,E){Object.defineProperty(T,"__esModule",{value:!0}),T.Teleport=void 0,T.Teleport=function(v,T){v.addComponent(new C.Delay(E.default.Variables.TeleportDelay,(function(){(0,S.movePlayerTo)({x:T.x,y:T.y,z:T.z},{x:0,y:0,z:0})})))}})),define("GameObjects/Panels/GroundFloorPanel",["require","exports","Resources/Resources","Player/Teleport"],(function(v,T,S,C){Object.defineProperty(T,"__esModule",{value:!0}),T.GroundPanel=void 0,T.GroundPanel=function(){var v=new Material,T=new Color4(0,0,0,0);v.albedoColor=T;for(var E=new Array(6),_loop_1=function(T){if(E[T]=new Entity,E[T].addComponent(new BoxShape),E[T].getComponent(BoxShape).visible=!0,E[T].addComponent(v),engine.addEntity(E[T]),0==T){var A=new Transform({position:new Vector3(S.default.Variables.GroundOffsetX,S.default.Transforms.DynamicTransforms.GroundFloor.y+S.default.Variables.GroundFirstRowButtonOffetY,S.default.Variables.FirstColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale});E[T].addComponent(A),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.GroundFloor)}),{hoverText:S.default.Text.GroundButtonText}))}else if(1==T){var R=new Transform({position:new Vector3(S.default.Variables.GroundOffsetX,S.default.Transforms.DynamicTransforms.GroundFloor.y+S.default.Variables.GroundSecondRowButtonOffetY,S.default.Variables.FirstColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale});E[T].addComponent(R),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.SixthFloor)}),{hoverText:S.default.Text.SixthFloorButtonText}))}else if(2==T){var O=new Transform({position:new Vector3(S.default.Variables.GroundOffsetX,S.default.Transforms.DynamicTransforms.GroundFloor.y+S.default.Variables.GroundSecondRowButtonOffetY,S.default.Variables.SecondColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale});E[T].addComponent(O),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.FifthFloor)}),{hoverText:S.default.Text.FifthFloorButtonText}))}else if(3==T){var B=new Transform({position:new Vector3(S.default.Variables.GroundOffsetX,S.default.Transforms.DynamicTransforms.GroundFloor.y+S.default.Variables.GroundSecondRowButtonOffetY,S.default.Variables.ThirdColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale});E[T].addComponent(B),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.FourthFloor)}),{hoverText:S.default.Text.FourthFloorButtonText}))}else if(4==T){var M=new Transform({position:new Vector3(S.default.Variables.GroundOffsetX,S.default.Transforms.DynamicTransforms.GroundFloor.y+S.default.Variables.GroundFirstRowButtonOffetY,S.default.Variables.SecondColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale});E[T].addComponent(M),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.SecondFloor)}),{hoverText:S.default.Text.SecondFloorButtonText}))}else if(5==T){var z=new Transform({position:new Vector3(S.default.Variables.GroundOffsetX,S.default.Transforms.DynamicTransforms.GroundFloor.y+S.default.Variables.GroundFirstRowButtonOffetY,S.default.Variables.ThirdColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale});E[T].addComponent(z),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.ThirdFloor)}),{hoverText:S.default.Text.ThirdFloorButtonText}))}},A=0;A<E.length;A++)_loop_1(A)}})),define("GameObjects/Panels/SecondFloorPlanel",["require","exports","Resources/Resources","Player/Teleport"],(function(v,T,S,C){Object.defineProperty(T,"__esModule",{value:!0}),T.SecondFloorPanel=void 0,T.SecondFloorPanel=function(){var v=new Material,T=new Color4(0,0,0,0);v.albedoColor=T;for(var E=new Array(6),_loop_2=function(T){if(E[T]=new Entity,E[T].addComponent(new BoxShape),E[T].getComponent(BoxShape).visible=!0,E[T].addComponent(v),engine.addEntity(E[T]),0==T){var A=new Transform({position:new Vector3(S.default.Variables.SecondFloorOffsetX,S.default.Transforms.DynamicTransforms.SecondFloor.y+S.default.Variables.SecondFloorFirstRowButtonOffetY,S.default.Variables.FirstColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale});E[T].addComponent(A),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.GroundFloor)}),{hoverText:S.default.Text.GroundButtonText}))}else if(1==T){var R=new Transform({position:new Vector3(S.default.Variables.SecondFloorOffsetX,S.default.Transforms.DynamicTransforms.SecondFloor.y+S.default.Variables.SecondFloorFirstRowButtonOffetY,S.default.Variables.SecondColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale});E[T].addComponent(R),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.SecondFloor)}),{hoverText:S.default.Text.SecondFloorButtonText}))}else if(2==T){var O=new Transform({position:new Vector3(S.default.Variables.SecondFloorOffsetX,S.default.Transforms.DynamicTransforms.SecondFloor.y+S.default.Variables.SecondFloorFirstRowButtonOffetY,S.default.Variables.ThirdColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale});E[T].addComponent(O),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.ThirdFloor)}),{hoverText:S.default.Text.ThirdFloorButtonText}))}else if(3==T){var B=new Transform({position:new Vector3(S.default.Variables.SecondFloorOffsetX,S.default.Transforms.DynamicTransforms.SecondFloor.y+S.default.Variables.SecondFloorSecondRowButtonOffetY,S.default.Variables.ThirdColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale});E[T].addComponent(B),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.FourthFloor)}),{hoverText:S.default.Text.FourthFloorButtonText}))}else if(4==T){var M=new Transform({position:new Vector3(S.default.Variables.SecondFloorOffsetX,S.default.Transforms.DynamicTransforms.SecondFloor.y+S.default.Variables.SecondFloorSecondRowButtonOffetY,S.default.Variables.SecondColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale});E[T].addComponent(M),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.FifthFloor)}),{hoverText:S.default.Text.FifthFloorButtonText}))}else 5==T&&(B=new Transform({position:new Vector3(S.default.Variables.SecondFloorOffsetX,S.default.Transforms.DynamicTransforms.SecondFloor.y+S.default.Variables.SecondFloorSecondRowButtonOffetY,S.default.Variables.FirstColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale}),E[T].addComponent(B),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.SixthFloor)}),{hoverText:S.default.Text.SixthFloorButtonText})))},A=0;A<E.length;A++)_loop_2(A)}})),define("GameObjects/Panels/ThirdFloorPanel",["require","exports","Resources/Resources","Player/Teleport"],(function(v,T,S,C){Object.defineProperty(T,"__esModule",{value:!0}),T.ThirdFloorPanel=void 0,T.ThirdFloorPanel=function(){var v=new Material,T=new Color4(0,0,0,0);v.albedoColor=T;for(var E=new Array(6),_loop_3=function(T){if(E[T]=new Entity,E[T].addComponent(new BoxShape),E[T].getComponent(BoxShape).visible=!0,E[T].addComponent(v),engine.addEntity(E[T]),0==T){var A=new Transform({position:new Vector3(S.default.Variables.ThirdFloorOffsetX,S.default.Transforms.DynamicTransforms.ThirdFloor.y+S.default.Variables.ThirdFloorFirstRowButtonOffetY,S.default.Variables.FirstColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale});E[T].addComponent(A),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.GroundFloor)}),{hoverText:S.default.Text.GroundButtonText}))}else if(1==T){var R=new Transform({position:new Vector3(S.default.Variables.ThirdFloorOffsetX,S.default.Transforms.DynamicTransforms.ThirdFloor.y+S.default.Variables.ThirdFloorFirstRowButtonOffetY,S.default.Variables.SecondColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale});E[T].addComponent(R),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.SecondFloor)}),{hoverText:S.default.Text.SecondFloorButtonText}))}else if(2==T){var O=new Transform({position:new Vector3(S.default.Variables.ThirdFloorOffsetX,S.default.Transforms.DynamicTransforms.ThirdFloor.y+S.default.Variables.ThirdFloorFirstRowButtonOffetY,S.default.Variables.ThirdColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale});E[T].addComponent(O),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.ThirdFloor)}),{hoverText:S.default.Text.ThirdFloorButtonText}))}else if(3==T){var B=new Transform({position:new Vector3(S.default.Variables.ThirdFloorOffsetX,S.default.Transforms.DynamicTransforms.ThirdFloor.y+S.default.Variables.ThirdFloorSecondRowButtonOffetY,S.default.Variables.ThirdColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale});E[T].addComponent(B),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.FourthFloor)}),{hoverText:S.default.Text.FourthFloorButtonText}))}else if(4==T){var M=new Transform({position:new Vector3(S.default.Variables.ThirdFloorOffsetX,S.default.Transforms.DynamicTransforms.ThirdFloor.y+S.default.Variables.ThirdFloorSecondRowButtonOffetY,S.default.Variables.SecondColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale});E[T].addComponent(M),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.FifthFloor)}),{hoverText:S.default.Text.FifthFloorButtonText}))}else 5==T&&(B=new Transform({position:new Vector3(S.default.Variables.ThirdFloorOffsetX,S.default.Transforms.DynamicTransforms.ThirdFloor.y+S.default.Variables.ThirdFloorSecondRowButtonOffetY,S.default.Variables.FirstColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale}),E[T].addComponent(B),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.SixthFloor)}),{hoverText:S.default.Text.SixthFloorButtonText})))},A=0;A<E.length;A++)_loop_3(A)}})),define("GameObjects/Panels/FourthFloorPanel",["require","exports","Resources/Resources","Player/Teleport"],(function(v,T,S,C){Object.defineProperty(T,"__esModule",{value:!0}),T.FourthFloorPanel=void 0,T.FourthFloorPanel=function(){var v=new Material,T=new Color4(0,0,0,0);v.albedoColor=T;for(var E=new Array(6),_loop_4=function(T){if(E[T]=new Entity,E[T].addComponent(new BoxShape),E[T].getComponent(BoxShape).visible=!0,E[T].addComponent(v),engine.addEntity(E[T]),0==T){var A=new Transform({position:new Vector3(S.default.Variables.FourthFloorOffsetX,S.default.Transforms.DynamicTransforms.FourthFloor.y+S.default.Variables.FourthFloorFirstRowButtonOffetY,S.default.Variables.FirstColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale});E[T].addComponent(A),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.GroundFloor)}),{hoverText:S.default.Text.GroundButtonText}))}else if(1==T){var R=new Transform({position:new Vector3(S.default.Variables.FourthFloorOffsetX,S.default.Transforms.DynamicTransforms.FourthFloor.y+S.default.Variables.FourthFloorFirstRowButtonOffetY,S.default.Variables.SecondColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale});E[T].addComponent(R),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.SecondFloor)}),{hoverText:S.default.Text.SecondFloorButtonText}))}else if(2==T){var O=new Transform({position:new Vector3(S.default.Variables.FourthFloorOffsetX,S.default.Transforms.DynamicTransforms.FourthFloor.y+S.default.Variables.FourthFloorFirstRowButtonOffetY,S.default.Variables.ThirdColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale});E[T].addComponent(O),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.ThirdFloor)}),{hoverText:S.default.Text.ThirdFloorButtonText}))}else if(3==T){var B=new Transform({position:new Vector3(S.default.Variables.FourthFloorOffsetX,S.default.Transforms.DynamicTransforms.FourthFloor.y+S.default.Variables.FourthFloorSecondRowButtonOffetY,S.default.Variables.ThirdColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale});E[T].addComponent(B),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.FourthFloor)}),{hoverText:S.default.Text.FourthFloorButtonText}))}else if(4==T){var M=new Transform({position:new Vector3(S.default.Variables.FourthFloorOffsetX,S.default.Transforms.DynamicTransforms.FourthFloor.y+S.default.Variables.FourthFloorSecondRowButtonOffetY,S.default.Variables.SecondColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale});E[T].addComponent(M),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.FifthFloor)}),{hoverText:S.default.Text.FifthFloorButtonText}))}else 5==T&&(B=new Transform({position:new Vector3(S.default.Variables.FourthFloorOffsetX,S.default.Transforms.DynamicTransforms.FourthFloor.y+S.default.Variables.FourthFloorSecondRowButtonOffetY,S.default.Variables.FirstColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale}),E[T].addComponent(B),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.SixthFloor)}),{hoverText:S.default.Text.SixthFloorButtonText})))},A=0;A<E.length;A++)_loop_4(A)}})),define("GameObjects/Panels/FifthFloorPanel",["require","exports","Resources/Resources","Player/Teleport"],(function(v,T,S,C){Object.defineProperty(T,"__esModule",{value:!0}),T.FifthFloorPanel=void 0,T.FifthFloorPanel=function(){var v=new Material,T=new Color4(0,0,0,0);v.albedoColor=T;for(var E=new Array(6),_loop_5=function(T){if(E[T]=new Entity,E[T].addComponent(new BoxShape),E[T].getComponent(BoxShape).visible=!0,E[T].addComponent(v),engine.addEntity(E[T]),0==T){var A=new Transform({position:new Vector3(S.default.Variables.FifthFloorOffsetX,S.default.Transforms.DynamicTransforms.FifthFloor.y+S.default.Variables.FifthFloorFirstRowButtonOffetY,S.default.Variables.FirstColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale});E[T].addComponent(A),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.GroundFloor)}),{hoverText:S.default.Text.GroundButtonText}))}else if(1==T){var R=new Transform({position:new Vector3(S.default.Variables.FifthFloorOffsetX,S.default.Transforms.DynamicTransforms.FifthFloor.y+S.default.Variables.FifthFloorFirstRowButtonOffetY,S.default.Variables.SecondColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale});E[T].addComponent(R),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.SecondFloor)}),{hoverText:S.default.Text.SecondFloorButtonText}))}else if(2==T){var O=new Transform({position:new Vector3(S.default.Variables.FifthFloorOffsetX,S.default.Transforms.DynamicTransforms.FifthFloor.y+S.default.Variables.FifthFloorFirstRowButtonOffetY,S.default.Variables.ThirdColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale});E[T].addComponent(O),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.ThirdFloor)}),{hoverText:S.default.Text.ThirdFloorButtonText}))}else if(3==T){var B=new Transform({position:new Vector3(S.default.Variables.FifthFloorOffsetX,S.default.Transforms.DynamicTransforms.FifthFloor.y+S.default.Variables.FifthFloorSecondRowButtonOffetY,S.default.Variables.ThirdColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale});E[T].addComponent(B),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.FourthFloor)}),{hoverText:S.default.Text.FourthFloorButtonText}))}else if(4==T){var M=new Transform({position:new Vector3(S.default.Variables.FifthFloorOffsetX,S.default.Transforms.DynamicTransforms.FifthFloor.y+S.default.Variables.FifthFloorSecondRowButtonOffetY,S.default.Variables.SecondColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale});E[T].addComponent(M),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.FifthFloor)}),{hoverText:S.default.Text.FifthFloorButtonText}))}else 5==T&&(B=new Transform({position:new Vector3(S.default.Variables.FifthFloorOffsetX,S.default.Transforms.DynamicTransforms.FifthFloor.y+S.default.Variables.FifthFloorSecondRowButtonOffetY,S.default.Variables.FirstColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale}),E[T].addComponent(B),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.SixthFloor)}),{hoverText:S.default.Text.SixthFloorButtonText})))},A=0;A<E.length;A++)_loop_5(A)}})),define("GameObjects/Panels/MeetingFloorPanel",["require","exports","Resources/Resources","Player/Teleport"],(function(v,T,S,C){Object.defineProperty(T,"__esModule",{value:!0}),T.MeetingFloorPanel=void 0,T.MeetingFloorPanel=function(){var v=new Material,T=new Color4(0,0,0,0);v.albedoColor=T;for(var E=new Array(6),_loop_6=function(T){if(E[T]=new Entity,E[T].addComponent(new BoxShape),E[T].getComponent(BoxShape).visible=!0,E[T].addComponent(v),engine.addEntity(E[T]),0==T){var A=new Transform({position:new Vector3(S.default.Variables.MeetingFloorOffsetX,S.default.Transforms.DynamicTransforms.SixthFloor.y+S.default.Variables.MeetingFloorFirstRowButtonOffetY,S.default.Variables.FirstColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale});E[T].addComponent(A),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.GroundFloor)}),{hoverText:S.default.Text.GroundButtonText}))}else if(1==T){var R=new Transform({position:new Vector3(S.default.Variables.MeetingFloorOffsetX,S.default.Transforms.DynamicTransforms.SixthFloor.y+S.default.Variables.MeetingFloorFirstRowButtonOffetY,S.default.Variables.SecondColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale});E[T].addComponent(R),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.SecondFloor)}),{hoverText:S.default.Text.SecondFloorButtonText}))}else if(2==T){var O=new Transform({position:new Vector3(S.default.Variables.MeetingFloorOffsetX,S.default.Transforms.DynamicTransforms.SixthFloor.y+S.default.Variables.MeetingFloorFirstRowButtonOffetY,S.default.Variables.ThirdColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale});E[T].addComponent(O),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.ThirdFloor)}),{hoverText:S.default.Text.ThirdFloorButtonText}))}else if(3==T){var B=new Transform({position:new Vector3(S.default.Variables.MeetingFloorOffsetX,S.default.Transforms.DynamicTransforms.SixthFloor.y+S.default.Variables.MeetingFloorSecondRowButtonOffetY,S.default.Variables.ThirdColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale});E[T].addComponent(B),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.FourthFloor)}),{hoverText:S.default.Text.FourthFloorButtonText}))}else if(4==T){var M=new Transform({position:new Vector3(S.default.Variables.MeetingFloorOffsetX,S.default.Transforms.DynamicTransforms.SixthFloor.y+S.default.Variables.MeetingFloorSecondRowButtonOffetY,S.default.Variables.SecondColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale});E[T].addComponent(M),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.FifthFloor)}),{hoverText:S.default.Text.FifthFloorButtonText}))}else 5==T&&(B=new Transform({position:new Vector3(S.default.Variables.MeetingFloorOffsetX,S.default.Transforms.DynamicTransforms.SixthFloor.y+S.default.Variables.MeetingFloorSecondRowButtonOffetY,S.default.Variables.FirstColumnOffsetZ),scale:S.default.Transforms.StaticTransforms.BoxShapeScale}),E[T].addComponent(B),E[T].addComponent(new OnPointerDown((function(){(0,C.Teleport)(E[T],S.default.Transforms.DynamicTransforms.SixthFloor)}),{hoverText:S.default.Text.SixthFloorButtonText})))},A=0;A<E.length;A++)_loop_6(A)}})),define("GameObjects/Other/HudBox",["require","exports","@dcl/builder-hud"],(function(v,T,S){Object.defineProperty(T,"__esModule",{value:!0}),T.HudBoxTest=void 0,T.HudBoxTest=function(){var v=new Entity("Box");v.addComponent(new BoxShape),v.addComponent(new Transform({position:new Vector3(4,0,8),rotation:Quaternion.Euler(0,0,0),scale:new Vector3(1,1,1)})),engine.addEntity(v),S.hud.attachToEntity(v)}})),define("GameObjects/Button",["require","exports","@dcl/builder-hud"],(function(v,T,S){Object.defineProperty(T,"__esModule",{value:!0}),T.createButton=void 0,T.createButton=function(v,T,C,E,A,R){var O=new Entity("button");engine.addEntity(O),O.setParent(v),O.addComponent(new Transform({position:T,scale:C}));var B=new BoxShape;B.withCollisions=!0,O.addComponent(B);var M=new Material;M.albedoColor=new Color4(1,1,1,0),A&&O.addComponent(M),O.addComponent(new OnPointerDown((function(v){E(R)}))),S.hud.attachToEntity(O)}})),define("Index",["require","exports","@dcl/ecs-scene-utils","GameObjects/Other/LoadBuilding","GameObjects/Panels/GroundFloorPanel","GameObjects/Panels/SecondFloorPlanel","GameObjects/Panels/ThirdFloorPanel","GameObjects/Panels/FourthFloorPanel","GameObjects/Panels/MeetingFloorPanel","GameObjects/Button","@dcl/builder-hud","@decentraland/Identity"],(function(v,T,S,C,E,A,R,O,B,M,z,V){Object.defineProperty(T,"__esModule",{value:!0}),(0,C.LoadMainBuilding)(),(0,E.GroundPanel)(),(0,A.SecondFloorPanel)(),(0,R.ThirdFloorPanel)(),(0,O.FourthFloorPanel)(),(0,B.MeetingFloorPanel)();var j=new Entity("_scene");engine.addEntity(j);var q=new Transform({position:new Vector3(0,0,0),rotation:new Quaternion(0,0,0,1),scale:new Vector3(1,1,1)});j.addComponentOrReplace(q),(new BoxShape).withCollisions=!0;var H=new Entity("mrcbuildingPCoorporativ");H.setParent(j);var W=new Transform({position:new Vector3(8,0,16),rotation:Quaternion.Euler(0,270,0),scale:new Vector3(1,1,1)});H.addComponentOrReplace(W);var X=new GLTFShape("Models/corporativeMode/corporativeMode6.glb");X.withCollisions=!0,X.isPointerBlocker=!0,X.visible=!0,H.addComponentOrReplace(X),z.hud.attachToEntity(H);var Z=new Entity("mrcbuildingPartymood");Z.setParent(j);var Q=new Transform({position:new Vector3(8,0,16),rotation:Quaternion.Euler(0,270,0),scale:new Vector3(1,1,1)});Z.addComponentOrReplace(Q);var J=new GLTFShape("Models/partyMode/partyMode6.glb");J.withCollisions=!0,J.isPointerBlocker=!0,J.visible=!0,Z.addComponentOrReplace(J);var K=new Entity,$=new Entity,et=new Entity,nt=new Entity,ot=new Entity,it=new GLTFShape("4007ce5a-051e-4ae7-b7c3-1ce3b051862d/MrcBuilding008_p05_partymode_lightanimation_05_green.glb");K.addComponent(it);for(var rt=new GLTFShape("4007ce5a-051e-4ae7-b7c3-1ce3b051862d/MrcBuilding008_p05_partymode_lightanimation_04_yellow.glb"),st=new GLTFShape("4007ce5a-051e-4ae7-b7c3-1ce3b051862d/MrcBuilding008_p05_partymode_lightanimation_03_violet.glb"),at=new GLTFShape("4007ce5a-051e-4ae7-b7c3-1ce3b051862d/MrcBuilding008_p05_partymode_lightanimation_02_blue.glb"),lt=new GLTFShape("4007ce5a-051e-4ae7-b7c3-1ce3b051862d/MrcBuilding008_p05_partymode_lightanimation_01_orange.glb"),dt=new Transform({position:new Vector3(0,-3.75,0),rotation:new Quaternion(0,0,0,1),scale:new Vector3(1,1,1)}),ut=[K,$,et,nt,ot],ct=0;ct<ut.length;ct++)engine.addEntity(ut[ct]),ut[ct].setParent(Z),ut[ct].addComponent(dt);var ht=new MessageBus;function switchToCorporativeMode(v){ht.emit("switchToCorporativeMode",{}),function(){__awaiter(this,void 0,void 0,(function(){var v,T,S;return __generator(this,(function(C){switch(C.label){case 0:v="https://us-central1-decentraland-mrc-party-button.cloudfunctions.net/app/change-condition",C.label=1;case 1:return C.trys.push([1,4,,5]),[4,fetch(v,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({corporativeMode:"true"})})];case 2:return[4,C.sent().json()];case 3:return T=C.sent(),log("fckin responseJson"+T),[3,5];case 4:return S=C.sent(),log("error posting mode",S),[3,5];case 5:return[2]}}))}))}()}function switchToPartyMode(v){ht.emit("switchToPartyMode",{}),function(){__awaiter(this,void 0,void 0,(function(){var v,T,S;return __generator(this,(function(C){switch(C.label){case 0:v="https://us-central1-decentraland-mrc-party-button.cloudfunctions.net/app/change-condition",C.label=1;case 1:return C.trys.push([1,4,,5]),[4,fetch(v,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({corporativeMode:"false"})})];case 2:return[4,C.sent().json()];case 3:return T=C.sent(),log("fckin responseJson"+T),[3,5];case 4:return S=C.sent(),log("error posting mode",S),[3,5];case 5:return[2]}}))}))}()}function changeLight(v){0===v?(K.addComponent(it),$.removeComponent(rt),et.removeComponent(st),nt.removeComponent(at),ot.removeComponent(lt)):1===v?(K.removeComponent(it),$.addComponent(rt),et.removeComponent(st),nt.removeComponent(at),ot.removeComponent(lt)):2===v?(K.removeComponent(it),$.removeComponent(rt),et.addComponent(st),nt.removeComponent(at),ot.removeComponent(lt)):3===v?(K.removeComponent(it),$.removeComponent(rt),et.removeComponent(st),nt.addComponent(at),ot.removeComponent(lt)):4===v&&(K.removeComponent(it),$.removeComponent(rt),et.removeComponent(st),nt.removeComponent(at),ot.addComponent(lt))}ht.on("switchToCorporativeMode",(function(){engine.removeEntity(Z),j.addComponent(new S.Delay(2e3,(function(){engine.addEntity(H)})))})),ht.on("switchToPartyMode",(function(){engine.removeEntity(H),j.addComponent(new S.Delay(2e3,(function(){engine.addEntity(Z)})))}));var pt=1.89;for(ct=0;ct<5;ct++)pt-=.75,(0,M.createButton)(Z,new Vector3(pt,20.6,6.1),new Vector3(.5,.5,.5),changeLight,!0,ct);!function(){__awaiter(this,void 0,void 0,(function(){var v,T,S;return __generator(this,(function(C){switch(C.label){case 0:v="https://us-central1-decentraland-mrc-party-button.cloudfunctions.net/app/get-condition",C.label=1;case 1:return C.trys.push([1,4,,5]),[4,fetch(v)];case 2:return[4,C.sent().json()];case 3:return S=C.sent(),T=S.corporativeMode,[3,5];case 4:return C.sent(),[3,5];case 5:return(T="true"===T)?(engine.addEntity(H),engine.removeEntity(Z)):(engine.addEntity(Z),engine.removeEntity(H)),[2]}}))}))}(),executeTask((function(){return __awaiter(void 0,void 0,void 0,(function(){var v,T,S,C,E,A,R,O,B;return __generator(this,(function(q){switch(q.label){case 0:v="https://us-central1-decentraland-mrc-party-button.cloudfunctions.net/app/get-admins",q.label=1;case 1:return q.trys.push([1,5,,6]),[4,fetch(v)];case 2:return[4,q.sent().json()];case 3:for(T=q.sent(),S=[],E=0;E<T.length;E++)S.push(T[E].wallet);return[4,(0,V.getUserPublicKey)()];case 4:for(C=q.sent(),E=0;E<S.length;E++)log("wallet address bitch:"+S[E].toLowerCase()),C.toString()==S[E].toLowerCase()&&(A=new Entity("buttonModels"),engine.addEntity(A),A.setParent(j),R=new Transform({position:new Vector3(8,0,16),rotation:Quaternion.Euler(0,270,0),scale:new Vector3(1,1,1)}),A.addComponentOrReplace(R),(O=new GLTFShape("Models/modeButtons.glb")).withCollisions=!0,O.isPointerBlocker=!0,O.visible=!0,A.addComponentOrReplace(O),z.hud.attachToEntity(A),(0,M.createButton)(j,new Vector3(10,1.6,18.3),new Vector3(.7,.7,.7),switchToPartyMode,!0,0),(0,M.createButton)(j,new Vector3(10,.8,18.3),new Vector3(.7,.7,.7),switchToCorporativeMode,!0,0));return[3,6];case 5:return B=q.sent(),log("error getting admins",B),[3,6];case 6:return[2]}}))}))}))}));